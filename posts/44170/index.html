<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mybatis3.4.1 | 茶白的博客</title><meta name="author" content="茶白"><meta name="copyright" content="茶白"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MyBatis 是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以使用简单的 XML 或注解来配置和映射原生信息，将接口和 Java 的 POJOs(Plain Ordinary Java Object,普通的 Java对象)映射成数据库中的记录。">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatis3.4.1">
<meta property="og:url" content="https://chabai000.github.io/posts/44170/index.html">
<meta property="og:site_name" content="茶白的博客">
<meta property="og:description" content="MyBatis 是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以使用简单的 XML 或注解来配置和映射原生信息，将接口和 Java 的 POJOs(Plain Ordinary Java Object,普通的 Java对象)映射成数据库中的记录。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chabai000.github.io/UpPictures/UpCover/MybatisCover.png">
<meta property="article:published_time" content="2022-03-28T07:16:31.000Z">
<meta property="article:modified_time" content="2022-05-02T04:29:08.000Z">
<meta property="article:author" content="茶白">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="mybatis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chabai000.github.io/UpPictures/UpCover/MybatisCover.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://chabai000.github.io/posts/44170/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 茶白","link":"链接: ","source":"来源: 茶白的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mybatis3.4.1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-02 12:29:08'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><meta name="generator" content="Hexo 7.1.1"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://api.bimg.cc/random')"><nav id="nav"><span id="blog-info"><a href="/" title="茶白的博客"><span class="site-name">茶白的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">mybatis3.4.1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-28T07:16:31.000Z" title="发表于 2022-03-28 15:16:31">2022-03-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-02T04:29:08.000Z" title="更新于 2022-05-02 12:29:08">2022-05-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">26.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>142分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="mybatis3.4.1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="1-引言"><a href="#1-引言" class="headerlink" title="1.引言"></a>1.引言</h3><p>Mybatis是一个基于java语言的持久层的框架，主要用来<strong>简化数据库的访问操作，内部封装了原来的jdbc代码，替换了原有项目开发中的jdbc技术，它可以自动完成对象与关系的映射(ORM)，极大地简化了我们的开发，提高了开发效率</strong>。</p>
<p>MyBatis官方网址：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/">mybatis – MyBatis 3 | Introduction</a></p>
<p>MyBatis中文网： <a target="_blank" rel="noopener" href="https://mybatis.net.cn/">MyBatis中文网</a></p>
<h3 id="2-JDBC存在的问题"><a href="#2-JDBC存在的问题" class="headerlink" title="2.JDBC存在的问题"></a>2.JDBC存在的问题</h3><ol>
<li><p>大量的代码冗余 (处理结果集的时候存在大量的代码冗余)</p>
</li>
<li><p>不能完成数据库和实体的自动转换 (需要手动封装实体，不能自动封装实体类)</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327231739289.png" alt="image-20240327231739289"></p>
<blockquote>
<p>实体与数据库之间的转换需要通过setXxx或者构造方法完成</p>
</blockquote>
<h3 id="3-Mybatis框架的开发思路"><a href="#3-Mybatis框架的开发思路" class="headerlink" title="3.Mybatis框架的开发思路"></a>3.Mybatis框架的开发思路</h3><p>需要2个配置文件：</p>
<ul>
<li>mybatis-config.xml：存储数据库连接相关参数，获取连接对象</li>
<li>mapper映射文件：因为映射文件中的id代表方法名，是识别方法的唯一标识，所以注意DAO中的方法名不能相同，不能重载。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/mybatis3-4-1Pictures/image-20240328154908799.png" alt="image-20240328154908799"></p>
<h3 id="4-使用IDEA中的Maven进行MyBatis环境搭建"><a href="#4-使用IDEA中的Maven进行MyBatis环境搭建" class="headerlink" title="4.使用IDEA中的Maven进行MyBatis环境搭建"></a>4.使用IDEA中的Maven进行MyBatis环境搭建</h3><p><strong>项目整体结构如下：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328151150888.png" alt="image-20240328151150888"></p>
<p><strong>1.新建Maven-archetype-webapp项目，命名为mybatis01</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327232049909.png" alt="image-20240327232049909"></p>
<p><strong>2.src—main路径下新建java、resources文件夹</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327232437982.png" alt="image-20240327232437982"></p>
<p><strong>3.pom.xml导入相关依赖，刷新Maven</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"> </span><br><span class="line"> &lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">   xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">   &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line"> </span><br><span class="line">   &lt;groupId&gt;org.example&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;mybatis01&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">   &lt;packaging&gt;war&lt;/packaging&gt;</span><br><span class="line"> </span><br><span class="line">   &lt;name&gt;mybatis01 Maven Webapp&lt;/name&gt;</span><br><span class="line">   &lt;!-- FIXME change it to the project<span class="string">&#x27;s website --&gt;</span></span><br><span class="line"><span class="string">   &lt;url&gt;http://www.example.com&lt;/url&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">   &lt;properties&gt;</span></span><br><span class="line"><span class="string">     &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span></span><br><span class="line"><span class="string">     &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;</span></span><br><span class="line"><span class="string">     &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;</span></span><br><span class="line"><span class="string">   &lt;/properties&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">   &lt;dependencies&gt;</span></span><br><span class="line"><span class="string">     &lt;!--mybatis核心包--&gt;</span></span><br><span class="line"><span class="string">     &lt;dependency&gt;</span></span><br><span class="line"><span class="string">       &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">       &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">       &lt;version&gt;3.4.1&lt;/version&gt;</span></span><br><span class="line"><span class="string">     &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">     </span></span><br><span class="line"><span class="string">     &lt;!--mysql驱动包--&gt;</span></span><br><span class="line"><span class="string">     &lt;dependency&gt;</span></span><br><span class="line"><span class="string">       &lt;groupId&gt;mysql&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">       &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">       &lt;version&gt;6.0.6&lt;/version&gt;</span></span><br><span class="line"><span class="string">     &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">     </span></span><br><span class="line"><span class="string">     &lt;!--junit测试包--&gt;</span></span><br><span class="line"><span class="string">     &lt;dependency&gt;</span></span><br><span class="line"><span class="string">       &lt;groupId&gt;junit&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">       &lt;artifactId&gt;junit&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">       &lt;version&gt;4.11&lt;/version&gt;</span></span><br><span class="line"><span class="string">       &lt;scope&gt;test&lt;/scope&gt;</span></span><br><span class="line"><span class="string">     &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">     &lt;dependency&gt;</span></span><br><span class="line"><span class="string">       &lt;groupId&gt;junit&lt;/groupId&gt;</span></span><br><span class="line"><span class="string">       &lt;artifactId&gt;junit&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">       &lt;version&gt;4.12&lt;/version&gt;</span></span><br><span class="line"><span class="string">       &lt;scope&gt;compile&lt;/scope&gt;</span></span><br><span class="line"><span class="string">     &lt;/dependency&gt;</span></span><br><span class="line"><span class="string">   &lt;/dependencies&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">   &lt;build&gt;</span></span><br><span class="line"><span class="string">     &lt;finalName&gt;mybatis01&lt;/finalName&gt;</span></span><br><span class="line"><span class="string">     &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line"><span class="string">       &lt;plugins&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;3.1.0&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">         &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;3.0.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;3.8.0&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;2.22.1&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;3.2.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;2.5.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">         &lt;plugin&gt;</span></span><br><span class="line"><span class="string">           &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">           &lt;version&gt;2.8.2&lt;/version&gt;</span></span><br><span class="line"><span class="string">         &lt;/plugin&gt;</span></span><br><span class="line"><span class="string">       &lt;/plugins&gt;</span></span><br><span class="line"><span class="string">     &lt;/pluginManagement&gt;</span></span><br><span class="line"><span class="string">   &lt;/build&gt;</span></span><br><span class="line"><span class="string"> &lt;/project&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>4.利用SQLyog创建数据库（mybatis）、表（user）、新增数据</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327232535709.png" alt="image-20240327232535709"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327232630117.png" alt="image-20240327232630117"></p>
<p><strong>5.在IDEA java路径下新建entity包、service包</strong></p>
<p>（1）entity包下新建与表user对应的实体类User，并添加get、set、toString方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 用户实体类，对应mybatis数据库中的user表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/5 10:42</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> uid;</span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> uage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUid</span><span class="params">(<span class="type">int</span> uid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uid = uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUname</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUname</span><span class="params">(String uname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uname = uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUage</span><span class="params">(<span class="type">int</span> uage)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uage = uage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;uid=&quot;</span> + uid +</span><br><span class="line">                <span class="string">&quot;, uname=&#x27;&quot;</span> + uname + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, uage=&quot;</span> + uage +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）在service包下新建接口UserService，编写findById方法，不用编写对应的实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> entity.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> UserService</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/5 11:56</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>6.在resources路径下新建mapper文件夹，添加mapper映射文件UserMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">          <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">          <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      mapper为映射的根节点，用来管理DAO接口</span></span><br><span class="line"><span class="comment">      namespace指定DAO接口的完整类名，表示mapper配置文件管理哪个DAO接口(包.接口名)</span></span><br><span class="line"><span class="comment">      mybatis会依据这个接口动态创建一个实现类去实现这个接口，而这个实现类是一个Mapper对象</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;entity.User&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          id = &quot;接口中的方法名&quot;</span></span><br><span class="line"><span class="comment">          parameterType = &quot;接口中传入方法的参数类型&quot;</span></span><br><span class="line"><span class="comment">          resultType = &quot;返回实体类对象：包.类名&quot;  处理结果集 自动封装</span></span><br><span class="line"><span class="comment">          注意:sql语句后不要出现&quot;;&quot;号</span></span><br><span class="line"><span class="comment">              查询：select标签</span></span><br><span class="line"><span class="comment">              增加：insert标签</span></span><br><span class="line"><span class="comment">              修改：update标签</span></span><br><span class="line"><span class="comment">              删除：delete标签</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.User&quot;</span>&gt;</span></span><br><span class="line">          select * from user where uid = #&#123;id&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>7.在resources路径下新建mybatis配置文件mybatis-config.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  <span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">          <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">          <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span> &gt;</span></span><br><span class="line">  <span class="comment">&lt;!--配置mybatis环境--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--配置连接使用的相关参数</span></span><br><span class="line"><span class="comment">          default为默认使用的环境：development 测试环境</span></span><br><span class="line"><span class="comment">                                product     生产环境</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--测试环境--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--事务管理类型：指定事务管理的方式 JDBC--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--数据库连接相关配置，动态获取config.properties文件里的内容--&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--数据源类型：POOLED 表示支持JDBC数据源连接池</span></span><br><span class="line"><span class="comment">                            UNPOOLED 表示不支持数据源连接池</span></span><br><span class="line"><span class="comment">                            JNDI 表示支持外部数据源连接池</span></span><br><span class="line"><span class="comment">              --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC<span class="symbol">&amp;amp;</span>useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">      <span class="comment">&lt;!--注册mapper配置文件（mapper文件路径配置）</span></span><br><span class="line"><span class="comment">          注意：映射配置文件位置要和映射器位置一样，如：映射器在com.mycode.dao里，</span></span><br><span class="line"><span class="comment">                那么配置文件就应该在resources的com/mycode/dao目录下，否则会报</span></span><br><span class="line"><span class="comment">                Could not find resource com.mycode.dao.UserMapper.xml类似错误</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>8.测试Mybatis环境是否搭建成功，在java路径下新建test包，包中编写单元测试类TestMyBatis</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> TestMyBatis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试MyBatis环境是否搭建成功</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/5 17:45</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyBatis</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//MyBatis读取配置文件的方式</span></span><br><span class="line">        <span class="comment">//InputStream is = TestMyBatis.class.getResourceAsStream(&quot;mybatis-config.xml&quot;);</span></span><br><span class="line">        <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            reader = Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//创建SQLSessionFactory对象实例</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">        <span class="comment">//获取Session, session中包含connection</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionFactory.openSession();</span><br><span class="line">        System.out.println(session);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//一般不从session中获取connection</span></span><br><span class="line">            session.getConnection().commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果不报错，表示环境搭建成功：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.apache.ibatis.session.defaults.DefaultSqlSession@6e3c1e69</span><br><span class="line">  Tue Apr 05 18:04:27 CST 2022 WARN: Establishing SSL connection without server&#x27;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#x27;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#x27;false&#x27;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</span><br></pre></td></tr></table></figure>

<p><strong>9.test中编写单元测试类UserTest</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.*;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.Reader;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> UserTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 单元测试</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/5 11:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">userFindByIdTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//配置文件名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resources</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="comment">//创建流</span></span><br><span class="line">        <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//使用MyBatis提供的Resources类加载mybatis的配置文件到reader对象中</span></span><br><span class="line">            reader= Resources.getResourceAsReader(resources);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//初始化mybatis，创建sqlSessionFactory类的实例</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">        <span class="comment">//创建session实例</span></span><br><span class="line">        SqlSession session= sessionFactory.openSession();</span><br><span class="line">        <span class="comment">//传入参数查询，返回结果</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> session.selectOne(<span class="string">&quot;findById&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="comment">//关闭session</span></span><br><span class="line">        session.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果如下：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tue Apr 05 13:35:42 CST 2022 WARN: Establishing SSL connection without server&#x27;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#x27;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#x27;false&#x27;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</span><br><span class="line">  User&#123;uid=1, uname=&#x27;zhangsan&#x27;, uage=20&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-代码结构调整"><a href="#5-代码结构调整" class="headerlink" title="5. 代码结构调整"></a>5. 代码结构调整</h3><h4 id="5-1-建表"><a href="#5-1-建表" class="headerlink" title="5.1 建表"></a>5.1 建表</h4><p> – 新建表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `t_user`;</span><br><span class="line"> CREATE TABLE `t_user` (</span><br><span class="line">   `id` int(11) NOT NULL auto_increment COMMENT &#x27;用户ID&#x27;,</span><br><span class="line">   `name` varchar(32) NOT NULL COMMENT &#x27;用户名&#x27;,</span><br><span class="line">   `birthday` datetime default NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">   `sex` char(1) default NULL COMMENT &#x27;性别&#x27;,</span><br><span class="line">   `address` varchar(256) default NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">   PRIMARY KEY(`id`)</span><br><span class="line"> ) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>

<p>– 插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert  into `t_user`(`id`,`name`,`birthday`,`sex`,`address`) values</span><br><span class="line"> (1,&#x27;老王&#x27;,&#x27;2018-02-27 17:47:08&#x27;,&#x27;男&#x27;,&#x27;北京&#x27;),</span><br><span class="line"> (2,&#x27;小二王&#x27;,&#x27;2018-03-02 15:09:37&#x27;,&#x27;女&#x27;,&#x27;北京金燕龙&#x27;),</span><br><span class="line"> (3,&#x27;小二王&#x27;,&#x27;2018-03-04 11:34:34&#x27;,&#x27;女&#x27;,&#x27;北京金燕龙&#x27;),</span><br><span class="line"> (4,&#x27;传智播客&#x27;,&#x27;2018-03-04 12:04:06&#x27;,&#x27;男&#x27;,&#x27;北京金燕龙&#x27;),</span><br><span class="line"> (5,&#x27;老王&#x27;,&#x27;2018-03-07 17:37:26&#x27;,&#x27;男&#x27;,&#x27;北京&#x27;),</span><br><span class="line"> (6,&#x27;小马宝莉&#x27;,&#x27;2018-03-08 11:44:00&#x27;,&#x27;女&#x27;,&#x27;北京修正&#x27;);</span><br></pre></td></tr></table></figure>

<h4 id="5-2-新建maven项目并在pom-xml中引入依赖"><a href="#5-2-新建maven项目并在pom-xml中引入依赖" class="headerlink" title="5.2 新建maven项目并在pom.xml中引入依赖"></a>5.2 新建maven项目并在pom.xml中引入依赖</h4><ul>
<li><strong>pom.xml</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--junit测试包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>刷新Maven！</strong></p>
<h4 id="5-3-开发实体类-entity"><a href="#5-3-开发实体类-entity" class="headerlink" title="5.3 开发实体类(entity)"></a>5.3 开发实体类(entity)</h4><ul>
<li><strong>User.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 用户实体类，对应mybatis数据库中表t_user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/13 17:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> Character sex;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Integer id, String name, Date birthday, Character sex, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Character <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(Character sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&quot;, sex=&quot;</span> + sex +</span><br><span class="line">                <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-4-开发持久层-Dao"><a href="#5-4-开发持久层-Dao" class="headerlink" title="5.4 开发持久层(Dao)"></a>5.4 开发持久层(Dao)</h4><ul>
<li><strong>IUserDao.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> IUserDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 用户持久层接口UserDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/13 17:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findAll</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 查询所有用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 17:44 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-5-开发mapper映射文件"><a href="#5-5-开发mapper映射文件" class="headerlink" title="5.5 开发mapper映射文件"></a>5.5 开发mapper映射文件</h4><ul>
<li><strong>IUserDaoMapper.xml</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">         <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.dao.IUserDao&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--findAll--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.study.entity.User&quot;</span>&gt;</span></span><br><span class="line">     select</span><br><span class="line">         id,name,birthday,sex,address</span><br><span class="line">     from t_user</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-6-开发mybatis主配置文件"><a href="#5-6-开发mybatis主配置文件" class="headerlink" title="5.6 开发mybatis主配置文件"></a>5.6 开发mybatis主配置文件</h4><ul>
<li><strong>mybatis-config.xml</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--mybatis的主配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置环境</span></span><br><span class="line"><span class="comment">            development 测试环境（默认）</span></span><br><span class="line"><span class="comment">            product     生产环境</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--测试环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--事务管理类型：指定事务管理的方式 JDBC--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接相关配置，动态获取config.properties文件里的内容--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据源类型：POOLED 表示支持JDBC数据源连接池</span></span><br><span class="line"><span class="comment">                          UNPOOLED 表示不支持数据源连接池</span></span><br><span class="line"><span class="comment">                          JNDI 表示支持外部数据源连接池</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 配置连接数据库的基本信息：</span></span><br><span class="line"><span class="comment">                     此处使用的是MySQL数据库，使用Oracle数据库时需要修改，仔细检查各项参数是否正确，里面配置了时区、编码方式、SSL，用以防止中文查询乱码，导致查询结果为null及SSL警告等问题--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                          <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC<span class="symbol">&amp;amp;</span>useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--指定映射文件的位置：即注册mapper配置文件（mapper文件路径配置）</span></span><br><span class="line"><span class="comment">        注意：映射配置文件位置要和映射器位置一样，如：映射器在com.mycode.dao里，</span></span><br><span class="line"><span class="comment">             那么配置文件就应该在resources的com/mycode/dao目录下，否则会报</span></span><br><span class="line"><span class="comment">             Could not find resource com.mycode.dao.UserMapper.xml类似错误</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--下面编写mapper映射文件↓↓↓↓↓ 参考格式：&lt;mapper resource=&quot;dao/UserMapper.xml&quot;/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/study/mapper/IUserDaoMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h4 id="5-7-开发测试类"><a href="#5-7-开发测试类" class="headerlink" title="5.7 开发测试类"></a>5.7 开发测试类</h4><ul>
<li><strong>IUserDaoTest.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> IUserDaoTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/13 17:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IUserDaoTest</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findAllTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 测试查询所有</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 18:05 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAllTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.读取mybatis主配置文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//2.创建SqlSessionFactory工厂</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">        <span class="comment">//3.使用工厂生产SqlSession对象</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="comment">//4.使用SqlSession创建Dao接口的代理对象</span></span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        <span class="comment">//5.使用代理对象执行方法</span></span><br><span class="line">        List&lt;User&gt; userList = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        is.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user = User&#123;id=1, name=&#x27;老王&#x27;, birthday=Tue Feb 27 17:47:08 CST 2018, sex=男, address=&#x27;北京&#x27;&#125;</span><br><span class="line"> user = User&#123;id=2, name=&#x27;小二王&#x27;, birthday=Fri Mar 02 15:09:37 CST 2018, sex=女, address=&#x27;北京金燕龙&#x27;&#125;</span><br><span class="line"> user = User&#123;id=43, name=&#x27;小二王&#x27;, birthday=Sun Mar 04 11:34:34 CST 2018, sex=女, address=&#x27;北京金燕龙&#x27;&#125;</span><br><span class="line"> user = User&#123;id=45, name=&#x27;传智播客&#x27;, birthday=Sun Mar 04 12:04:06 CST 2018, sex=男, address=&#x27;北京金燕龙&#x27;&#125;</span><br><span class="line"> user = User&#123;id=46, name=&#x27;老王&#x27;, birthday=Wed Mar 07 17:37:26 CST 2018, sex=男, address=&#x27;北京&#x27;&#125;</span><br><span class="line"> user = User&#123;id=48, name=&#x27;小马宝莉&#x27;, birthday=Thu Mar 08 11:44:00 CST 2018, sex=女, address=&#x27;北京修正&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-8-最终项目结构"><a href="#5-8-最终项目结构" class="headerlink" title="5.8 最终项目结构"></a>5.8 最终项目结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327234017319.png" alt="image-20240327234017319"></p>
<h4 id="5-9-测试增删改基本操作"><a href="#5-9-测试增删改基本操作" class="headerlink" title="5.9 测试增删改基本操作"></a>5.9 测试增删改基本操作</h4><ul>
<li><strong>IUserDao.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.dao;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"> <span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> IUserDao</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/8/13 20:16</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> findAll</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询所有</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 20:31 2022/8/13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> findById</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 根据Id查询</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: com.study.entity.User</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 20:32 2022/8/13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> findByIdAndName</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 多参数查询</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: name</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: com.study.entity.User</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 20:37 2022/8/13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     User <span class="title function_">findByIdAndName</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id,<span class="meta">@Param(&quot;name&quot;)</span>String name)</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> add</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 新增用户</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: user</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.lang.Integer</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 20:45 2022/8/13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     Integer <span class="title function_">add</span><span class="params">(User user)</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> deleteById</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 根据id删除用户</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.lang.Integer</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 21:05 2022/8/13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     Integer <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> updateById</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 根据id修改用户</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.lang.Integer</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 21:09 2022/8/13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     Integer <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>IUserDaoMapper.xml</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.study.dao.IUserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--findAll--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.study.entity.User&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">        id,name,birthday,sex,address</span><br><span class="line">    from t_user</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--findById--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.study.entity.User&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,name,birthday,sex,address</span><br><span class="line">        from t_user</span><br><span class="line">        where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--findByIdAndName--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByIdAndName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.study.entity.User&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,name,birthday,sex,address</span><br><span class="line">        from t_user</span><br><span class="line">        where id=#&#123;id&#125; and name=#&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--add--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.entity.User&quot;</span> &gt;</span></span><br><span class="line">        insert into t_user values(#&#123;id&#125;,#&#123;name&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--deleteById--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> &gt;</span></span><br><span class="line">        delete from t_user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--update--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.study.entity.User&quot;</span>&gt;</span></span><br><span class="line">        update t_user set name=#&#123;name&#125;,birthday=#&#123;birthday&#125;,sex=#&#123;sex&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>IUserDaoTest.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> IUserDaoTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/13 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IUserDaoTest</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findAllTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 测试查询所有</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 20:59 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAllTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        List&lt;User&gt; userList = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        is.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findByIdTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 20:59 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findByIdAndNameTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id和name查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 20:59 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdAndNameTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findByIdAndName(<span class="number">2</span>, <span class="string">&quot;小二王&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> addTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 新增用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:00 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">            sqlSession = factory.openSession();</span><br><span class="line">            <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> userDao.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">9</span>, <span class="string">&quot;皮卡丘&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="string">&#x27;女&#x27;</span>, <span class="string">&quot;黑龙江&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;受影响的行数 = &quot;</span> + n);</span><br><span class="line">            mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(<span class="literal">false</span>)），此处需要进行提交</span><br><span class="line">            sqlSession.commit();<span class="comment">//新增需要提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            sqlSession.rollback();;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> deleteByIdTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id删除</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:11 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteByIdTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">            sqlSession = factory.openSession();</span><br><span class="line">            <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> userDao.deleteById(<span class="number">7</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;受影响的行数 = &quot;</span> + n);</span><br><span class="line">            <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">            sqlSession.commit();<span class="comment">//新增需要提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            sqlSession.rollback();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> updateByIdTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id修改</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:11 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(is);</span><br><span class="line">            sqlSession = factory.openSession();</span><br><span class="line">            <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> userDao.update(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">3</span>, <span class="string">&quot;喜洋洋&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="string">&#x27;男&#x27;</span>, <span class="string">&quot;羊村&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;受影响的行数 = &quot;</span> + n);</span><br><span class="line">            <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">            sqlSession.commit();<span class="comment">//新增需要提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            sqlSession.rollback();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-10-MybatisUtil封装"><a href="#5-10-MybatisUtil封装" class="headerlink" title="5.10 MybatisUtil封装"></a>5.10 MybatisUtil封装</h4><ul>
<li><strong>MyBatisUtil.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> MybatisUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/13 21:22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtil</span> &#123;</span><br><span class="line">    <span class="comment">//声明工厂</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用ThreadLocal保证service与dao层session一致</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;SqlSession&gt; t = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态块，保证只加载一次</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;com/study/config/mybatis-config.xml&quot;</span>);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> getSession</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 获得SqlSession对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.ibatis.session.SqlSession</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:31 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> t.get();</span><br><span class="line">        <span class="keyword">if</span>(sqlSession==<span class="literal">null</span>)&#123;</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            t.set(sqlSession);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> close</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 关闭SqlSession对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:34 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> t.get();</span><br><span class="line">        <span class="keyword">if</span>(sqlSession!=<span class="literal">null</span>)&#123;</span><br><span class="line">            sqlSession.close();</span><br><span class="line">            t.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> commit</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 提交事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:35 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span>&#123;</span><br><span class="line">        getSession().commit();</span><br><span class="line">        close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> rollback</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 回滚事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:36 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span>&#123;</span><br><span class="line">        getSession().rollback();</span><br><span class="line">        close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>IUserDaoTest2.java</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.study.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.study.utils.MybatisUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> IUserDaoTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/8/13 20:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IUserDaoTest2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findAllTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 测试查询所有</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 20:59 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAllTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        List&lt;User&gt; userList = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();<span class="comment">//释放资源</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findByIdTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 20:59 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">        sqlSession.close();<span class="comment">//释放资源</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> findByIdAndNameTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id和name查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 20:59 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdAndNameTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findByIdAndName(<span class="number">2</span>, <span class="string">&quot;小二王&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">        sqlSession.close();<span class="comment">//释放资源</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> addTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 新增用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:00 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sqlSession = MybatisUtil.getSession();</span><br><span class="line">            <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> userDao.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">10</span>, <span class="string">&quot;熊大&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="string">&#x27;男&#x27;</span>, <span class="string">&quot;哈尔滨&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;受影响的行数 = &quot;</span> + n);</span><br><span class="line">            mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(<span class="literal">false</span>)），此处需要进行提交</span><br><span class="line">            sqlSession.commit();<span class="comment">//新增需要提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            sqlSession.rollback();;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> deleteByIdTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id删除</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:11 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteByIdTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sqlSession = MybatisUtil.getSession();</span><br><span class="line">            <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> userDao.deleteById(<span class="number">10</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;受影响的行数 = &quot;</span> + n);</span><br><span class="line">            <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">            sqlSession.commit();<span class="comment">//新增需要提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            sqlSession.rollback();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> updateByIdTest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据id修改</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 21:11 2022/8/13</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            sqlSession = MybatisUtil.getSession();</span><br><span class="line">            <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(IUserDao.class);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> userDao.update(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">10</span>, <span class="string">&quot;美羊羊&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="string">&#x27;女&#x27;</span>, <span class="string">&quot;羊村&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;受影响的行数 = &quot;</span> + n);</span><br><span class="line">            <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">            sqlSession.commit();<span class="comment">//新增需要提交事务</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            sqlSession.rollback();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-11-优化后项目结构"><a href="#5-11-优化后项目结构" class="headerlink" title="5.11 优化后项目结构"></a>5.11 优化后项目结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327234340765.png" alt="image-20240327234340765"></p>
<h3 id="6-Mybatis中增删改查使用"><a href="#6-Mybatis中增删改查使用" class="headerlink" title="6.Mybatis中增删改查使用"></a>6.Mybatis中增删改查使用</h3><h4 id="1-查-select"><a href="#1-查-select" class="headerlink" title="1.查(select)"></a>1.查(select)</h4><p><strong>mybatis数据库中表student：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327234646415.png" alt="image-20240327234646415"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240327234658012.png" alt="image-20240327234658012"></p>
<p> <strong>java：entity.Student.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Student</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 9:17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>java：dao.StudentDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> entity.Student;</span><br><span class="line"> <span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> StudentDAO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/7 9:18</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentDAO</span> &#123;</span><br><span class="line">     <span class="comment">//根据id查询学生</span></span><br><span class="line">     <span class="keyword">public</span> Student <span class="title function_">findById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//根据name查询学生</span></span><br><span class="line">     <span class="keyword">public</span> Student <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//多参数查询（注意接口中的参数必须使用@Param注解绑定）：根据id和name查询学生</span></span><br><span class="line">     <span class="keyword">public</span> Student <span class="title function_">findByIdAndName</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span><span class="type">int</span> id,<span class="meta">@Param(&quot;name&quot;)</span>String name)</span>;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">//查询所有</span></span><br><span class="line">     <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>resources: dao&#x2F;StudentDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">         <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"> <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     mapper为映射的根节点，用来管理DAO接口</span></span><br><span class="line"><span class="comment">     namespace指定DAO接口的完整类名，表示mapper配置文件管理哪个DAO接口(包.接口名)</span></span><br><span class="line"><span class="comment">     mybatis会依据这个接口动态创建一个实现类去实现这个接口，而这个实现类是一个Mapper对象</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.StudentDAO&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         id = &quot;接口中的方法名&quot;</span></span><br><span class="line"><span class="comment">         parameterType = &quot;接口中传入方法的参数类型&quot;</span></span><br><span class="line"><span class="comment">         resultType = &quot;返回实体类对象：包.类名&quot;  处理结果集 自动封装</span></span><br><span class="line"><span class="comment">         注意:sql语句后不要出现&quot;;&quot;号</span></span><br><span class="line"><span class="comment">             查询：select标签</span></span><br><span class="line"><span class="comment">             增加：insert标签</span></span><br><span class="line"><span class="comment">             修改：update标签</span></span><br><span class="line"><span class="comment">             删除：delete标签</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--根据id查询学生--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">         select id,name,age from student where id=#&#123;id&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">     <span class="comment">&lt;!--根据name查询学生--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">         select id,name,age from student where name=#&#123;name&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">     <span class="comment">&lt;!--多参数查询（注意接口中的参数必须使用@Param注解绑定）：根据id和name查询学生，select标签中parameterType省略不写--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByIdAndName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">         select id,name,age from student where id=#&#123;id&#125; and name=#&#123;name&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">     <span class="comment">&lt;!--查询所有：无论查询一个还是多个，最终resultType的值都是要封装的实体类全名（包名.类名）--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">         select id,name,age from student</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>resources: mybatis-config.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">         <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span> &gt;</span></span><br><span class="line"> <span class="comment">&lt;!--配置mybatis环境--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--配置连接使用的相关参数</span></span><br><span class="line"><span class="comment">         default为默认使用的环境：development 测试环境</span></span><br><span class="line"><span class="comment">                               product     生产环境</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--测试环境--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--事务管理类型：指定事务管理的方式 JDBC--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--数据库连接相关配置，动态获取config.properties文件里的内容--&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--数据源类型：POOLED 表示支持JDBC数据源连接池</span></span><br><span class="line"><span class="comment">                           UNPOOLED 表示不支持数据源连接池</span></span><br><span class="line"><span class="comment">                           JNDI 表示支持外部数据源连接池</span></span><br><span class="line"><span class="comment">             --&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!--此处使用的是MySQL数据库，使用Oracle数据库时需要修改，仔细检查各项参数是否正确--&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC<span class="symbol">&amp;amp;</span>useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">     <span class="comment">&lt;!--注册mapper配置文件（mapper文件路径配置）</span></span><br><span class="line"><span class="comment">         注意：映射配置文件位置要和映射器位置一样，如：映射器在com.mycode.dao里，</span></span><br><span class="line"><span class="comment">         那么配置文件就应该在resources的com/mycode/dao目录下，否则会报</span></span><br><span class="line"><span class="comment">         Could not find resource com.mycode.dao.UserMapper.xml类似错误</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--下面编写mapper映射文件↓↓↓↓↓ 参考格式：&lt;mapper resource=&quot;mapper/UserMapper.xml&quot;/&gt; --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;dao/StudentDAOMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>java：test.StudentDAOTest.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">import</span> dao.StudentDAO;</span><br><span class="line">  <span class="keyword">import</span> entity.Student;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">  <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">import</span> java.io.IOException;</span><br><span class="line">  <span class="keyword">import</span> java.io.Reader;</span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> StudentDAOTest</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/7 9:26</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDAOTest</span> &#123;</span><br><span class="line">      <span class="comment">//根据id查询</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">          <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">          <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionFactory.openSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.findById(<span class="number">1</span>);</span><br><span class="line">          System.out.println(student);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//根据name查询</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByNameTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">          <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">          <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionFactory.openSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.findByName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">          <span class="comment">//Student student = studentDAO.findByName(&quot;zhangsan&quot;);</span></span><br><span class="line">          System.out.println(student);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//根据id和name查询</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdAndNameTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">          <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">          <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionFactory.openSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.findByIdAndName(<span class="number">1</span>,<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">          <span class="comment">//Student student = studentDAO.findByIdAndName(2,&quot;zhangsan&quot;);</span></span><br><span class="line">          System.out.println(student);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//查询所有</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAllTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">          <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">          <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sessionFactory.openSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">          List&lt;Student&gt; students= studentDAO.findAll();</span><br><span class="line">          <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">              System.out.println(student);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果：</strong></p>
<p>（1）根据id查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;id=1, name=&#x27;张三&#x27;, age=15&#125;</span><br></pre></td></tr></table></figure>

<p>（2）根据id和name查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;id=1, name=&#x27;张三&#x27;, age=15&#125;</span><br></pre></td></tr></table></figure>

<p>（3）查询所有</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;id=<span class="number">1</span>, name=<span class="string">&#x27;张三&#x27;</span>, age=<span class="number">15</span>&#125;</span><br><span class="line">Student&#123;id=<span class="number">2</span>, name=<span class="string">&#x27;zhangsan&#x27;</span>, age=<span class="number">20</span>&#125;</span><br><span class="line">Student&#123;id=<span class="number">3</span>, name=<span class="string">&#x27;李四&#x27;</span>, age=<span class="number">25</span>&#125;</span><br><span class="line">Student&#123;id=<span class="number">4</span>, name=<span class="string">&#x27;王五&#x27;</span>, age=<span class="number">30</span>&#125;</span><br><span class="line">Student&#123;id=<span class="number">5</span>, name=<span class="string">&#x27;赵六&#x27;</span>, age=<span class="number">35</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>小结</strong><br><strong>1.单个参数查询</strong></p>
<p>a. 查询结果自动封装为实体对象，要求查询结果的列名必须与实体中属性名一致，实体中属性一定要有set、get方法，实体必须存在无参数构造；</p>
<p>b. 当查询结果与实体类中的属性名不一致时，可使用数据库别名的方式解决；</p>
<p><strong>2.多参数查询</strong></p>
<p>a. 在使用多个参数时，select标签中的parameterType属性省略不写；</p>
<p>b. 在select标签内获取多个参数的值，要求接口中的参数必须使用@Param注解绑定</p>
<p><strong>3.查询所有</strong></p>
<p>a. select标签中的parameterType属性省略不写</p>
<p>b. 无论是查询一个还是查询多个，最终resultType的值都是要封装的实体类全名（包名.类名）</p>
<p>c. 当进行单表简单查询时且返回值类型是基本类型时，一般尽量使用resultType；当进行表关联查询时，或者说xml中定义了相关的resultMap标签，那么就一般尽量使用resultMap；且resultType和resultMap不能同时使用。</p>
<p><strong>4.注意事项</strong></p>
<p><strong>a. mybatis报错：Could not find resource com.study.dao.UserMapper.xml</strong></p>
<p><strong>可能原因：</strong></p>
<p>映射配置文件位置要与映射器位置不一致，如：映射器在java下面的com.study.dao里，那么配置文件就应该在resources下面的com&#x2F;study&#x2F;dao目录下，两者要对应起来，否则找不到。注意mappers标签里面的mapper中resource内的层级结构用&#x2F;而不使用.，例如com&#x2F;study&#x2F;dao&#x2F;UserMapper.xml而不是com.study.dao.UserMapper.xml。<br><strong>b. mybatis使用中文作为查询条件查询时，数据库有结果，但查询结果为null</strong></p>
<p><strong>可能原因：</strong></p>
<p>1.中文在查询时变成乱码，导致查询不到结果，解决办法是在数据库连接时配置中文查询 characterEncoding&#x3D;utf-8，具体使用时添加”&amp;characterEncoding&#x3D;utf-8”或者”&amp; amp;characterEncoding&#x3D;utf-8”(提示：&amp;后面多加了个空格使用时要删掉，此处使用时存在转义)</p>
<p>2.java实体类的属性名与查询结果的列名（表的字段名）不一致，没有一一对应，表字段名太长时使用别名</p>
<p>3.sql语句有问题，仔细检查后修改</p>
<p><strong>c. 从数据库中进行查询或者进行其他操作时控制台会出现以下警告：</strong>WARN: Establishing SSL connection without server’s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn’t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to ‘false’. You need either to explicitly disable SSL by setting useSSL&#x3D;false, or set useSSL&#x3D;true and provide truststore for server certificate verification.<br><strong>可能原因：</strong></p>
<p>1.需要在配置文件中连接数据库的url后面添加”&amp;useSSL&#x3D;false”，注意有时候要考虑转义字符，此时要添加”&amp; amp;useSSL&#x3D;false”(提示：&amp;后面多加了个空格使用时要删掉，此处使用时存在转义)</p>
<p>2.如果上面配置正确，则可能是连接数据库时的驱动版本问题，在pom.xml中更换成其他版本的依赖即可。</p>
<p><strong>完整的mysql数据库url value：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql://localhost:3306/mybatisuseUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;serverTimezone=UTC&amp;amp;useSSL=false</span><br></pre></td></tr></table></figure>

<h4 id="2-增-insert"><a href="#2-增-insert" class="headerlink" title="2.增(insert)"></a>2.增(insert)</h4><p><strong>StudentDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入学生信息</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Student student)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--插入学生信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">    insert into student values(#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOTest.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入学生信息</span></span><br><span class="line">     <span class="meta">@Test</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">         <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">             <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">             session = sessionFactory.openSession();</span><br><span class="line">             <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">             studentDAO.insert(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">5</span>,<span class="string">&quot;小猪猪&quot;</span>,<span class="number">28</span>));</span><br><span class="line">             <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">             session.commit();</span><br><span class="line">         &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">             <span class="comment">//失败回滚</span></span><br><span class="line">             session.rollback();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-删-delete"><a href="#3-删-delete" class="headerlink" title="3.删(delete)"></a>3.删(delete)</h4><p><strong>StudentDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id删除学生信息</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--根据id删除学生信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    delete from student where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOTest.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id删除学生信息</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">              <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">              session = sessionFactory.openSession();</span><br><span class="line">              <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">              studentDAO.delete(<span class="number">5</span>);</span><br><span class="line">              <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">              session.commit();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              <span class="comment">//失败回滚</span></span><br><span class="line">              session.rollback();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-改-update"><a href="#4-改-update" class="headerlink" title="4.改(update)"></a>4.改(update)</h4><p><strong>StudentDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新学生信息</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Student student)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--更新学生信息--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">      update student set name=#&#123;name&#125;,age=#&#123;age&#125; where id=#&#123;id&#125;;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOTest.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新学生信息</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">              <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">              session = sessionFactory.openSession();</span><br><span class="line">              <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> session.getMapper(StudentDAO.class);</span><br><span class="line">              studentDAO.update(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">2</span>,<span class="string">&quot;小呆呆&quot;</span>,<span class="number">18</span>));</span><br><span class="line">              <span class="comment">//mybatis执行增删改时默认事务提交方式是手动的（setAutoCommit(false)），此处需要进行提交</span></span><br><span class="line">              session.commit();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              <span class="comment">//失败回滚</span></span><br><span class="line">              session.rollback();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>mybatis在进行增删改操作时默认事务是以手动方式提交的（setAutoCommit(false)），此时需要进行手动提交（session.commit()），否则不能使数据库内容发生改变。</p>
<h4 id="5-MybatisUtil封装"><a href="#5-MybatisUtil封装" class="headerlink" title="5.MybatisUtil封装"></a>5.MybatisUtil封装</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328135640331.png" alt="image-20240328135640331"></p>
<p><strong>具体实现：</strong></p>
<p><strong>MybatisUtil.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"> <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"> <span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"> <span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> <span class="keyword">import</span> java.io.Reader;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> MybatisUtil</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/8 10:01</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtil</span> &#123;</span><br><span class="line">     <span class="comment">//工厂</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">//ThreadLocal 保证service与dao层session一致</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;SqlSession&gt; t = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;SqlSession&gt;();</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">static</span> &#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsReader(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">             sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">         &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> getSqlSession</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 返回sqlSession对象</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: org.apache.ibatis.session.SqlSession</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/8 10:06</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">         <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> t.get();</span><br><span class="line">         <span class="keyword">if</span>(sqlSession == <span class="literal">null</span>)&#123;</span><br><span class="line">             sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">             t.set(sqlSession);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> sqlSession;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> close</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 关闭sqlSession对象</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/8 10:09</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>&#123;</span><br><span class="line">         <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> t.get();</span><br><span class="line">         <span class="keyword">if</span>(sqlSession != <span class="literal">null</span>)&#123;</span><br><span class="line">             sqlSession.close();</span><br><span class="line">             t.remove();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> commit</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 提交事务</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/8 10:13</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span>&#123;</span><br><span class="line">         getSqlSession().commit();</span><br><span class="line">         close();</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> rollback</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 回滚事务</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/8 10:14</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span>&#123;</span><br><span class="line">         getSqlSession().rollback();</span><br><span class="line">         close();</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOTest2.java（优化StudentDAOTest）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> dao.StudentDAO;</span><br><span class="line">  <span class="keyword">import</span> entity.Student;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line">  <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">  <span class="keyword">import</span> util.MybatisUtil;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> StudentDAOTest2</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/8 10:15</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDAOTest2</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> findByIdTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试根据id查询学生信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 10:40</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.findById(<span class="number">1</span>);</span><br><span class="line">          System.out.println(student);</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> findByNameTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试根据name查询学生信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 10:43</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByNameTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.findByName(<span class="string">&quot;小呆呆&quot;</span>);</span><br><span class="line">          System.out.println(student);</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> findByIdAndNameTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试根据id和name查询学生信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 10:44</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findByIdAndNameTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentDAO.findByIdAndName(<span class="number">1</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">          System.out.println(student);</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> findAllTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试查询所有</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 10:47</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findAllTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">          List&lt;Student&gt; students = studentDAO.findAll();</span><br><span class="line">          <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">              System.out.println(student);</span><br><span class="line">          &#125;</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> updateTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试更新数据</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 10:49</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              sqlSession = MybatisUtil.getSqlSession();</span><br><span class="line">              <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">              studentDAO.update(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">3</span>,<span class="string">&quot;光头强&quot;</span>,<span class="number">60</span>));</span><br><span class="line">              sqlSession.commit();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              sqlSession.rollback();</span><br><span class="line">          &#125;</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> deleteTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试根据id删除</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 10:57</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              sqlSession = MybatisUtil.getSqlSession();</span><br><span class="line">              <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">              studentDAO.delete(<span class="number">4</span>);</span><br><span class="line">              sqlSession.commit();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              sqlSession.rollback();</span><br><span class="line">          &#125;</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> insertTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试插入学生信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/8 11:00</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              sqlSession = MybatisUtil.getSqlSession();</span><br><span class="line">              <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">              studentDAO.insert(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">4</span>,<span class="string">&quot;喜洋洋&quot;</span>,<span class="number">6</span>));</span><br><span class="line">              sqlSession.commit();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              sqlSession.rollback();</span><br><span class="line">          &#125;</span><br><span class="line">          sqlSession.close();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-insert、update细节"><a href="#6-insert、update细节" class="headerlink" title="6.insert、update细节"></a>6.insert、update细节</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328135825004.png" alt="image-20240328135825004"></p>
<p><strong>注意：</strong></p>
<p> Mybatis框架在执行插入（insert）、更新（update）操作时，默认不允许插入或修改NULL值到数据库中，解决办法：</p>
<p>1.尝试设置一个值进去，实质并没有解决问题</p>
<p>2.再取值语句中设置一个jdbcType类型</p>
<p>例如：#{age,jdbcType&#x3D;INTEGER}</p>
<p>​           #{name,jdbcType&#x3D;VARCHAR}</p>
<p>​           #{birthday,jdbcType&#x3D;DATE}</p>
<p><strong>附：Mybatis中支持的jdbcType</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328135941526.png" alt="image-20240328135941526"></p>
<h4 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328140005774.png" alt="image-20240328140005774"></p>
<h3 id="7-log4j使用"><a href="#7-log4j使用" class="headerlink" title="7.log4j使用"></a>7.log4j使用</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328140307750.png" alt="image-20240328140307750"></p>
<p><strong>相关jar包：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.14.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>视频中log4j.properties</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">## 根日志</span><br><span class="line">## 日志级别</span><br><span class="line">log4j.rootLogger=ERROR,stdout</span><br><span class="line">## 输出位置</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">## 布局</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">## 格式</span><br><span class="line">log4j.appender.stdout.layout.conversionPattern=[%p] %d&#123;yyyy-MM-dd&#125; %t %c %m%n</span><br><span class="line"></span><br><span class="line">## 子日志</span><br><span class="line">## 日志级别</span><br><span class="line">log4j.logger.dao=DEBUG</span><br><span class="line">## 监听spring框架的日志级别</span><br><span class="line">log4j.logger.org.springframework=ERROR</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOTest2.java运行findByIdTest结果</strong></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] 2022-04-12 main dao.StudentDAO.findById ==&gt;  Preparing: select id,name,age from student where id=? </span><br><span class="line">[DEBUG] 2022-04-12 main dao.StudentDAO.findById ==&gt; Parameters: 1(Integer)</span><br><span class="line">[DEBUG] 2022-04-12 main dao.StudentDAO.findById &lt;==      Total: 1</span><br><span class="line">Student&#123;id=1, name=&#x27;张三&#x27;, age=15&#125;</span><br><span class="line">Student&#123;id=1, name=&#x27;张三&#x27;, age=15&#125;</span><br></pre></td></tr></table></figure>

<p><strong>（待完善）若进行如下细节设置，测试还存在问题：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">### 设置###</span><br><span class="line"> log4j.rootLogger = debug,stdout,D,E</span><br><span class="line">  </span><br><span class="line"> ### 输出信息到控制抬 ###</span><br><span class="line"> log4j.appender.stdout = org.apache.log4j.ConsoleAppender</span><br><span class="line"> log4j.appender.stdout.Target = System.out</span><br><span class="line"> log4j.appender.stdout.layout = org.apache.log4j.PatternLayout</span><br><span class="line"> log4j.appender.stdout.layout.ConversionPattern = [%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span><br><span class="line">  </span><br><span class="line"> ### 输出DEBUG级别以上的日志到=D://logs/debug.log ###</span><br><span class="line"> log4j.appender.D = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line"> log4j.appender.D.File = D://Software_Development/IDEA_code/logs/debug.log           //日志输出路径 可更改</span><br><span class="line"> log4j.appender.D.Append = true</span><br><span class="line"> log4j.appender.D.Threshold = DEBUG</span><br><span class="line"> log4j.appender.D.layout = org.apache.log4j.PatternLayout</span><br><span class="line"> log4j.appender.D.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br><span class="line">  </span><br><span class="line"> ### 输出ERROR级别以上的日志到=E://logs/error.log ###</span><br><span class="line"> log4j.appender.E = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line"> log4j.appender.E.File =D://Software_Development/IDEA_code/logs/error.log</span><br><span class="line"> log4j.appender.E.Append = true</span><br><span class="line"> log4j.appender.E.Threshold = ERROR</span><br><span class="line"> log4j.appender.E.layout = org.apache.log4j.PatternLayout</span><br><span class="line"> log4j.appender.E.layout.ConversionPattern = %-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span><br></pre></td></tr></table></figure>

<p><strong>测试代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> log4j;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> TestLog4j</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/9 22:00</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLog4j</span> &#123;</span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getLogger(Logger.class);</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="comment">//记录info级别的信息</span></span><br><span class="line">         logger.info(<span class="string">&quot;这是info级别的信息&quot;</span>);</span><br><span class="line">         <span class="comment">//记录debug级别的信息</span></span><br><span class="line">         logger.debug(<span class="string">&quot;这是debug级别的信息&quot;</span>);</span><br><span class="line">         <span class="comment">//记录error级别的信息</span></span><br><span class="line">         logger.error(<span class="string">&quot;这是error级别的信息&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">log4j:ERROR setFile(null,true) call failed.</span><br><span class="line"> java.io.FileNotFoundException: D:\Software_Development\IDEA_code\logs\debug.log           \ÈÕÖ¾Êä³öÂ·¾¶ ¿É¸ü¸Ä (系统找不到指定的路径。)</span><br><span class="line">     at java.io.FileOutputStream.open0(Native Method)</span><br><span class="line">     at java.io.FileOutputStream.open(FileOutputStream.java:270)</span><br><span class="line">     at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:213)</span><br><span class="line">     at java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:133)</span><br><span class="line">     at org.apache.log4j.FileAppender.setFile(FileAppender.java:294)</span><br><span class="line">     at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)</span><br><span class="line">     at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:223)</span><br><span class="line">     at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:307)</span><br><span class="line">     at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:172)</span><br><span class="line">     at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:104)</span><br><span class="line">     at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:842)</span><br><span class="line">     at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:768)</span><br><span class="line">     at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:648)</span><br><span class="line">     at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:514)</span><br><span class="line">     at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:580)</span><br><span class="line">     at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:526)</span><br><span class="line">     at org.apache.log4j.LogManager.&lt;clinit&gt;(LogManager.java:127)</span><br><span class="line">     at org.apache.log4j.Logger.getLogger(Logger.java:117)</span><br><span class="line">     at log4j.TestLog4j.&lt;clinit&gt;(TestLog4j.java:13)</span><br><span class="line"> log4j:ERROR Either File or DatePattern options are not set for appender [D].</span><br><span class="line"> [INFO ] 2022-04-09 23:05:48,318 method:log4j.TestLog4j.main(TestLog4j.java:17)</span><br><span class="line"> 这是info级别的信息</span><br><span class="line"> [DEBUG] 2022-04-09 23:05:48,320 method:log4j.TestLog4j.main(TestLog4j.java:19)</span><br><span class="line"> 这是debug级别的信息</span><br><span class="line"> [ERROR] 2022-04-09 23:05:48,320 method:log4j.TestLog4j.main(TestLog4j.java:21)</span><br><span class="line"> 这是error级别的信息</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328140540198.png" alt="image-20240328140540198"></p>
<h3 id="8-排序（order-by）"><a href="#8-排序（order-by）" class="headerlink" title="8.排序（order by）"></a>8.排序（order by）</h3><p><strong>sql语句：</strong></p>
<p>格式：select 字段1，字段2，… from 表名 order by 字段名 asc&#x2F;desc<br>其中，asc表示升序（默认的排序方式，可省略不写），desc表示降序<br>例：SELECT id,name,age FROM student ORDER BY name<br><strong>查询结果：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328140733868.png" alt="image-20240328140733868"></p>
<h3 id="9-分页查询-limit"><a href="#9-分页查询-limit" class="headerlink" title="9.分页查询(limit)"></a>9.分页查询(limit)</h3><p><strong>分页前一般先排序，这里以age进行降序排列，每条显示5条数据为例，进行说明</strong></p>
<p>降序排列：SELECT id,NAME,age FROM student ORDER BY age DESC</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328140816732.png" alt="image-20240328140816732"></p>
<p>语法：limit 起始值 页面的大小<br>格式：select 字段1，字段2，… from 表名 order by 字段名 limit (n-1)*pageSize,pageSize</p>
<p>其中，pageSize表示页面大小，(n-1)pageSize表示起始值，n表示当前页，总页数&#x3D;数据总数&#x2F;页面大小 </p>
<p>以每页显示5条数据为例<br>查询第1页 (1-1)5&#x3D;0,5  第1页从0开始，范围为0-4，对应第1到第5条数据<br>SELECT id,name,age FROM student ORDER BY age DESC LIMIT 0,5</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328140909939.png" alt="image-20240328140909939"></p>
<p>查询第2页 (2-1)*5&#x3D;5,5  第2页从5开始，范围为5-9，对应第6到第10条数据<br>SELECT id,NAME,age FROM student ORDER BY age DESC LIMIT 5,5</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328141042177.png" alt="image-20240328141042177"></p>
<p>查询第3页 (3-1)*5&#x3D;10,5  第3页从10开始，范围为10-14，对应第11到第15条数据<br>SELECT id,NAME,age FROM student ORDER BY age DESC LIMIT 10,5</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328141056789.png" alt="image-20240328141056789"></p>
<p><strong>StudentDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> selectByPage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: pageNow 当前页码</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: pageSize 每页显示信息条数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: java.util.List&lt;entity.Student&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/10 16:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> List&lt;Student&gt; <span class="title function_">selectByPage</span><span class="params">(Map&lt;String,Integer&gt; map)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--分页查询--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByPage&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">      select id,name,age from student order by age desc limit #&#123;pageStart&#125;,#&#123;pageSize&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意：</strong>limit后面只能这样传入两个参数，多加操作会报错（就目前认知来看）</p>
</blockquote>
<p><strong>测试</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@MethodName</span> selectByPage</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> 分页查询</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/10 16:23</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectByPage</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">      <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">      HashMap&lt;String,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">      map.put(<span class="string">&quot;pageStart&quot;</span>,<span class="number">0</span>);<span class="comment">//第1页从0开始，范围为0-4，对应第1到第5条数据 </span></span><br><span class="line">      map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">5</span>);</span><br><span class="line">      List&lt;Student&gt; students1 = studentDAO.selectByPage(map);</span><br><span class="line">      System.out.println(<span class="string">&quot;---------------第1页----------------&quot;</span>);</span><br><span class="line">      students1.forEach(student -&gt; System.out.println(student));</span><br><span class="line">      map.put(<span class="string">&quot;pageStart&quot;</span>,<span class="number">5</span>);<span class="comment">//第2页从5开始，范围为5-9，对应第6到第10条数据</span></span><br><span class="line">      map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">5</span>);</span><br><span class="line">      List&lt;Student&gt; students2 = studentDAO.selectByPage(map);</span><br><span class="line">      System.out.println(<span class="string">&quot;---------------第2页----------------&quot;</span>);</span><br><span class="line">      students2.forEach(student -&gt; System.out.println(student));</span><br><span class="line">      map.put(<span class="string">&quot;pageStart&quot;</span>,<span class="number">10</span>);<span class="comment">//第3页从10开始，范围为10-14，对应第11到第15条数据</span></span><br><span class="line">      map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">5</span>);</span><br><span class="line">      List&lt;Student&gt; students3 = studentDAO.selectByPage(map);</span><br><span class="line">      System.out.println(<span class="string">&quot;---------------第3页----------------&quot;</span>);</span><br><span class="line">      students3.forEach(student -&gt; System.out.println(student));</span><br><span class="line">      sqlSession.close();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---------------第1页----------------</span><br><span class="line"> Student&#123;id=13, name=&#x27;慢羊羊&#x27;, age=70&#125;</span><br><span class="line"> Student&#123;id=3, name=&#x27;光头强&#x27;, age=37&#125;</span><br><span class="line"> Student&#123;id=5, name=&#x27;小猪猪&#x27;, age=28&#125;</span><br><span class="line"> Student&#123;id=6, name=&#x27;猪猪侠&#x27;, age=25&#125;</span><br><span class="line"> Student&#123;id=9, name=&#x27;熊大&#x27;, age=20&#125;</span><br><span class="line"> ---------------第2页----------------</span><br><span class="line"> Student&#123;id=7, name=&#x27;猪小呆&#x27;, age=19&#125;</span><br><span class="line"> Student&#123;id=2, name=&#x27;小呆呆&#x27;, age=18&#125;</span><br><span class="line"> Student&#123;id=10, name=&#x27;熊二&#x27;, age=16&#125;</span><br><span class="line"> Student&#123;id=1, name=&#x27;张三&#x27;, age=15&#125;</span><br><span class="line"> Student&#123;id=12, name=&#x27;暖羊羊&#x27;, age=14&#125;</span><br><span class="line"> ---------------第3页----------------</span><br><span class="line"> Student&#123;id=11, name=&#x27;沸羊羊&#x27;, age=12&#125;</span><br><span class="line"> Student&#123;id=4, name=&#x27;喜洋洋&#x27;, age=6&#125;</span><br><span class="line"> Student&#123;id=8, name=&#x27;皮卡丘&#x27;, age=5&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10模糊查询-like"><a href="#10模糊查询-like" class="headerlink" title="10模糊查询(like)"></a>10模糊查询(like)</h3><p><strong>以在name中模糊查询“猪”为例，sql语句：</strong></p>
<p>  – 格式：select 字段1，字段2，… from 表名 where 字段名 like ’%要查询的模糊词%‘<br>  –      %模糊词： 表示前模糊<br>  –      模糊词%： 表示后模糊<br>  –      %模糊词%：表示中间模糊<br>  SELECT id,name,age FROM student WHERE name LIKE ‘%猪%’</p>
<p><strong>数据库中查询结果：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328141301383.png" alt="image-20240328141301383"></p>
<p><strong>StudentDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模糊查询</span></span><br><span class="line">  List&lt;Student&gt; <span class="title function_">selectByLike</span><span class="params">(String keyWords)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>StudentDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--模糊查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByLike&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">    select id,name,age from student where name like &quot;%&quot;#&#123;keyWords&#125;&quot;%&quot;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意：</strong></p>
<p><strong>1.模糊查询时要使用“ ”将%括起来而不是’ ‘</strong></p>
<p><strong>2.查询中涉及到中文时，需要在连接数据库时配置characterEncoding&#x3D;UTF-8</strong></p>
<p><strong>以上两种任一种不设置错误或设置错误均会导致查询不到结果或结果为null！！！</strong></p>
</blockquote>
<p><strong>测试</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> selectByLikeTest</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 模糊查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/10 12:21</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectByLikeTest</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">          List&lt;Student&gt; students = studentDAO.selectByLike(<span class="string">&quot;小&quot;</span>);</span><br><span class="line">          <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">              System.out.println(student);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student&#123;id=5, name=&#x27;小猪猪&#x27;, age=28&#125;</span><br><span class="line">Student&#123;id=6, name=&#x27;猪猪侠&#x27;, age=25&#125;</span><br><span class="line">Student&#123;id=7, name=&#x27;猪小呆&#x27;, age=19&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-实体类别名设置"><a href="#11-实体类别名设置" class="headerlink" title="11.实体类别名设置"></a>11.实体类别名设置</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328141533962.png" alt="image-20240328141533962"></p>
<p> <strong>实体类起别名对应代码：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--给实体类起别名，方便在XxxDAOMapeer.xml文件中进行简写--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--type为要起别名的类对应的全限定名，alias为起的别名--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;entity.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Student&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="12-引入properties配置文件"><a href="#12-引入properties配置文件" class="headerlink" title="12.引入properties配置文件"></a>12.引入properties配置文件</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328141636567.png" alt="image-20240328141636567"></p>
<p><strong>jdbc.properties</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver = com.mysql.cj.jdbc.Driver</span><br><span class="line">url = jdbc:mysql://localhost:3306/mybatis</span><br><span class="line">username = root</span><br><span class="line">password = 123456</span><br></pre></td></tr></table></figure>

<p><strong>mybatis-config.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置mybatis环境--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入jdbc.properties配置文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        配置连接数据库使用的相关参数,default为默认使用的环境</span></span><br><span class="line"><span class="comment">        其中，development表示测试环境，可简写为dev</span></span><br><span class="line"><span class="comment">             produc表示生产环境，可简写为prod</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--测试环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--事务管理类型：指定事务管理的方式 JDBC--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据库连接相关配置，动态获取config.properties文件里的内容--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--数据源类型：POOLED 表示支持JDBC数据源连接池</span></span><br><span class="line"><span class="comment">                          UNPOOLED 表示不支持数据源连接池</span></span><br><span class="line"><span class="comment">                          JNDI 表示支持外部数据源连接池</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--此处使用的是MySQL数据库，使用Oracle数据库时需要修改，仔细检查各项参数是否正确--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="13-动态sql（sql、include、if、where、choose、when、otherwise、set、trim、foreach）"><a href="#13-动态sql（sql、include、if、where、choose、when、otherwise、set、trim、foreach）" class="headerlink" title="13.动态sql（sql、include、if、where、choose、when、otherwise、set、trim、foreach）"></a>13.动态sql（sql、include、if、where、choose、when、otherwise、set、trim、foreach）</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328141752500.png" alt="image-20240328141752500"></p>
<p><strong>具体实现：</strong></p>
<p><strong>t_book表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `t_book`;</span><br><span class="line">CREATE TABLE IF NOT EXISTS `t_book`(</span><br><span class="line">  `id` VARCHAR(40) PRIMARY KEY,</span><br><span class="line">  `name` VARCHAR(40),</span><br><span class="line">  `publishDate` DATE,</span><br><span class="line">  `price` DOUBLE(7,3),</span><br><span class="line">  `author` VARCHAR(50)</span><br><span class="line">)ENGINE=INNODB CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">INSERT INTO `t_book` VALUES</span><br><span class="line">(&#x27;1&#x27;,&#x27;六脉神剑&#x27;,SYSDATE(),120.23,&#x27;小黑&#x27;),</span><br><span class="line">(&#x27;2&#x27;,&#x27;如来神掌&#x27;,SYSDATE(),110.23,&#x27;小名&#x27;),</span><br><span class="line">(&#x27;3&#x27;,&#x27;葵花宝典&#x27;,SYSDATE(),80.23,&#x27;无名&#x27;),</span><br><span class="line">(&#x27;4&#x27;,&#x27;星星点灯&#x27;,SYSDATE(),90.34,&#x27;小牛&#x27;),</span><br><span class="line">(&#x27;5&#x27;,&#x27;黯然销魂掌&#x27;,SYSDATE(),67.23,&#x27;小伟&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>Book.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.Date;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> Book</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/12 15:25</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">     <span class="keyword">private</span> String id;</span><br><span class="line">     <span class="keyword">private</span> String name;</span><br><span class="line">     <span class="keyword">private</span> Date publishDate;</span><br><span class="line">     <span class="keyword">private</span> Double price;</span><br><span class="line">     <span class="keyword">private</span> String author;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Book&#123;&quot;</span> +</span><br><span class="line">                 <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, publishDate=&quot;</span> + publishDate +</span><br><span class="line">                 <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                 <span class="string">&quot;, author=&#x27;&quot;</span> + author + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(String id, String name, Date publishDate, Double price, String author)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">         <span class="built_in">this</span>.publishDate = publishDate;</span><br><span class="line">         <span class="built_in">this</span>.price = price;</span><br><span class="line">         <span class="built_in">this</span>.author = author;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">()</span> &#123;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> name;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Date <span class="title function_">getPublishDate</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> publishDate;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPublishDate</span><span class="params">(Date publishDate)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.publishDate = publishDate;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Double <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> price;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Double price)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.price = price;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getAuthor</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> author;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAuthor</span><span class="params">(String author)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.author = author;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>a. sql标签</strong></p>
</blockquote>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> 测试查询所有</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span>: java.util.List&lt;entity.Book&gt;</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/12 15:27</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  List&lt;Book&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sql语句片段复用标签</span></span><br><span class="line"><span class="comment">         id：代表片段的唯一标识</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;commonFields&quot;</span>&gt;</span></span><br><span class="line">     id,name,publishDate,price,author</span><br><span class="line"> <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="comment">&lt;!--查询所有--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Book&quot;</span>&gt;</span></span><br><span class="line">     /* include标签用来指定使用哪个sql片段</span><br><span class="line">         refid：表示所使用片段的id</span><br><span class="line">     */</span><br><span class="line">     select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;commonFields&quot;</span>/&gt;</span> from t_book</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> testSelectAll</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试查询所有   </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 16:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">    List&lt;Book&gt; books = bookDAO.selectAll();</span><br><span class="line">    books.forEach(book -&gt; System.out.println(book));</span><br><span class="line">    MybatisUtil.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>b. if标签</strong></p>
</blockquote>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> selectByFields</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 用来测试动态sql：if、where</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: book 此处一定要传入对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: java.util.List&lt;entity.Book&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 16:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Book&gt; <span class="title function_">selectByFields</span><span class="params">(Book book)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--根据字段查询：测试动态sql：if、where--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByFields&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Book&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Book&quot;</span>&gt;</span></span><br><span class="line">      select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;commonFields&quot;</span>/&gt;</span> from t_book</span><br><span class="line">      <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">              name=#&#123;name&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null and author!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">              and author=#&#123;author&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> testSelectByFields</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试 where if</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 16:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByFields</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">    List&lt;Book&gt; books = bookDAO.selectByFields(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="literal">null</span>, <span class="string">&quot;六脉神剑&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">&quot;小黑&quot;</span>));</span><br><span class="line">    books.forEach(book -&gt; System.out.println(<span class="string">&quot;book = &quot;</span> + book));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>c.choose when otherwise标签</strong></p>
</blockquote>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> selectByChoose</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 用来测试动态sql：choose、when、otherwise</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: book</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: java.util.List&lt;entity.Book&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 16:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Book&gt; <span class="title function_">selectByChoose</span><span class="params">(Book book)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--根据选择查询：测试动态sql：choose、when、otherwise--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Book&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Book&quot;</span>&gt;</span></span><br><span class="line">      select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;commonFields&quot;</span>/&gt;</span> from t_book</span><br><span class="line">      where</span><br><span class="line">      <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">              name=#&#123;name&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;price!=null&quot;</span>&gt;</span></span><br><span class="line">              price=#&#123;price&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">              author=#&#123;author&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> testSelectByChoose</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试 choose、when、otherwise</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 16:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByChoose</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">    <span class="comment">//List&lt;Book&gt; books = bookDAO.selectByChoose(new Book(null, &quot;六脉神剑&quot;,null , null, null));</span></span><br><span class="line">    <span class="comment">//List&lt;Book&gt; books = bookDAO.selectByChoose(new Book(null, null,null , null, &quot;小黑&quot;));</span></span><br><span class="line">    List&lt;Book&gt; books = bookDAO.selectByChoose(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="literal">null</span>, <span class="literal">null</span>,<span class="literal">null</span> , <span class="number">110.23</span>, <span class="string">&quot;小黑&quot;</span>));</span><br><span class="line">    books.forEach(book -&gt; System.out.println(<span class="string">&quot;book = &quot;</span> + book));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>d. set标签</strong></p>
</blockquote>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*</span><br><span class="line">   * <span class="meta">@MethodName</span> update</span><br><span class="line">   * <span class="meta">@Description</span> 测试set标签</span><br><span class="line">   * <span class="meta">@Author</span> chabai</span><br><span class="line">   * <span class="meta">@Date</span> <span class="number">2022</span>/<span class="number">4</span>/<span class="number">12</span> <span class="number">16</span>:<span class="number">59</span></span><br><span class="line">   * <span class="meta">@param</span> book</span><br><span class="line">   */</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Book book)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--测试set标签--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Book&quot;</span>&gt;</span></span><br><span class="line">     update t_book</span><br><span class="line">     <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">             name=#&#123;name&#125;,</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null and author!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">             author=#&#123;author&#125;</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">     where id=#&#123;id&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@MethodName</span> testUpdate</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> 测试 set</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/12 17:13</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">      <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">      bookDAO.update(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;九阴真经&quot;</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="string">&quot;小猫&quot;</span>));</span><br><span class="line">      MybatisUtil.commit();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>e. trim标签</strong></p>
</blockquote>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@MethodName</span> update</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> 测试trim标签</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/12 16:59</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Book book)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--测试trim标签--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Book&quot;</span>&gt;</span></span><br><span class="line">      update t_book</span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          prefix：加入前缀</span></span><br><span class="line"><span class="comment">          prefixOverrides：去掉前缀</span></span><br><span class="line"><span class="comment">          suffix：加入后缀</span></span><br><span class="line"><span class="comment">          suffixOverrides：去掉后缀</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;set&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;,&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;where&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">              name=#&#123;name&#125;,</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null and author!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">              author=#&#123;author&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">      id=#&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@MethodName</span> testUpdate</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> 测试 trim</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/12 17:13</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">      <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">      bookDAO.update(<span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;九阴真经&quot;</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="string">&quot;小猫&quot;</span>));</span><br><span class="line">      MybatisUtil.commit();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>f. foreach标签</strong></p>
</blockquote>
<ul>
<li><strong>批量插入数据</strong><ul>
<li>– 批量插入数据使用的sql语句：insert into 表名 (字段一,字段二,字段三) values(aaa,bbb,ccc),(ddd,eee,fff)，(ggg,hhh,lll)</li>
</ul>
</li>
</ul>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> insertAll</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试foreach遍历</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: books</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 17:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertAll</span><span class="params">(List&lt;Book&gt; books)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 批量插入数据 </span></span><br><span class="line"><span class="comment">          SELECT LAST_INSERT_ID()：获得刚insert进去记录的主键值，只适用于自增主键</span></span><br><span class="line"><span class="comment">          keyProperty：将查询到主键值设置到parameterType指定的对象的那个属性</span></span><br><span class="line"><span class="comment">          order：SELECT LAST_INSERT_ID()执行顺序，相对于insert语句来讲它的执行顺序</span></span><br><span class="line"><span class="comment">          resultType：指定SELECTLAST_INSERT_ID()的结果类型</span></span><br><span class="line"><span class="comment">          参考链接： http://www.javashuo.com/article/p-fcnlzrmg-nw.html</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">          collection:用来书写遍历集合类型</span></span><br><span class="line"><span class="comment">          index : 当前遍历的索引，从0开始</span></span><br><span class="line"><span class="comment">          item  : 当前遍历元素的别名</span></span><br><span class="line"><span class="comment">          open  : 在第一次遍历之前加入的语句</span></span><br><span class="line"><span class="comment">          close : 在最后一次遍历之后加入的语句</span></span><br><span class="line"><span class="comment">          separator: 在每一次遍历之后加入的语句，最后一次不加入</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertBatch&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.util.List&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">resultType</span>=<span class="string">&quot;long&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">order</span>=<span class="string">&quot;AFTER&quot;</span>&gt;</span></span><br><span class="line">          SELECT LAST_INSERT_ID()</span><br><span class="line">      <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">      insert into t_book</span><br><span class="line">      (<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;commonFields&quot;</span>/&gt;</span>)</span><br><span class="line">      values</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;book&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">          (</span><br><span class="line">              #&#123;book.id&#125;,#&#123;book.name&#125;,#&#123;book.publishDate&#125;,#&#123;book.price&#125;,#&#123;book.author&#125;</span><br><span class="line">          )</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> testInsertBatch</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试foreach遍历  批量插入数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 17:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertBatch</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">    bookDAO.insertBatch(Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Book</span>(UUID.randomUUID().toString(), <span class="string">&quot;海边的卡夫卡&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="number">23.45</span>, <span class="string">&quot;村上春树&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Book</span>(UUID.randomUUID().toString(),<span class="string">&quot;阿弥陀佛么么哒&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),<span class="number">25.36</span>,<span class="string">&quot;大冰&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Book</span>(UUID.randomUUID().toString(),<span class="string">&quot;兄弟&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),<span class="number">34.56</span>,<span class="string">&quot;余华&quot;</span>)</span><br><span class="line">    ));</span><br><span class="line">    MybatisUtil.commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>批量更新数据</strong></p>
<ul>
<li><p>– 批量更新数据使用的sql语句：</p>
<p>UPDATE 表名</p>
<p>SET aa &#x3D; CASE id</p>
<p>WHEN 1 THEN ‘aaa’</p>
<p>WHEN 2 THEN ‘bbb’</p>
<p>WHEN 3 THEN ‘ccc’</p>
<p>END　</p>
<p>,SET bb &#x3D; CASE id</p>
<p>WHEN 1 THEN ‘ddd’</p>
<p>WHEN 2 THEN ‘eee’</p>
<p>WHEN 3 THEN ‘fff’</p>
<p>END</p>
<p>WHERE id IN (1,2,3)</p>
</li>
</ul>
<p><strong>BookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> updateBatch</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试foreach遍历 批量更新数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: books</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 17:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBatch</span><span class="params">(List&lt;Book&gt; books)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookDAOMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 批量更新数据 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBatch&quot;</span>&gt;</span></span><br><span class="line">      update t_book set</span><br><span class="line">      name =</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;book&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">separator</span>=<span class="string">&quot; &quot;</span> <span class="attr">open</span>=<span class="string">&quot;case id&quot;</span> <span class="attr">close</span>=<span class="string">&quot;end&quot;</span>&gt;</span></span><br><span class="line">          when #&#123;book.id&#125; then #&#123;book.name&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">      ,price =</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;book&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">separator</span>=<span class="string">&quot; &quot;</span> <span class="attr">open</span>=<span class="string">&quot;case id&quot;</span> <span class="attr">close</span>=<span class="string">&quot;end&quot;</span>&gt;</span></span><br><span class="line">      when #&#123;book.id&#125; then #&#123;book.price&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">      ,author =</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;book&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">separator</span>=<span class="string">&quot; &quot;</span> <span class="attr">open</span>=<span class="string">&quot;case id&quot;</span> <span class="attr">close</span>=<span class="string">&quot;end&quot;</span>&gt;</span></span><br><span class="line">          when #&#123;book.id&#125; then #&#123;book.author&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">      where id in</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;book&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">          #&#123;book.id&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>TestBookDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@MethodName</span> testUpdateBatch</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> 测试foreach遍历 批量更新数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/12 17:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateBatch</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">    <span class="type">BookDAO</span> <span class="variable">bookDAO</span> <span class="operator">=</span> sqlSession.getMapper(BookDAO.class);</span><br><span class="line">    bookDAO.updateBatch(Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;喜羊羊&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(),<span class="number">11.11</span>, <span class="string">&quot;猪猪侠&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;暖羊羊&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),<span class="number">22.22</span>,<span class="string">&quot;小呆呆&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;沸羊羊&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),<span class="number">33.33</span>,<span class="string">&quot;波比&quot;</span>)</span><br><span class="line">    ));</span><br><span class="line">    MybatisUtil.commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="14-关联查询"><a href="#14-关联查询" class="headerlink" title="14.关联查询"></a>14.关联查询</h3><h4 id="1-一对一关联关系"><a href="#1-一对一关联关系" class="headerlink" title="1 一对一关联关系"></a>1 一对一关联关系</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328142833167.png" alt="image-20240328142833167"></p>
<p><strong>1.1 建表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">-- 身份信息表</span><br><span class="line"> DROP TABLE IF EXISTS `t_card`;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_card`(</span><br><span class="line">   `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">   `no` VARCHAR(18),</span><br><span class="line">   `address` VARCHAR(100),</span><br><span class="line">   `fork` VARCHAR(30)</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 用户表</span><br><span class="line"> DROP TABLE IF EXISTS `t_users`;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_users`(</span><br><span class="line">   `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">   `name` VARCHAR(40),</span><br><span class="line">   `age` INTEGER,</span><br><span class="line">   `bir` DATE,</span><br><span class="line">   `cardId` VARCHAR(36) REFERENCES `t_card`(`id`)</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 插入t_card数据</span><br><span class="line"> INSERT INTO t_card VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;1&#x27;,&#x27;北京市海淀区&#x27;,&#x27;汉族&#x27;),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;2&#x27;,&#x27;北京市昌平区&#x27;,&#x27;满族&#x27;);</span><br><span class="line">  </span><br><span class="line"> -- 插入t_users数据</span><br><span class="line"> INSERT INTO t_users VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;小黑&#x27;,15,CURDATE(),&#x27;1&#x27;),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;小白&#x27;,23,CURDATE(),&#x27;2&#x27;);</span><br><span class="line">  </span><br><span class="line"> -- 查看表中数据</span><br><span class="line"> SELECT * FROM t_card;</span><br><span class="line"> SELECT * FROM t_users;</span><br><span class="line">  </span><br><span class="line"> -- 进行连接查询</span><br><span class="line"> SELECT u.`id`,u.`name`,u.`age`,u.`bir`,c.`no`,c.`address`,c.`fork` FROM t_users u</span><br><span class="line"> LEFT JOIN t_card c</span><br><span class="line"> ON u.`cardId`=c.`id`;</span><br><span class="line"> -- 或</span><br><span class="line"> SELECT u.id userId,u.name,u.age,u.bir,</span><br><span class="line">        c.id cardId,c.no,c.fork,c.address</span><br><span class="line"> FROM t_users u</span><br><span class="line"> LEFT JOIN t_card c</span><br><span class="line"> ON u.cardId=c.id;</span><br><span class="line"> -- 或</span><br><span class="line"> SELECT c.id cardId,c.no,c.address,c.fork,</span><br><span class="line">        u.id userId,u.name,u.age,u.bir</span><br><span class="line"> FROM t_card c</span><br><span class="line"> LEFT JOIN t_users u</span><br><span class="line"> ON c.id=u.cardId;</span><br></pre></td></tr></table></figure>

<p><strong>查询结果：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328142937810.png" alt="image-20240328142937810"></p>
<p><strong>1.2 创建实体类</strong></p>
<blockquote>
<p>User</p>
<p>注意：先添加User的属性、无参有参构造方法、set、get方法、toString方法，再添加Card属性以及get、set方法，防止在toString方法里面产生死环，打印时异常，栈溢出</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.Date;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> User</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 14:31</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">     <span class="keyword">private</span> String id;</span><br><span class="line">     <span class="keyword">private</span> String name;</span><br><span class="line">     <span class="keyword">private</span> Integer age;</span><br><span class="line">     <span class="keyword">private</span> Date bir;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">//关系属性，需要额外添加get、set方法</span></span><br><span class="line">     <span class="comment">//注意此属性不能出现在toString方法里面，否则会产生死环，打印时异常，栈溢出</span></span><br><span class="line">     <span class="keyword">private</span> Card card;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Card <span class="title function_">getCard</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> card;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCard</span><span class="params">(Card card)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.card = card;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String id, String name, Integer age, Date bir)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">         <span class="built_in">this</span>.age = age;</span><br><span class="line">         <span class="built_in">this</span>.bir = bir;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> name;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> age;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.age = age;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Date <span class="title function_">getBir</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> bir;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBir</span><span class="params">(Date bir)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.bir = bir;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                 <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                 <span class="string">&quot;, bir=&quot;</span> + bir +</span><br><span class="line">                 <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Card</strong></p>
<p><strong>注意：</strong>先添加Card的属性、无参有参构造方法、set、get方法、toString方法，再添加User属性以及get、set方法，防止在toString方法里面产生死环，打印时异常，栈溢出</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> Card</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 14:37</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Card</span> &#123;</span><br><span class="line">     <span class="keyword">private</span> String id;</span><br><span class="line">     <span class="keyword">private</span> String no;</span><br><span class="line">     <span class="keyword">private</span> String address;</span><br><span class="line">     <span class="keyword">private</span> String fork;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">//关系属性，需要额外添加get、set方法</span></span><br><span class="line">     <span class="comment">// 注意此属性不能出现在toString方法里面，否则会产生死环，打印时异常，栈溢出</span></span><br><span class="line">     <span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> user;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.user = user;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">()</span> &#123;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">(String id, String no, String address, String fork)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">         <span class="built_in">this</span>.no = no;</span><br><span class="line">         <span class="built_in">this</span>.address = address;</span><br><span class="line">         <span class="built_in">this</span>.fork = fork;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getNo</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> no;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNo</span><span class="params">(String no)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.no = no;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> address;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.address = address;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getFork</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> fork;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFork</span><span class="params">(String fork)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.fork = fork;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Card&#123;&quot;</span> +</span><br><span class="line">                 <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, no=&#x27;&quot;</span> + no + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, fork=&#x27;&quot;</span> + fork + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>1.3 创建DAO组件</strong></p>
<blockquote>
<p><strong>UserDAO</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> entity.User;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> UserDAO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 14:42</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDAO</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询用户信息及身份信息</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;entity.User&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/16 14:43</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>CardrDAO</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> entity.Card;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> CardDAO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 16:03</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CardDAO</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询身份信息及用户信息</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;entity.Card&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/16 16:03</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;Card&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>1.4 创建mapper配置文件</strong></p>
<blockquote>
<p><strong>UserDAOMapper.xml</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">         <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.UserDAO&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         处理关联关系时，resultType无法将关系属性进行自动封装，其只能处理单表简单类型（对象）</span></span><br><span class="line"><span class="comment">         处理关系属性赋值时，要使用resultMap</span></span><br><span class="line"><span class="comment">             type：封装对象类型</span></span><br><span class="line"><span class="comment">                   1.如果是一个对象，直接写对象的全名</span></span><br><span class="line"><span class="comment">                   2.如果是多个对象，同样要写泛型的类型</span></span><br><span class="line"><span class="comment">             id：resultMap的名字</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;entity.User&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--id：用来封装外部表的主键，column：数据库中的列名（字段名），property：实体类中的属性名--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--result：用来封装外部表的普通属性值，column：数据库中的列名（字段名），property：实体类中的属性名--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;bir&quot;</span> <span class="attr">property</span>=<span class="string">&quot;bir&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">         <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">             关系属性封装：一对一</span></span><br><span class="line"><span class="comment">             association：用来处理一对一关系属性封装</span></span><br><span class="line"><span class="comment">             property：关系属性名</span></span><br><span class="line"><span class="comment">             javaType：关系属性的类型</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;card&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;entity.Card&quot;</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--规则同上--&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;cardId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;no&quot;</span> <span class="attr">property</span>=<span class="string">&quot;no&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;fork&quot;</span> <span class="attr">property</span>=<span class="string">&quot;fork&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         selectAll</span></span><br><span class="line"><span class="comment">         resultMap：定义封装对象时，外部使用哪个resultMap进行封装，书写resultMap标签的id属性</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">         select u.id userId,u.name,u.age,u.bir,</span><br><span class="line">                c.id cardId,c.no,c.fork,c.address</span><br><span class="line">         from t_users u</span><br><span class="line">         left join t_card c</span><br><span class="line">         on u.cardId=c.id</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>CardDAOMapper.xml</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">         <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.CardDAO&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;cardMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;entity.Card&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;no&quot;</span> <span class="attr">property</span>=<span class="string">&quot;no&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;fork&quot;</span> <span class="attr">property</span>=<span class="string">&quot;fork&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">         <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;entity.User&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;userId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;bir&quot;</span> <span class="attr">property</span>=<span class="string">&quot;bir&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--selectAll--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;cardMap&quot;</span>&gt;</span></span><br><span class="line">         select c.id cardId,c.no,c.address,c.fork,</span><br><span class="line">                u.id userId,u.name,u.age,u.bir</span><br><span class="line">         from t_card c</span><br><span class="line">         left join t_users u</span><br><span class="line">         on c.id=u.cardId</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>1.5 mybatis-config.xml配置mapper</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/UserDAOMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CardDAOMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>1.6 测试连接查询</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> dao.CardDAO;</span><br><span class="line">  <span class="keyword">import</span> dao.UserDAO;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line">  <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">  <span class="keyword">import</span> util.MybatisUtil;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> TestDAO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/16 16:37</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDAO</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> testUserDAO</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试UserDAO组件连接查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 16:38</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUserDAO</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">UserDAO</span> <span class="variable">userDAO</span> <span class="operator">=</span> sqlSession.getMapper(UserDAO.class);</span><br><span class="line">          userDAO.selectAll().forEach(user -&gt; System.out.println(<span class="string">&quot;user = &quot;</span> + user + <span class="string">&quot; &quot;</span> + user.getCard()));</span><br><span class="line">          MybatisUtil.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> testCardDAO</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试CardDAO组件连接查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 16:39</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCardDAO</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">CardDAO</span> <span class="variable">cardDAO</span> <span class="operator">=</span> sqlSession.getMapper(CardDAO.class);</span><br><span class="line">          cardDAO.selectAll().forEach(card -&gt; System.out.println(<span class="string">&quot;card = &quot;</span> + card + <span class="string">&quot; &quot;</span> + card.getUser()));</span><br><span class="line">          MybatisUtil.close();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果：</strong></p>
<p><strong>（1）UserDAO</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] 2022-04-16 main dao.UserDAO.selectAll ==&gt;  Preparing: select u.id userId,u.name,u.age,u.bir, c.id cardId,c.no,c.fork,c.address from t_users u left join t_card c on u.cardId=c.id </span><br><span class="line">  [DEBUG] 2022-04-16 main dao.UserDAO.selectAll ==&gt; Parameters: </span><br><span class="line">  [DEBUG] 2022-04-16 main dao.UserDAO.selectAll &lt;==      Total: 2</span><br><span class="line">  user = User&#123;id=&#x27;1&#x27;, name=&#x27;小黑&#x27;, age=15, bir=Sat Apr 16 00:00:00 CST 2022&#125; Card&#123;id=&#x27;1&#x27;, no=&#x27;1&#x27;, address=&#x27;北京市海淀区&#x27;, fork=&#x27;汉族&#x27;&#125;</span><br><span class="line">  user = User&#123;id=&#x27;2&#x27;, name=&#x27;小白&#x27;, age=23, bir=Sat Apr 16 00:00:00 CST 2022&#125; Card&#123;id=&#x27;2&#x27;, no=&#x27;2&#x27;, address=&#x27;北京市昌平区&#x27;, fork=&#x27;满族&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>（2）CardDAO</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] 2022-04-16 main dao.CardDAO.selectAll ==&gt;  Preparing: select c.id cardId,c.no,c.address,c.fork, u.id userId,u.name,u.age,u.bir from t_card c left join t_users u on c.id=u.cardId </span><br><span class="line">  [DEBUG] 2022-04-16 main dao.CardDAO.selectAll ==&gt; Parameters: </span><br><span class="line">  [DEBUG] 2022-04-16 main dao.CardDAO.selectAll &lt;==      Total: 2</span><br><span class="line">  card = Card&#123;id=&#x27;1&#x27;, no=&#x27;1&#x27;, address=&#x27;北京市海淀区&#x27;, fork=&#x27;汉族&#x27;&#125; User&#123;id=&#x27;1&#x27;, name=&#x27;小黑&#x27;, age=15, bir=Sat Apr 16 00:00:00 CST 2022&#125;</span><br><span class="line">  card = Card&#123;id=&#x27;2&#x27;, no=&#x27;2&#x27;, address=&#x27;北京市昌平区&#x27;, fork=&#x27;满族&#x27;&#125; User&#123;id=&#x27;2&#x27;, name=&#x27;小白&#x27;, age=23, bir=Sat Apr 16 00:00:00 CST 2022&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-一对多关联关系"><a href="#2-一对多关联关系" class="headerlink" title="2 一对多关联关系"></a>2 一对多关联关系</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328143533538.png" alt="image-20240328143533538"></p>
<p><strong>2.1 建表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">-- 部门表</span><br><span class="line"> DROP TABLE IF EXISTS t_dept;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_dept`(</span><br><span class="line">   `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">   `name` VARCHAR(40)</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 员工表</span><br><span class="line"> DROP TABLE IF EXISTS t_emps;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_emps`(</span><br><span class="line">   `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">   `name` VARCHAR(40),</span><br><span class="line">   `age` INTEGER,</span><br><span class="line">   `bir` DATE,</span><br><span class="line">   `salary` DOUBLE(7,2),</span><br><span class="line">   `deptId` VARCHAR(36) REFERENCES `t_dept`(`id`)</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 部门测试数据</span><br><span class="line"> INSERT INTO t_dept VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;教学部&#x27;),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;研发部&#x27;);</span><br><span class="line">  </span><br><span class="line"> -- 员工的测试数据</span><br><span class="line"> INSERT INTO t_emps VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;小黑&#x27;,12,CURDATE(),23000.13,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;小三&#x27;,13,CURDATE(),24000.14,&#x27;2&#x27;),</span><br><span class="line"> (&#x27;3&#x27;,&#x27;小黄&#x27;,14,CURDATE(),25000.15,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;4&#x27;,&#x27;小牛&#x27;,15,CURDATE(),26000.16,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;5&#x27;,&#x27;小金&#x27;,16,CURDATE(),27000.17,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;6&#x27;,&#x27;小陈&#x27;,17,CURDATE(),28000.18,&#x27;2&#x27;);</span><br><span class="line">  </span><br><span class="line"> -- 查看表数据</span><br><span class="line"> SELECT * FROM t_dept;</span><br><span class="line"> SELECT * FROM t_emps;</span><br><span class="line">  </span><br><span class="line"> -- 根据部门找员工信息</span><br><span class="line"> SELECT </span><br><span class="line">   d.id,d.`name`,</span><br><span class="line">   e.`id`,e.`name`,e.`age`,e.`bir`,e.`salary`,e.`deptId`</span><br><span class="line"> FROM t_dept d</span><br><span class="line"> LEFT JOIN t_emps e</span><br><span class="line"> ON d.`id`=e.`deptId`;</span><br></pre></td></tr></table></figure>

<p><strong>2.2 创建实体类</strong></p>
<blockquote>
<p>Dept</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> Dept</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/16 20:19</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String id;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//关系属性</span></span><br><span class="line">      <span class="keyword">private</span> List&lt;Emp&gt; emps;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">getEmps</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> emps;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmps</span><span class="params">(List&lt;Emp&gt; emps)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.emps = emps;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Dept</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Dept</span><span class="params">(String id, String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;Dept&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Emp</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.Date;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> Emp</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 20:21</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">     <span class="keyword">private</span> String id;</span><br><span class="line">     <span class="keyword">private</span> String name;</span><br><span class="line">     <span class="keyword">private</span> Integer age;</span><br><span class="line">     <span class="keyword">private</span> Double salary;</span><br><span class="line">     <span class="keyword">private</span> Date bir;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">//关系属性</span></span><br><span class="line">     <span class="keyword">private</span> Dept dept;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Dept <span class="title function_">getDept</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> dept;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.dept = dept;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">()</span> &#123;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">(String id, String name, Integer age, Double salary, Date bir)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">         <span class="built_in">this</span>.age = age;</span><br><span class="line">         <span class="built_in">this</span>.salary = salary;</span><br><span class="line">         <span class="built_in">this</span>.bir = bir;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.id = id;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> name;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> age;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.age = age;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Double <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> salary;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(Double salary)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.salary = salary;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> Date <span class="title function_">getBir</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> bir;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBir</span><span class="params">(Date bir)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.bir = bir;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Emp&#123;&quot;</span> +</span><br><span class="line">                 <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                 <span class="string">&quot;, salary=&quot;</span> + salary +</span><br><span class="line">                 <span class="string">&quot;, bir=&quot;</span> + bir +</span><br><span class="line">                 <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.3 创建DAO组件</strong></p>
<blockquote>
<p>DeptDAO</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> entity.Dept;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> DeptDAO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 20:25</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptDAO</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询部门的同时将部门中所有的员工信息一并查到</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;entity.Dept&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/16 20:26</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;Dept&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>EmpDAO</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> entity.Emp;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> EmpDAO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/16 20:53</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpDAO</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询员工信息的同时将部门的信息一并查到</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;entity.Emp&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/16 20:54</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;Emp&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.4 创建mapper配置文件</strong></p>
<blockquote>
<p>DeptDAOMapper</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"> &lt;!DOCTYPE mapper</span><br><span class="line">         PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="line">  </span><br><span class="line"> &lt;mapper namespace=<span class="string">&quot;dao.DeptDAO&quot;</span>&gt;</span><br><span class="line">     &lt;!--</span><br><span class="line">         id = <span class="string">&quot;接口中的方法名&quot;</span></span><br><span class="line">         parameterType = <span class="string">&quot;接口中传入方法的参数类型&quot;</span> 基本类型和String正常使用，引用类型使用类的全限定名(包名.类名)</span><br><span class="line">         resultType = <span class="string">&quot;返回实体类对象：包.类名&quot;</span>  处理结果集 自动封装</span><br><span class="line">         注意:</span><br><span class="line">             <span class="number">1.</span>sql语句后不要出现<span class="string">&quot;;&quot;</span>号</span><br><span class="line">             <span class="number">2.</span>Mybatis框架在执行插入(insert)、更新(update)操作时，默认不允许插入或修改NULL值到数据库中，</span><br><span class="line">         要在sql语句的取值处设置一个jdbcType类型(类型全部字母大写))，例如：#&#123;age,jdbcType=INTEGER&#125;</span><br><span class="line">     --&gt;</span><br><span class="line">     &lt;resultMap id=<span class="string">&quot;deptMap&quot;</span> type=<span class="string">&quot;entity.Dept&quot;</span>&gt;</span><br><span class="line">         &lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">         &lt;result column=<span class="string">&quot;name&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line">         &lt;!-- 处理关系属性的封装</span><br><span class="line">             collection：用来处理封装集合类型的管理属性，用来处理一对多这种情况</span><br><span class="line">             property: 关系属性名</span><br><span class="line">             javaType: 关系属性类型</span><br><span class="line">             ofType  : 集合中泛型类型  全名</span><br><span class="line">          --&gt;</span><br><span class="line">         &lt;collection property=<span class="string">&quot;emps&quot;</span> javaType=<span class="string">&quot;list&quot;</span> ofType=<span class="string">&quot;entity.Emp&quot;</span>&gt;</span><br><span class="line">             &lt;id column=<span class="string">&quot;eid&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">             &lt;result column=<span class="string">&quot;ename&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">             &lt;result column=<span class="string">&quot;age&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line">             &lt;result column=<span class="string">&quot;salary&quot;</span> property=<span class="string">&quot;salary&quot;</span>/&gt;</span><br><span class="line">             &lt;result column=<span class="string">&quot;bir&quot;</span> property=<span class="string">&quot;bir&quot;</span>/&gt;</span><br><span class="line">         &lt;/collection&gt;</span><br><span class="line">     &lt;/resultMap&gt;</span><br><span class="line">  </span><br><span class="line">     &lt;!--selectAll--&gt;</span><br><span class="line">     &lt;select id=<span class="string">&quot;selectAll&quot;</span> resultMap=<span class="string">&quot;deptMap&quot;</span>&gt;</span><br><span class="line">         select</span><br><span class="line">             d.id,d.name,</span><br><span class="line">             e.id eid,e.name ename,e.age,e.salary,e.bir</span><br><span class="line">         from t_dept d</span><br><span class="line">         left join t_emps e</span><br><span class="line">         on d.id=e.deptId</span><br><span class="line">     &lt;/select&gt;</span><br><span class="line"> &lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>EmpDAOMapper</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"> &lt;!DOCTYPE mapper</span><br><span class="line">         PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="line">  </span><br><span class="line"> &lt;mapper namespace=<span class="string">&quot;dao.EmpDAO&quot;</span>&gt;</span><br><span class="line">     &lt;!--</span><br><span class="line">         id = <span class="string">&quot;接口中的方法名&quot;</span></span><br><span class="line">         parameterType = <span class="string">&quot;接口中传入方法的参数类型&quot;</span> 基本类型和String正常使用，引用类型使用类的全限定名(包名.类名)</span><br><span class="line">         resultType = <span class="string">&quot;返回实体类对象：包.类名&quot;</span>  处理结果集 自动封装</span><br><span class="line">         注意:</span><br><span class="line">             <span class="number">1.</span>sql语句后不要出现<span class="string">&quot;;&quot;</span>号</span><br><span class="line">             <span class="number">2.</span>Mybatis框架在执行插入(insert)、更新(update)操作时，默认不允许插入或修改NULL值到数据库中，</span><br><span class="line">         要在sql语句的取值处设置一个jdbcType类型(类型全部字母大写))，例如：#&#123;age,jdbcType=INTEGER&#125;</span><br><span class="line">     --&gt;</span><br><span class="line">     &lt;resultMap id=<span class="string">&quot;empMap&quot;</span> type=<span class="string">&quot;entity.Emp&quot;</span>&gt;</span><br><span class="line">         &lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">         &lt;result column=<span class="string">&quot;name&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">         &lt;result column=<span class="string">&quot;age&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line">         &lt;result column=<span class="string">&quot;salary&quot;</span> property=<span class="string">&quot;salary&quot;</span>/&gt;</span><br><span class="line">         &lt;result column=<span class="string">&quot;bir&quot;</span> property=<span class="string">&quot;bir&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line">         &lt;!-- 处理关系属性的封装</span><br><span class="line">             collection：用来处理封装集合类型的管理属性，用来处理一对多这种情况</span><br><span class="line">             property: 关系属性名</span><br><span class="line">             javaType: 关系属性类型</span><br><span class="line">             ofType  : 集合中泛型类型  全名</span><br><span class="line">          --&gt;</span><br><span class="line">         &lt;association property=<span class="string">&quot;dept&quot;</span> javaType=<span class="string">&quot;entity.Dept&quot;</span>&gt;</span><br><span class="line">             &lt;id column=<span class="string">&quot;did&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">             &lt;result column=<span class="string">&quot;dname&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">         &lt;/association&gt;</span><br><span class="line">     &lt;/resultMap&gt;</span><br><span class="line">  </span><br><span class="line">     &lt;!--selectAll--&gt;</span><br><span class="line">     &lt;select id=<span class="string">&quot;selectAll&quot;</span> resultMap=<span class="string">&quot;empMap&quot;</span>&gt;</span><br><span class="line">         select</span><br><span class="line">             e.id,e.name,e.age,e.salary,e.bir,</span><br><span class="line">             d.id did,d.name dname</span><br><span class="line">         from t_dept d</span><br><span class="line">         left join t_emps e</span><br><span class="line">         on d.id=e.deptId</span><br><span class="line">     &lt;/select&gt;</span><br><span class="line"> &lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2.5 mybatis-config.xml配置mapper</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">      &lt;mapper resource=<span class="string">&quot;mapper/DeptDAOMapper.xml&quot;</span>/&gt;</span><br><span class="line">      &lt;mapper resource=<span class="string">&quot;mapper/EmpDAOMapper.xml&quot;</span>/&gt;</span><br><span class="line">  &lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2.6 测试连接查询</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> dao.CardDAO;</span><br><span class="line">  <span class="keyword">import</span> dao.DeptDAO;</span><br><span class="line">  <span class="keyword">import</span> dao.EmpDAO;</span><br><span class="line">  <span class="keyword">import</span> dao.UserDAO;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line">  <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">  <span class="keyword">import</span> util.MybatisUtil;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> TestDAO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/16 16:37</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDAO</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> testDeptDAO</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试DeptDAO组件连接查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 20:50</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeptDAO</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">DeptDAO</span> <span class="variable">deptDAO</span> <span class="operator">=</span> sqlSession.getMapper(DeptDAO.class);</span><br><span class="line">          deptDAO.selectAll().forEach(dept -&gt; System.out.println(<span class="string">&quot;dept = &quot;</span> + dept + <span class="string">&quot; &quot;</span> + dept.getEmps()));</span><br><span class="line">          MybatisUtil.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> testEmpDAO</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试EmpDAO组件连接查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 20:50</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testEmpDAO</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">EmpDAO</span> <span class="variable">empDAO</span> <span class="operator">=</span> sqlSession.getMapper(EmpDAO.class);</span><br><span class="line">          empDAO.selectAll().forEach(emp -&gt; System.out.println(<span class="string">&quot;emp = &quot;</span> + emp + <span class="string">&quot; &quot;</span> + emp.getDept()));</span><br><span class="line">          MybatisUtil.close();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果：</strong></p>
<p><strong>（1）DeptDAO</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] <span class="number">2022</span>-<span class="number">04</span>-<span class="number">16</span> main dao.DeptDAO.selectAll ==&gt;  Preparing: select d.id,d.name, e.id eid,e.name ename,e.age,e.salary,e.bir from t_dept d left join t_emps e on d.id=e.deptId </span><br><span class="line"> [DEBUG] <span class="number">2022</span>-<span class="number">04</span>-<span class="number">16</span> main dao.DeptDAO.selectAll ==&gt; Parameters: </span><br><span class="line"> [DEBUG] <span class="number">2022</span>-<span class="number">04</span>-<span class="number">16</span> main dao.DeptDAO.selectAll &lt;==      Total: <span class="number">6</span></span><br><span class="line"> dept = Dept&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;教学部&#x27;</span>&#125; [Emp&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;小黑&#x27;</span>, age=<span class="number">12</span>, salary=<span class="number">23000.13</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125;, Emp&#123;id=<span class="string">&#x27;3&#x27;</span>, name=<span class="string">&#x27;小黄&#x27;</span>, age=<span class="number">14</span>, salary=<span class="number">25000.15</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125;, Emp&#123;id=<span class="string">&#x27;4&#x27;</span>, name=<span class="string">&#x27;小牛&#x27;</span>, age=<span class="number">15</span>, salary=<span class="number">26000.16</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125;, Emp&#123;id=<span class="string">&#x27;5&#x27;</span>, name=<span class="string">&#x27;小金&#x27;</span>, age=<span class="number">16</span>, salary=<span class="number">27000.17</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125;]</span><br><span class="line"> dept = Dept&#123;id=<span class="string">&#x27;2&#x27;</span>, name=<span class="string">&#x27;研发部&#x27;</span>&#125; [Emp&#123;id=<span class="string">&#x27;2&#x27;</span>, name=<span class="string">&#x27;小三&#x27;</span>, age=<span class="number">13</span>, salary=<span class="number">24000.14</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125;, Emp&#123;id=<span class="string">&#x27;6&#x27;</span>, name=<span class="string">&#x27;小陈&#x27;</span>, age=<span class="number">17</span>, salary=<span class="number">28000.18</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>（2）EmpDAO</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] <span class="number">2022</span>-<span class="number">04</span>-<span class="number">16</span> main dao.EmpDAO.selectAll ==&gt;  Preparing: select e.id,e.name,e.age,e.salary,e.bir, d.id did,d.name dname from t_dept d left join t_emps e on d.id=e.deptId </span><br><span class="line">  [DEBUG] <span class="number">2022</span>-<span class="number">04</span>-<span class="number">16</span> main dao.EmpDAO.selectAll ==&gt; Parameters: </span><br><span class="line">  [DEBUG] <span class="number">2022</span>-<span class="number">04</span>-<span class="number">16</span> main dao.EmpDAO.selectAll &lt;==      Total: <span class="number">6</span></span><br><span class="line">  emp = Emp&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;小黑&#x27;</span>, age=<span class="number">12</span>, salary=<span class="number">23000.13</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125; Dept&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;教学部&#x27;</span>&#125;</span><br><span class="line">  emp = Emp&#123;id=<span class="string">&#x27;2&#x27;</span>, name=<span class="string">&#x27;小三&#x27;</span>, age=<span class="number">13</span>, salary=<span class="number">24000.14</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125; Dept&#123;id=<span class="string">&#x27;2&#x27;</span>, name=<span class="string">&#x27;研发部&#x27;</span>&#125;</span><br><span class="line">  emp = Emp&#123;id=<span class="string">&#x27;3&#x27;</span>, name=<span class="string">&#x27;小黄&#x27;</span>, age=<span class="number">14</span>, salary=<span class="number">25000.15</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125; Dept&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;教学部&#x27;</span>&#125;</span><br><span class="line">  emp = Emp&#123;id=<span class="string">&#x27;4&#x27;</span>, name=<span class="string">&#x27;小牛&#x27;</span>, age=<span class="number">15</span>, salary=<span class="number">26000.16</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125; Dept&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;教学部&#x27;</span>&#125;</span><br><span class="line">  emp = Emp&#123;id=<span class="string">&#x27;5&#x27;</span>, name=<span class="string">&#x27;小金&#x27;</span>, age=<span class="number">16</span>, salary=<span class="number">27000.17</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125; Dept&#123;id=<span class="string">&#x27;1&#x27;</span>, name=<span class="string">&#x27;教学部&#x27;</span>&#125;</span><br><span class="line">  emp = Emp&#123;id=<span class="string">&#x27;6&#x27;</span>, name=<span class="string">&#x27;小陈&#x27;</span>, age=<span class="number">17</span>, salary=<span class="number">28000.18</span>, bir=Sat Apr <span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2022</span>&#125; Dept&#123;id=<span class="string">&#x27;2&#x27;</span>, name=<span class="string">&#x27;研发部&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-多对多关联关系"><a href="#3-多对多关联关系" class="headerlink" title="3 多对多关联关系"></a>3 多对多关联关系</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328144055040.png" alt="image-20240328144055040"></p>
<p><strong>思路：</strong>多对多拆分成一对多，添加关系表</p>
<p><strong>3.1 建表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">-- 学生表</span><br><span class="line"> DROP TABLE IF EXISTS `t_student`;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_student`(</span><br><span class="line">   `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">   `name` VARCHAR(40),</span><br><span class="line">   `age` INTEGER</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 课程表</span><br><span class="line"> DROP TABLE IF EXISTS `t_course`;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_course`(</span><br><span class="line">   `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">   `name` VARCHAR(36)</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 学生选课表（关系表:主键作为字段）</span><br><span class="line"> DROP TABLE IF EXISTS `t_student_course`;</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `t_student_course`(</span><br><span class="line">   `sid` VARCHAR(36) REFERENCES t_student(`id`),</span><br><span class="line">   `cid` VARCHAR(36) REFERENCES t_course(`id`)</span><br><span class="line"> )ENGINE=INNODB CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 插入测试数据</span><br><span class="line"> INSERT INTO t_student VALUES </span><br><span class="line"> (&#x27;11&#x27;,&#x27;小明&#x27;,23),</span><br><span class="line"> (&#x27;22&#x27;,&#x27;小王&#x27;,23);</span><br><span class="line">  </span><br><span class="line"> INSERT INTO t_course VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;语文&#x27;),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;数学&#x27;),</span><br><span class="line"> (&#x27;3&#x27;,&#x27;政治&#x27;);</span><br><span class="line">  </span><br><span class="line"> INSERT INTO t_student_course VALUES</span><br><span class="line"> (&#x27;11&#x27;,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;11&#x27;,&#x27;2&#x27;),</span><br><span class="line"> (&#x27;11&#x27;,&#x27;3&#x27;),</span><br><span class="line"> (&#x27;22&#x27;,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;22&#x27;,&#x27;3&#x27;);</span><br><span class="line">  </span><br><span class="line"> -- 查看表数据</span><br><span class="line"> SELECT * FROM t_student;</span><br><span class="line"> SELECT * FROM t_course;</span><br><span class="line"> SELECT * FROM t_student_course;</span><br><span class="line">  </span><br><span class="line"> -- 关联查询 （t_student+t_student_course）+t_course</span><br><span class="line"> SELECT </span><br><span class="line">   s.id,s.name,s.age,</span><br><span class="line">   c.id cid,c.name cname</span><br><span class="line"> FROM t_student s</span><br><span class="line"> LEFT JOIN t_student_course sc</span><br><span class="line"> ON s.`id`=sc.`sid`</span><br><span class="line"> LEFT JOIN t_course c</span><br><span class="line"> ON sc.`cid`=c.`id`;</span><br></pre></td></tr></table></figure>

<p><strong>3.2 创建实体类</strong></p>
<blockquote>
<p> Student</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> Student</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/7 9:17</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String id;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//关联属性</span></span><br><span class="line">      List&lt;Course&gt; courses;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> List&lt;Course&gt; <span class="title function_">getCourses</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> courses;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCourses</span><span class="params">(List&lt;Course&gt; courses)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.courses = courses;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String id, String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> age;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Course</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> entity;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> Course</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/16 21:53</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Course</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String id;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//关联属性</span></span><br><span class="line">      List&lt;Student&gt; students;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudents</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> students;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStudents</span><span class="params">(List&lt;Student&gt; students)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.students = students;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Course</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Course</span><span class="params">(String id, String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;Course&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.3 创建DAO组件</strong></p>
<blockquote>
<p>StudentDAO</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> entity.Student;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">  <span class="keyword">import</span> java.util.Map;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> StudentDAO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/7 9:18</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentDAO</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 查询学生信息的同时也把课程的信息一并查出来</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.util.List&lt;entity.Student&gt;</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 21:55</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      List&lt;Student&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CourseDAO</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> entity.Course;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> CourseDAO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/16 21:58</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CourseDAO</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 查询课程信息的同时把学生信息也一并查出来</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.util.List&lt;entity.Course&gt;</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 21:58</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      List&lt;Course&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.4 创建mapper配置文件</strong></p>
<blockquote>
<p>StudentDAOMapper</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">          <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">          <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.StudentDAO&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          id = &quot;接口中的方法名&quot;</span></span><br><span class="line"><span class="comment">          parameterType = &quot;接口中传入方法的参数类型&quot; 基本类型和String正常使用，引用类型使用类的全限定名(包名.类名)</span></span><br><span class="line"><span class="comment">          resultType = &quot;返回实体类对象：包.类名&quot;  处理结果集 自动封装</span></span><br><span class="line"><span class="comment">          注意:</span></span><br><span class="line"><span class="comment">              1.sql语句后不要出现&quot;;&quot;号</span></span><br><span class="line"><span class="comment">              2.Mybatis框架在执行插入(insert)、更新(update)操作时，默认不允许插入或修改NULL值到数据库中，</span></span><br><span class="line"><span class="comment">          要在sql语句的取值处设置一个jdbcType类型(类型全部字母大写))，例如：#&#123;age,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 封装课程信息 一对多   collection类型 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;courses&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;entity.Course&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!--selectAll--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentMap&quot;</span>&gt;</span></span><br><span class="line">          SELECT </span><br><span class="line">              s.id,s.name,s.age,</span><br><span class="line">              c.id cid,c.name cname</span><br><span class="line">          FROM t_student s</span><br><span class="line">          LEFT JOIN t_student_course sc</span><br><span class="line">          ON s.`id`=sc.`sid`</span><br><span class="line">          LEFT JOIN t_course c</span><br><span class="line">          ON sc.`cid`=c.`id`</span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>CourseDAOMappe</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">          <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">          <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;dao.CourseDAO&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          id = &quot;接口中的方法名&quot;</span></span><br><span class="line"><span class="comment">          parameterType = &quot;接口中传入方法的参数类型&quot; 基本类型和String正常使用，引用类型使用类的全限定名(包名.类名)</span></span><br><span class="line"><span class="comment">          resultType = &quot;返回实体类对象：包.类名&quot;  处理结果集 自动封装</span></span><br><span class="line"><span class="comment">          注意:</span></span><br><span class="line"><span class="comment">              1.sql语句后不要出现&quot;;&quot;号</span></span><br><span class="line"><span class="comment">              2.Mybatis框架在执行插入(insert)、更新(update)操作时，默认不允许插入或修改NULL值到数据库中，</span></span><br><span class="line"><span class="comment">          要在sql语句的取值处设置一个jdbcType类型(类型全部字母大写))，例如：#&#123;age,jdbcType=INTEGER&#125;</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;courseMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;entity.Course&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 封装学生信息 一对多   collection类型 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;entity.Student&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--selectAll--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;courseMap&quot;</span>&gt;</span></span><br><span class="line">          SELECT</span><br><span class="line">              c.id,c.name,</span><br><span class="line">              s.id sid,s.name sname,s.age</span><br><span class="line">          FROM t_student s</span><br><span class="line">          LEFT JOIN t_student_course sc</span><br><span class="line">          ON s.`id`=sc.`sid`</span><br><span class="line">          LEFT JOIN t_course c</span><br><span class="line">          ON sc.`cid`=c.`id`</span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3.5 mybatis-config.xml配置mapper</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/StudentDAOMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/CourseDAOMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3.6 测试连接查询</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> dao.*;</span><br><span class="line">  <span class="keyword">import</span> entity.Course;</span><br><span class="line">  <span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line">  <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">  <span class="keyword">import</span> util.MybatisUtil;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> TestDAO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/16 16:37</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDAO</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> testStudentDAO</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试StudentDAO组件连接查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 22:05</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testStudentDAO</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">StudentDAO</span> <span class="variable">studentDAO</span> <span class="operator">=</span> sqlSession.getMapper(StudentDAO.class);</span><br><span class="line">          studentDAO.selectAll().forEach(student -&gt; System.out.println(<span class="string">&quot;student = &quot;</span> + student + <span class="string">&quot; &quot;</span> + student.getCourses()));</span><br><span class="line">          MybatisUtil.close();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> testCourseDAO</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 测试CourseDAO组件连接查询</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/16 22:12</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCourseDAO</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtil.getSqlSession();</span><br><span class="line">          <span class="type">CourseDAO</span> <span class="variable">courseDAO</span> <span class="operator">=</span> sqlSession.getMapper(CourseDAO.class);</span><br><span class="line">          courseDAO.selectAll().forEach(course -&gt; System.out.println(<span class="string">&quot;course = &quot;</span> + course + <span class="string">&quot; &quot;</span> + course.getStudents()));</span><br><span class="line">          MybatisUtil.close();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试结果：</strong></p>
<p><strong>（1）StudentDAO</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DEBUG] 2022-04-16 main dao.StudentDAO.selectAll ==&gt;  Preparing: SELECT s.id,s.name,s.age, c.id cid,c.name cname FROM t_student s LEFT JOIN t_student_course sc ON s.`id`=sc.`sid` LEFT JOIN t_course c ON sc.`cid`=c.`id` </span><br><span class="line"> [DEBUG] 2022-04-16 main dao.StudentDAO.selectAll ==&gt; Parameters: </span><br><span class="line"> [DEBUG] 2022-04-16 main dao.StudentDAO.selectAll &lt;==      Total: 5</span><br><span class="line"> student = Student&#123;id=&#x27;11&#x27;, name=&#x27;小明&#x27;, age=23&#125; [Course&#123;id=&#x27;1&#x27;, name=&#x27;语文&#x27;&#125;, Course&#123;id=&#x27;2&#x27;, name=&#x27;数学&#x27;&#125;, Course&#123;id=&#x27;3&#x27;, name=&#x27;政治&#x27;&#125;]</span><br><span class="line"> student = Student&#123;id=&#x27;22&#x27;, name=&#x27;小王&#x27;, age=23&#125; [Course&#123;id=&#x27;1&#x27;, name=&#x27;语文&#x27;&#125;, Course&#123;id=&#x27;3&#x27;, name=&#x27;政治&#x27;&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>（2）CourseDAO</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] 2022-04-16 main dao.CourseDAO.selectAll ==&gt;  Preparing: SELECT c.id,c.name, s.id sid,s.name sname,s.age FROM t_student s LEFT JOIN t_student_course sc ON s.`id`=sc.`sid` LEFT JOIN t_course c ON sc.`cid`=c.`id` </span><br><span class="line">  [DEBUG] 2022-04-16 main dao.CourseDAO.selectAll ==&gt; Parameters: </span><br><span class="line">  [DEBUG] 2022-04-16 main dao.CourseDAO.selectAll &lt;==      Total: 5</span><br><span class="line">  course = Course&#123;id=&#x27;1&#x27;, name=&#x27;语文&#x27;&#125; [Student&#123;id=&#x27;11&#x27;, name=&#x27;小明&#x27;, age=23&#125;, Student&#123;id=&#x27;22&#x27;, name=&#x27;小王&#x27;, age=23&#125;]</span><br><span class="line">  course = Course&#123;id=&#x27;2&#x27;, name=&#x27;数学&#x27;&#125; [Student&#123;id=&#x27;11&#x27;, name=&#x27;小明&#x27;, age=23&#125;]</span><br><span class="line">  course = Course&#123;id=&#x27;3&#x27;, name=&#x27;政治&#x27;&#125; [Student&#123;id=&#x27;11&#x27;, name=&#x27;小明&#x27;, age=23&#125;, Student&#123;id=&#x27;22&#x27;, name=&#x27;小王&#x27;, age=23&#125;]</span><br></pre></td></tr></table></figure>

<h3 id="Spring-Mybatis-Struts2练习项目"><a href="#Spring-Mybatis-Struts2练习项目" class="headerlink" title="Spring+Mybatis+Struts2练习项目"></a>Spring+Mybatis+Struts2练习项目</h3><p><strong>作业：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328144709860.png" alt="image-20240328144709860"></p>
<p><strong>用户与身份信息展示分析：</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328144838692.png" alt="image-20240328144838692"></p>
<p> <strong>用户和身份信息添加分析：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328144853269.png" alt="image-20240328144853269"></p>
<p> <strong>1. 创建Maven-webapp项目，新建java、resources目录以及test目录下的java、resources</strong></p>
<p><strong>2. 在pom.xml中引入依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--spring相关--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--mybatis-spring--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--druid--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.19<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--struts相关 2.3.16版本一致--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--struts2-spring-plugin 2.3.16版本一致--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.struts<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>struts2-spring-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--servlet-api--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--jstl--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--fastjson--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.62<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">&lt;!--log4j--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3. 建表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">-- 一对一</span><br><span class="line"> -- 用户表</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `table_user`(</span><br><span class="line">     `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">     `name` VARCHAR(40),</span><br><span class="line">     `age` INTEGER,</span><br><span class="line">     `bir` DATE</span><br><span class="line"> )ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 身份信息表</span><br><span class="line"> CREATE TABLE IF NOT EXISTS `table_card`(</span><br><span class="line">     `id` VARCHAR(36) PRIMARY KEY,</span><br><span class="line">     `code` VARCHAR(18),</span><br><span class="line">     `address` VARCHAR(100),</span><br><span class="line">     `fork` VARCHAR(30),</span><br><span class="line">     `userId` VARCHAR(36) REFERENCES `table_user`(`id`)  -- 关系属性</span><br><span class="line"> )ENGINE=INNODB DEFAULT CHARSET=utf8;</span><br><span class="line">  </span><br><span class="line"> -- 插入数据</span><br><span class="line"> INSERT INTO table_user VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;张三&#x27;,20,CURDATE()),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;李四&#x27;,30,CURDATE());</span><br><span class="line"> INSERT INTO table_card VALUES</span><br><span class="line"> (&#x27;1&#x27;,&#x27;111111111111111111&#x27;,&#x27;北京市&#x27;,&#x27;汉族&#x27;,&#x27;1&#x27;),</span><br><span class="line"> (&#x27;2&#x27;,&#x27;222222222222222222&#x27;,&#x27;上海市&#x27;,&#x27;满族&#x27;,&#x27;2&#x27;);</span><br><span class="line">  </span><br><span class="line"> -- 查询数据</span><br><span class="line"> SELECT * FROM table_user;</span><br><span class="line"> SELECT * FROM table_card;</span><br><span class="line">  </span><br><span class="line"> -- 连接查询用户信息+身份信息SQL语句</span><br><span class="line"> select</span><br><span class="line">     u.id,u.name,u.age,u.bir,</span><br><span class="line">     c.id cid,c.code,c.address,c.fork</span><br><span class="line"> from table_user u</span><br><span class="line"> left join table_card c</span><br><span class="line"> on u.id=c.userId;</span><br></pre></td></tr></table></figure>

<p><strong>4.创建实体类</strong></p>
<blockquote>
<p>User</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.entity;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.Date;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> User</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/17 20:32</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String id;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> Integer age;</span><br><span class="line">      <span class="keyword">private</span> Date bir;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//关系属性</span></span><br><span class="line">      <span class="keyword">private</span> <span class="type">Card</span> <span class="variable">card</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Card</span>();<span class="comment">//实例化</span></span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> Card <span class="title function_">getCard</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> card;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCard</span><span class="params">(Card card)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.card = card;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String id, String name, Integer age, Date bir)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">          <span class="built_in">this</span>.bir = bir;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> age;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> Date <span class="title function_">getBir</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> bir;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBir</span><span class="params">(Date bir)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.bir = bir;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                  <span class="string">&quot;, bir=&quot;</span> + bir +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<blockquote>
<p>Card</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.entity;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> Card</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/17 20:32</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Card</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String id;</span><br><span class="line">      <span class="keyword">private</span> String code;</span><br><span class="line">      <span class="keyword">private</span> String address;</span><br><span class="line">      <span class="keyword">private</span> String fork;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//关系属性</span></span><br><span class="line">      <span class="keyword">private</span> User user;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> user;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.user = user;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">(String id, String code, String address, String fork)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">          <span class="built_in">this</span>.code = code;</span><br><span class="line">          <span class="built_in">this</span>.address = address;</span><br><span class="line">          <span class="built_in">this</span>.fork = fork;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.id = id;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> code;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.code = code;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> address;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.address = address;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getFork</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> fork;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFork</span><span class="params">(String fork)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.fork = fork;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;Card&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;id=&#x27;&quot;</span> + id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, code=&#x27;&quot;</span> + code + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, fork=&#x27;&quot;</span> + fork + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p><strong>5.创建DAO接口</strong></p>
<blockquote>
<p>UserDAO</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.dao;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.study.entity.User;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> UserDAO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/17 22:01</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDAO</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 查询所有用户的同时一并查出用户的身份信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 2022/4/18 8:27</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> insertUser</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 添加用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 2022/4/18 10:01</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> selectUserNoCard</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 查询没有身份信息的用户，通过用户获得用户id用于添加身份信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 2022/4/18 15:35</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectUserByNoCard</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MethodName</span> selectUserByKeywords</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 根据关键字查询用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: user 用作与关键字进行匹配</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 2022/4/19 16:05</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectUserByKeywords</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CardDAO</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.dao;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> com.study.entity.Card;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> CardDAO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/18 15:16</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CardDAO</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> insertCard</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 添加身份信息</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/18 15:16</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">void</span> <span class="title function_">insertCard</span><span class="params">(Card card)</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>6.创建Mapper配置文件</strong></p>
<blockquote>
<p>UserDAOMapper</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">  &lt;!DOCTYPE mapper</span><br><span class="line">          PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">          <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="line">   </span><br><span class="line">  &lt;mapper namespace=<span class="string">&quot;com.study.dao.UserDAO&quot;</span>&gt;</span><br><span class="line">      &lt;!--userMap--&gt;</span><br><span class="line">      &lt;resultMap id=<span class="string">&quot;userMap&quot;</span> type=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">          &lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">          &lt;result column=<span class="string">&quot;name&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">          &lt;result column=<span class="string">&quot;age&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line">          &lt;result column=<span class="string">&quot;bir&quot;</span> property=<span class="string">&quot;bir&quot;</span>/&gt;</span><br><span class="line">          &lt;!--一对一--&gt;</span><br><span class="line">          &lt;association property=<span class="string">&quot;card&quot;</span> javaType=<span class="string">&quot;Card&quot;</span>&gt;</span><br><span class="line">              &lt;id column=<span class="string">&quot;cid&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">              &lt;result column=<span class="string">&quot;code&quot;</span> property=<span class="string">&quot;code&quot;</span>/&gt;</span><br><span class="line">              &lt;result column=<span class="string">&quot;address&quot;</span> property=<span class="string">&quot;address&quot;</span>/&gt;</span><br><span class="line">              &lt;result column=<span class="string">&quot;fork&quot;</span> property=<span class="string">&quot;fork&quot;</span>/&gt;</span><br><span class="line">          &lt;/association&gt;</span><br><span class="line">      &lt;/resultMap&gt;</span><br><span class="line">   </span><br><span class="line">      &lt;!--selectAll--&gt;</span><br><span class="line">      &lt;select id=<span class="string">&quot;selectAll&quot;</span> resultMap=<span class="string">&quot;userMap&quot;</span>&gt;</span><br><span class="line">          select</span><br><span class="line">              u.id,u.name,u.age,u.bir,</span><br><span class="line">              c.id cid,c.code,c.address,c.fork</span><br><span class="line">          from table_user u</span><br><span class="line">          left join table_card c</span><br><span class="line">          on u.id=c.userId;</span><br><span class="line">      &lt;/select&gt;</span><br><span class="line">   </span><br><span class="line">      &lt;!--insertUser--&gt;</span><br><span class="line">      &lt;insert id=<span class="string">&quot;insertUser&quot;</span> parameterType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">          insert into table_user <span class="title function_">values</span> <span class="params">(#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;bir&#125;)</span></span><br><span class="line">      &lt;/insert&gt;</span><br><span class="line">   </span><br><span class="line">      &lt;!--selectUserByNoCard--&gt;</span><br><span class="line">      &lt;select id=<span class="string">&quot;selectUserByNoCard&quot;</span> resultMap=<span class="string">&quot;userMap&quot;</span>&gt;</span><br><span class="line">          select u.id,u.name,u.age,u.bir</span><br><span class="line">          from table_user u</span><br><span class="line">          left join table_card c</span><br><span class="line">          on u.id=c.userId</span><br><span class="line">          where c.userId is <span class="literal">null</span>;</span><br><span class="line">      &lt;/select&gt;</span><br><span class="line">   </span><br><span class="line">      &lt;!--selectUserByKeywords--&gt;</span><br><span class="line">      &lt;select id=<span class="string">&quot;selectUserByKeywords&quot;</span> parameterType=<span class="string">&quot;User&quot;</span> resultMap=<span class="string">&quot;userMap&quot;</span>&gt;</span><br><span class="line">          select u.id,u.name,u.age,u.bir,</span><br><span class="line">          c.id cid,c.address,c.code,c.fork</span><br><span class="line">          from table_user u</span><br><span class="line">          left join table_card c</span><br><span class="line">          on u.id = c.userId</span><br><span class="line">          &lt;where&gt;</span><br><span class="line">              &lt;<span class="keyword">if</span> test=<span class="string">&quot;name!=null and name!=&#x27;&#x27;&quot;</span>&gt;</span><br><span class="line">                  u.name like <span class="string">&quot;%&quot;</span>#&#123;name&#125;<span class="string">&quot;%&quot;</span></span><br><span class="line">              &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">              &lt;<span class="keyword">if</span> test=<span class="string">&quot;age!=null&quot;</span>&gt;</span><br><span class="line">                  or u.age = #&#123;age&#125;</span><br><span class="line">              &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">              &lt;<span class="keyword">if</span> test=<span class="string">&quot;bir!=null&quot;</span>&gt;</span><br><span class="line">                  or u.bir = #&#123;bir&#125;</span><br><span class="line">              &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">              &lt;<span class="keyword">if</span> test=<span class="string">&quot;card.address!=null and card.address!=&#x27;&#x27;&quot;</span>&gt;</span><br><span class="line">                  or c.address like <span class="string">&quot;%&quot;</span>#&#123;card.address&#125;<span class="string">&quot;%&quot;</span></span><br><span class="line">              &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">              &lt;<span class="keyword">if</span> test=<span class="string">&quot;card.fork!=null and card.fork!=&#x27;&#x27;&quot;</span>&gt;</span><br><span class="line">                  or c.fork = #&#123;card.fork&#125;</span><br><span class="line">              &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">              &lt;<span class="keyword">if</span> test=<span class="string">&quot;card.code!=null and card.code!=&#x27;&#x27;&quot;</span>&gt;</span><br><span class="line">                  or c.code = #&#123;card.code&#125;</span><br><span class="line">              &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">          &lt;/where&gt;</span><br><span class="line">      &lt;/select&gt;</span><br><span class="line">  &lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CardDAOMapper</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line"> &lt;!DOCTYPE mapper</span><br><span class="line">         PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">         <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span><br><span class="line">  </span><br><span class="line"> &lt;mapper namespace=<span class="string">&quot;com.study.dao.CardDAO&quot;</span>&gt;</span><br><span class="line">     &lt;!--insertCard--&gt;</span><br><span class="line">     &lt;insert id=<span class="string">&quot;insertCard&quot;</span> parameterType=<span class="string">&quot;Card&quot;</span>&gt;</span><br><span class="line">         insert into table_card <span class="title function_">values</span><span class="params">(#&#123;id&#125;,#&#123;code&#125;,#&#123;address&#125;,#&#123;fork&#125;,#&#123;user.id,jdbcType=VARCHAR&#125;)</span></span><br><span class="line">     &lt;/insert&gt;</span><br><span class="line">  </span><br><span class="line"> &lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>7.创建Service接口及其实现类</p>
<blockquote>
<p>UserService</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.service;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> com.study.entity.User;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.List;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> UserService</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/17 22:11</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询用户信息的同时一并查出身份信息</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/18 8:28</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> insertUser</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 插入用户</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: user</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/18 10:05</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">void</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br><span class="line">  </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> selectUserByNoCard</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 查询没有身份信息的用户</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@return</span>: java.util.List&lt;com.study.entity.User&gt;</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/18 16:21</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     List&lt;User&gt; <span class="title function_">selectUserByNoCard</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>UserServiceImpl</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.service;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> com.study.dao.UserDAO;</span><br><span class="line">  <span class="keyword">import</span> com.study.entity.User;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.transaction.annotation.Propagation;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> UserServiceImpl</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/17 22:13</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line">  <span class="meta">@Transactional</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span>  <span class="title class_">UserService</span>&#123;</span><br><span class="line">      <span class="comment">//UserService依赖UserDAO组件</span></span><br><span class="line">      <span class="meta">@Autowired</span></span><br><span class="line">      <span class="keyword">private</span> UserDAO userDAO;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="meta">@Transactional(propagation = Propagation.SUPPORTS)</span></span><br><span class="line">      <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="comment">//处理业务</span></span><br><span class="line">          <span class="keyword">return</span> userDAO.selectAll();</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">          <span class="comment">//处理插入用户业务</span></span><br><span class="line">          user.setId(UUID.randomUUID().toString());</span><br><span class="line">          userDAO.insertUser(user);</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="meta">@Transactional(propagation = Propagation.SUPPORTS)</span></span><br><span class="line">      <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUserByNoCard</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="comment">//处理查询没有身份信息的用户</span></span><br><span class="line">          <span class="keyword">return</span> userDAO.selectUserByNoCard();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CardService</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.service;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> com.study.entity.Card;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> CardService</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/18 15:20</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CardService</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@MethodName</span> insertCard</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Description</span> 插入身份信息</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span>: card</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@Date</span> 2022/4/18 15:21</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">     <span class="keyword">void</span> <span class="title function_">insertCard</span><span class="params">(Card card)</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<blockquote>
<p>CardServiceImpl</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.service;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> com.study.dao.CardDAO;</span><br><span class="line"> <span class="keyword">import</span> com.study.entity.Card;</span><br><span class="line"> <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"> <span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"> <span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> java.util.UUID;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> CardServiceImpl</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/18 15:21</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@Service(&quot;cardService&quot;)</span></span><br><span class="line"> <span class="meta">@Transactional</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CardServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CardService</span>&#123;</span><br><span class="line">     <span class="meta">@Autowired</span></span><br><span class="line">     <span class="keyword">private</span> CardDAO cardDAO;</span><br><span class="line">  </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertCard</span><span class="params">(Card card)</span> &#123;</span><br><span class="line">         card.setId(UUID.randomUUID().toString());</span><br><span class="line">         cardDAO.insertCard(card);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>8.编写spring.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--开启注解扫描--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.study&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--创建数据源--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?</span></span></span><br><span class="line"><span class="string"><span class="tag">         useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC<span class="symbol">&amp;amp;</span>useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--创建SqlSessionFactory--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/study/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.study.entity&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--创建DAO组件--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.study.dao&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--创建事务管理器--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--开启注解式事务生效--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>9.测试Spring与Mybatis是否整合成功</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.test;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">import</span> com.study.service.UserService;</span><br><span class="line"> <span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"> <span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@ClassName</span> TestSpringMybatis</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Date</span> 2022/4/18 8:36</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSpringMybatis</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring.xml&quot;</span>);</span><br><span class="line">         <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">         userService.selectAll().forEach(user-&gt; System.out.println(<span class="string">&quot;user = &quot;</span> + user + <span class="string">&quot; &quot;</span> + user.getCard()));</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>10. 配置web.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">   <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">   <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">&lt;!--配置工厂配置文件的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">&lt;!--配置struts2中核心filter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment">&lt;!--配置spring监听器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>11.创建Action组件</strong></p>
<blockquote>
<p>UserAction</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.action;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> com.opensymphony.xwork2.Action;</span><br><span class="line">  <span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line">  <span class="keyword">import</span> com.study.entity.User;</span><br><span class="line">  <span class="keyword">import</span> com.study.service.UserService;</span><br><span class="line">  <span class="keyword">import</span> com.study.service.UserServiceImpl;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> java.beans.ConstructorProperties;</span><br><span class="line">  <span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line">  <span class="keyword">import</span> java.text.ParseException;</span><br><span class="line">  <span class="keyword">import</span> java.util.List;</span><br><span class="line">  <span class="keyword">import</span> java.util.UUID;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> UserAction</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/17 22:16</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Controller(&quot;userAction&quot;)</span></span><br><span class="line">  <span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAction</span> <span class="keyword">extends</span> <span class="title class_">ActionSupport</span> &#123;</span><br><span class="line">      <span class="meta">@Autowired</span></span><br><span class="line">      <span class="keyword">private</span> UserService userService;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//接收参数</span></span><br><span class="line">      <span class="keyword">private</span> List&lt;User&gt; users;</span><br><span class="line">      <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> users;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsers</span><span class="params">(List&lt;User&gt; users)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.users = users;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">private</span> User user;</span><br><span class="line">      <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> user;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.user = user;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//接收搜索的选中列</span></span><br><span class="line">      <span class="keyword">private</span> List&lt;String&gt; cols;</span><br><span class="line">      <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getCols</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> cols;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCols</span><span class="params">(List&lt;String&gt; cols)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.cols = cols;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">//搜索条件，多个条件之间使用“,”分隔</span></span><br><span class="line">      <span class="keyword">private</span> String keywords;</span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getKeywords</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> keywords;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setKeywords</span><span class="params">(String keywords)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.keywords = keywords;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> selectAll</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 处理查询用户所有信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/18 10:47</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.users = userService.selectAll();</span><br><span class="line">          <span class="keyword">return</span> Action.SUCCESS;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> insertUser</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 插入用户信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/18 10:47</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">insertUser</span><span class="params">()</span>&#123;</span><br><span class="line">          userService.insertUser(user);</span><br><span class="line">          <span class="keyword">return</span> Action.SUCCESS;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> selectUserByNoCard</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 查询没有身份信息的用户</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/18 16:23</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">selectUserByNoCard</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="built_in">this</span>.users = userService.selectUserByNoCard();</span><br><span class="line">          <span class="keyword">return</span> Action.SUCCESS;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">/**     </span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> selectUserByKeywords    </span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 根据关键字查找用户信息     </span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.lang.String     </span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai     </span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/18 16:23     </span></span><br><span class="line"><span class="comment">       */</span> </span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">selectUserByKeywords</span><span class="params">()</span> <span class="keyword">throws</span> InvocationTargetException, NoSuchMethodException, IllegalAccessException, ParseException, NoSuchFieldException &#123;</span><br><span class="line">          <span class="built_in">this</span>.users = userService.selectUserByKeywords(cols,keywords);</span><br><span class="line">          <span class="keyword">return</span> Action.SUCCESS;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CardAction</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.action;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">import</span> com.opensymphony.xwork2.Action;</span><br><span class="line">  <span class="keyword">import</span> com.opensymphony.xwork2.ActionSupport;</span><br><span class="line">  <span class="keyword">import</span> com.study.entity.Card;</span><br><span class="line">  <span class="keyword">import</span> com.study.service.CardService;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">  <span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ClassName</span> CardAction</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/18 15:26</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Controller(&quot;cardAction&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CardAction</span> <span class="keyword">extends</span> <span class="title class_">ActionSupport</span> &#123;</span><br><span class="line">      <span class="meta">@Autowired</span></span><br><span class="line">      <span class="keyword">private</span> CardService cardService;</span><br><span class="line">      <span class="keyword">private</span> Card card;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> Card <span class="title function_">getCard</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> card;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCard</span><span class="params">(Card card)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.card = card;</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@MethodName</span> insertCard</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Description</span> 插入身份信息</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Author</span> chabai</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@Date</span> 2022/4/18 15:28</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">insertCard</span><span class="params">()</span>&#123;</span><br><span class="line">          cardService.insertCard(card);</span><br><span class="line">          <span class="keyword">return</span> Action.SUCCESS;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ol start="12">
<li><strong>引入struts.xml</strong></li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">struts</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">         <span class="string">&quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"> <span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--处理用户信息模块--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/user&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--selectAll：http://localhost:8888/mybatis2/user/selectAll--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">class</span>=<span class="string">&quot;userAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;selectAll&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/user/showAllUsers.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">         <span class="comment">&lt;!--insertUser：http://localhost:8888/mybatis2/user/insertUser--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">class</span>=<span class="string">&quot;userAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;redirectAction&quot;</span>&gt;</span>/user/selectAll<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">         <span class="comment">&lt;!--selectUserByNoCard：http://localhost:8888/mybatis2/user/selectUserByNoCard--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;selectUserByNoCard&quot;</span> <span class="attr">class</span>=<span class="string">&quot;userAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;selectUserByNoCard&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/card/addUserCard.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">         <span class="comment">&lt;!--selectUserByKeywords：http://localhost:8888/mybatis2/user/selectUserByKeywords--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;selectUserByKeywords&quot;</span> <span class="attr">class</span>=<span class="string">&quot;userAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;selectUserByKeywords&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span>&gt;</span>/user/showAllUsers.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">     <span class="comment">&lt;!--处理身份信息模块--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;struts-default&quot;</span> <span class="attr">namespace</span>=<span class="string">&quot;/card&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--insertCard：http://localhost:8888/mybatis2/card/insertCard--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">&quot;insertCard&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cardAction&quot;</span> <span class="attr">method</span>=<span class="string">&quot;insertCard&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">&quot;success&quot;</span> <span class="attr">type</span>=<span class="string">&quot;redirectAction&quot;</span>&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!--跨包跳转，注意上面是redirectAction而不是redirect--&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;namespace&quot;</span>&gt;</span>/user<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;actionName&quot;</span>&gt;</span>selectAll<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>13.jsp文件</strong></p>
<blockquote>
<p>addUser.jsp</p>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;s&quot;</span> uri=<span class="string">&quot;/struts-tags&quot;</span> %&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">  <span class="type">String</span> <span class="variable">basePath</span> <span class="operator">=</span> request.getScheme()+<span class="string">&quot;://&quot;</span>+request.getServerName()+<span class="string">&quot;:&quot;</span>+request.getServerPort()+path+<span class="string">&quot;/&quot;</span>;</span><br><span class="line">  %&gt;</span><br><span class="line">   </span><br><span class="line">  &lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">      &lt;base href=<span class="string">&quot;&lt;%=basePath%&gt;&quot;</span>&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;title&gt;My JSP <span class="string">&#x27;index.jsp&#x27;</span> starting page&lt;/title&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;pragma&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;cache-control&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;expires&quot;</span> content=<span class="string">&quot;0&quot;</span>&gt;    </span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;keywords&quot;</span> content=<span class="string">&quot;keyword1,keyword2,keyword3&quot;</span>&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;This is my page&quot;</span>&gt;</span><br><span class="line">      &lt;!--</span><br><span class="line">      &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;styles.css&quot;</span>&gt;</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">      &lt;form action=<span class="string">&quot;&lt;s:url value=&quot;</span>/user/insertUser<span class="string">&quot;/&gt;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">          用户名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.name&quot;</span>/&gt;</span><br><span class="line">          年龄:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.age&quot;</span>/&gt;</span><br><span class="line">          生日:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.bir&quot;</span>/&gt;&lt;!-- struts2 默认接收日期格式   yyyy-MM-dd --&gt;</span><br><span class="line">          性别:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user.sex&quot;</span>/&gt;</span><br><span class="line">          &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">  &lt;/html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>showAllUsersCard.jsp</p>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;s&quot;</span> uri=<span class="string">&quot;/struts-tags&quot;</span> %&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">  <span class="type">String</span> <span class="variable">basePath</span> <span class="operator">=</span> request.getScheme()+<span class="string">&quot;://&quot;</span>+request.getServerName()+<span class="string">&quot;:&quot;</span>+request.getServerPort()+path+<span class="string">&quot;/&quot;</span>;</span><br><span class="line">  %&gt;</span><br><span class="line">   </span><br><span class="line">  &lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">      &lt;base href=<span class="string">&quot;&lt;%=basePath%&gt;&quot;</span>&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;title&gt;My JSP <span class="string">&#x27;index.jsp&#x27;</span> starting page&lt;/title&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;pragma&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;cache-control&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;expires&quot;</span> content=<span class="string">&quot;0&quot;</span>&gt;    </span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;keywords&quot;</span> content=<span class="string">&quot;keyword1,keyword2,keyword3&quot;</span>&gt;</span><br><span class="line">      &lt;meta http-equiv=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;This is my page&quot;</span>&gt;</span><br><span class="line">      &lt;!--</span><br><span class="line">      &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;styles.css&quot;</span>&gt;</span><br><span class="line">      --&gt;</span><br><span class="line">      &lt;style&gt;</span><br><span class="line">          select&#123;</span><br><span class="line">              width:120px;</span><br><span class="line">          &#125;</span><br><span class="line">          input[type=<span class="string">&quot;text&quot;</span>]&#123;</span><br><span class="line">              width:400px;</span><br><span class="line">          &#125;</span><br><span class="line">      &lt;/style&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;搜索:&lt;/h1&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;&lt;s:url value=&quot;</span>/user/selectUserByKeywords<span class="string">&quot;/&gt;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        选择搜索的列:</span><br><span class="line">        &lt;select name=<span class="string">&quot;cols&quot;</span> multiple=<span class="string">&quot;multiple&quot;</span>&gt;</span><br><span class="line">            &lt;option value=<span class="string">&quot;name&quot;</span>&gt;用户名&lt;/option&gt;</span><br><span class="line">            &lt;option value=<span class="string">&quot;age&quot;</span>&gt;年龄&lt;/option&gt;</span><br><span class="line">            &lt;option value=<span class="string">&quot;bir&quot;</span>&gt;生日&lt;/option&gt;</span><br><span class="line">            &lt;option value=<span class="string">&quot;fork&quot;</span>&gt;民族&lt;/option&gt;</span><br><span class="line">            &lt;option value=<span class="string">&quot;code&quot;</span>&gt;身份证号&lt;/option&gt;</span><br><span class="line">            &lt;option value=<span class="string">&quot;address&quot;</span>&gt;住址&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;keywords&quot;</span> /&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;搜索&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1&gt;所有用户信息如下:&lt;/h1&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;用户id&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;用户名&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;年龄&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;生日&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;身份证号&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;民族&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;住址&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;s:iterator value=<span class="string">&quot;users&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:property value=<span class="string">&quot;id&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:property value=<span class="string">&quot;name&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:property value=<span class="string">&quot;age&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:date name=<span class="string">&quot;bir&quot;</span> format=<span class="string">&quot;yyyy-MM-dd&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:property value=<span class="string">&quot;card.code&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:property value=<span class="string">&quot;card.fork&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;s:property value=<span class="string">&quot;card.address&quot;</span>/&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/s:iterator&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;&lt;s:url value=&quot;</span>/user/addUser.jsp<span class="string">&quot;/&gt;&quot;</span>&gt;添加用户信息&lt;/a&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;&lt;s:url value=&quot;</span>/user/selectUserByNoCard<span class="string">&quot;/&gt;&quot;</span>&gt;添加身份信息&lt;/a&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">  &lt;/html&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<blockquote>
<p>addUserCard.jsp</p>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;s&quot;</span> uri=<span class="string">&quot;/struts-tags&quot;</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line"><span class="type">String</span> <span class="variable">basePath</span> <span class="operator">=</span> request.getScheme()+<span class="string">&quot;://&quot;</span>+request.getServerName()+<span class="string">&quot;:&quot;</span>+request.getServerPort()+path+<span class="string">&quot;/&quot;</span>;</span><br><span class="line">%&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;&lt;%=basePath%&gt;&quot;</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;title&gt;My JSP <span class="string">&#x27;index.jsp&#x27;</span> starting page&lt;/title&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;pragma&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;cache-control&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;expires&quot;</span> content=<span class="string">&quot;0&quot;</span>&gt;    </span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;keywords&quot;</span> content=<span class="string">&quot;keyword1,keyword2,keyword3&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;This is my page&quot;</span>&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;styles.css&quot;</span>&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;&lt;s:url value=&quot;</span>/card/insertCard<span class="string">&quot;/&gt;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        请选择用户信息:</span><br><span class="line">        &lt;select name=<span class="string">&quot;card.user.id&quot;</span>&gt;</span><br><span class="line">            &lt;s:iterator value=<span class="string">&quot;users&quot;</span>&gt;</span><br><span class="line">                &lt;option value=<span class="string">&quot;&lt;s:property value=&quot;</span>id<span class="string">&quot;/&gt;&quot;</span>&gt;&lt;s:property value=<span class="string">&quot;name&quot;</span>/&gt;&lt;/option&gt;</span><br><span class="line">            &lt;/s:iterator&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        身份编号:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;card.code&quot;</span>/&gt;</span><br><span class="line">        地址:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;card.address&quot;</span>/&gt;</span><br><span class="line">        民族:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;card.fork&quot;</span>/&gt;&lt;!-- struts2 默认接收日期格式   yyyy-MM-dd --&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;       </span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>14.引入log4j.properties</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">## 根日志</span><br><span class="line"> ## 日志级别</span><br><span class="line"> log4j.rootLogger=ERROR,stdout</span><br><span class="line"> ## 输出位置</span><br><span class="line"> log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line"> ## 布局</span><br><span class="line"> log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line"> ## 格式</span><br><span class="line"> log4j.appender.stdout.layout.conversionPattern=[%p] %d&#123;yyyy-MM-dd&#125; %m%n</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"> ## 子日志</span><br><span class="line"> ## 日志级别</span><br><span class="line"> log4j.logger.com.study.dao=DEBUG</span><br><span class="line"> ## 监听spring框架的日志级别</span><br><span class="line"> ## log4j.logger.org.springframework=ERROR</span><br></pre></td></tr></table></figure>

<p><strong>15.部署项目到tomcat服务器进行测试</strong></p>
<p><strong>部署项目：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328145821825.png" alt="image-20240328145821825"></p>
<p><strong>测试页面：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328145835483.png" alt="image-20240328145835483"></p>
<p> <strong>最终项目结构：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mybatis3-4-1Pictures/image-20240328145849731.png" alt="image-20240328145849731"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/mybatisPictures/image-20240328145901307.png" alt="image-20240328145901307"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://chabai000.github.io">茶白</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://chabai000.github.io/posts/44170/">https://chabai000.github.io/posts/44170/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chabai000.github.io" target="_blank">茶白的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/mybatis/">mybatis</a></div><div class="post_share"><div class="social-share" data-image="/UpPictures/UpCover/MybatisCover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/39655/" title="spring5"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringCover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">spring5</div></div></a></div><div class="next-post pull-right"><a href="/posts/2740/" title="SpringMvc"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringMVCCover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SpringMvc</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/62590/" title="mybatis"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/MybatisCover.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-24</div><div class="title">mybatis</div></div></a></div><div><a href="/posts/30882/" title="mybatis快速入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/MybatisCover.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-28</div><div class="title">mybatis快速入门</div></div></a></div><div><a href="/posts/17883/" title="Java八股文"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/%E5%85%AB%E8%82%A1%E6%96%87%E5%B0%81%E9%9D%A2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-21</div><div class="title">Java八股文</div></div></a></div><div><a href="/posts/28917/" title="SpringBoot3web开发（二）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringBoot.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-23</div><div class="title">SpringBoot3web开发（二）</div></div></a></div><div><a href="/posts/30322/" title="SpringBoot3快速入门"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringBoot.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-22</div><div class="title">SpringBoot3快速入门</div></div></a></div><div><a href="/posts/2740/" title="SpringMvc"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringMVCCover.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-01</div><div class="title">SpringMvc</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">茶白</div><div class="author-info__description">不论你在什么时候开始，重要的是开始之后就不要停止；不论你在什么时候结束，重要的是结束之后就不要悔恨</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/chabai000"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/chabai000" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1693522579@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">1.引言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JDBC%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">2.JDBC存在的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Mybatis%E6%A1%86%E6%9E%B6%E7%9A%84%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF"><span class="toc-number">3.</span> <span class="toc-text">3.Mybatis框架的开发思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8IDEA%E4%B8%AD%E7%9A%84Maven%E8%BF%9B%E8%A1%8CMyBatis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">4.</span> <span class="toc-text">4.使用IDEA中的Maven进行MyBatis环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%E8%B0%83%E6%95%B4"><span class="toc-number">5.</span> <span class="toc-text">5. 代码结构调整</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%BB%BA%E8%A1%A8"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 建表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%96%B0%E5%BB%BAmaven%E9%A1%B9%E7%9B%AE%E5%B9%B6%E5%9C%A8pom-xml%E4%B8%AD%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 新建maven项目并在pom.xml中引入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E5%BC%80%E5%8F%91%E5%AE%9E%E4%BD%93%E7%B1%BB-entity"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 开发实体类(entity)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E5%BC%80%E5%8F%91%E6%8C%81%E4%B9%85%E5%B1%82-Dao"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 开发持久层(Dao)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E5%BC%80%E5%8F%91mapper%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 开发mapper映射文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-%E5%BC%80%E5%8F%91mybatis%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 开发mybatis主配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-7-%E5%BC%80%E5%8F%91%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">5.7.</span> <span class="toc-text">5.7 开发测试类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-8-%E6%9C%80%E7%BB%88%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">5.8.</span> <span class="toc-text">5.8 最终项目结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9-%E6%B5%8B%E8%AF%95%E5%A2%9E%E5%88%A0%E6%94%B9%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">5.9.</span> <span class="toc-text">5.9 测试增删改基本操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-10-MybatisUtil%E5%B0%81%E8%A3%85"><span class="toc-number">5.10.</span> <span class="toc-text">5.10 MybatisUtil封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-11-%E4%BC%98%E5%8C%96%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">5.11.</span> <span class="toc-text">5.11 优化后项目结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Mybatis%E4%B8%AD%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">6.</span> <span class="toc-text">6.Mybatis中增删改查使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9F%A5-select"><span class="toc-number">6.1.</span> <span class="toc-text">1.查(select)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A2%9E-insert"><span class="toc-number">6.2.</span> <span class="toc-text">2.增(insert)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%A0-delete"><span class="toc-number">6.3.</span> <span class="toc-text">3.删(delete)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%94%B9-update"><span class="toc-number">6.4.</span> <span class="toc-text">4.改(update)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">6.5.</span> <span class="toc-text">小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-MybatisUtil%E5%B0%81%E8%A3%85"><span class="toc-number">6.6.</span> <span class="toc-text">5.MybatisUtil封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-insert%E3%80%81update%E7%BB%86%E8%8A%82"><span class="toc-number">6.7.</span> <span class="toc-text">6.insert、update细节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%80%BB%E7%BB%93"><span class="toc-number">6.8.</span> <span class="toc-text">7. 总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-log4j%E4%BD%BF%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">7.log4j使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%8E%92%E5%BA%8F%EF%BC%88order-by%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">8.排序（order by）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2-limit"><span class="toc-number">9.</span> <span class="toc-text">9.分页查询(limit)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2-like"><span class="toc-number">10.</span> <span class="toc-text">10模糊查询(like)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%88%AB%E5%90%8D%E8%AE%BE%E7%BD%AE"><span class="toc-number">11.</span> <span class="toc-text">11.实体类别名设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%BC%95%E5%85%A5properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">12.</span> <span class="toc-text">12.引入properties配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%8A%A8%E6%80%81sql%EF%BC%88sql%E3%80%81include%E3%80%81if%E3%80%81where%E3%80%81choose%E3%80%81when%E3%80%81otherwise%E3%80%81set%E3%80%81trim%E3%80%81foreach%EF%BC%89"><span class="toc-number">13.</span> <span class="toc-text">13.动态sql（sql、include、if、where、choose、when、otherwise、set、trim、foreach）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2"><span class="toc-number">14.</span> <span class="toc-text">14.关联查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-number">14.1.</span> <span class="toc-text">1 一对一关联关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-number">14.2.</span> <span class="toc-text">2 一对多关联关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-number">14.3.</span> <span class="toc-text">3 多对多关联关系</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-Mybatis-Struts2%E7%BB%83%E4%B9%A0%E9%A1%B9%E7%9B%AE"><span class="toc-number">15.</span> <span class="toc-text">Spring+Mybatis+Struts2练习项目</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/30882/" title="mybatis快速入门"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/MybatisCover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mybatis快速入门"/></a><div class="content"><a class="title" href="/posts/30882/" title="mybatis快速入门">mybatis快速入门</a><time datetime="2024-03-28T08:21:03.000Z" title="发表于 2024-03-28 16:21:03">2024-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/39847/" title="spring6"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringCover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="spring6"/></a><div class="content"><a class="title" href="/posts/39847/" title="spring6">spring6</a><time datetime="2024-03-24T12:05:09.000Z" title="发表于 2024-03-24 20:05:09">2024-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/62590/" title="mybatis"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/MybatisCover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mybatis"/></a><div class="content"><a class="title" href="/posts/62590/" title="mybatis">mybatis</a><time datetime="2024-03-24T10:49:46.000Z" title="发表于 2024-03-24 18:49:46">2024-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/28917/" title="SpringBoot3web开发（二）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringBoot.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot3web开发（二）"/></a><div class="content"><a class="title" href="/posts/28917/" title="SpringBoot3web开发（二）">SpringBoot3web开发（二）</a><time datetime="2024-03-23T10:55:17.000Z" title="发表于 2024-03-23 18:55:17">2024-03-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/30322/" title="SpringBoot3快速入门"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/UpPictures/UpCover/SpringBoot.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot3快速入门"/></a><div class="content"><a class="title" href="/posts/30322/" title="SpringBoot3快速入门">SpringBoot3快速入门</a><time datetime="2024-03-22T14:24:40.000Z" title="发表于 2024-03-22 22:24:40">2024-03-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 茶白</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const disqus_config = function () {
    this.page.url = 'https://chabai000.github.io/posts/44170/'
    this.page.identifier = '/posts/44170/'
    this.page.title = 'mybatis3.4.1'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://lchabai.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=lchabai&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Disqus' === 'Disqus' || !true) {
    if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=lchabai&related=thread&limit=6&api_key=')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="9310458102" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-lrcType="0"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>