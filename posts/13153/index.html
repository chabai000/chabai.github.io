<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mysql | 茶白的博客</title><meta name="author" content="茶白"><meta name="copyright" content="茶白"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="引言123456789# mysql过程1.单机---&gt;单点压力、单点故障 ----&gt;加节点2.数据集群部署    无限节点----&gt;成本问题----&gt;集群优化3.集群下优化    主从复制---&gt;读写分离架构----&gt;-----&gt;水平拆分----&gt;库表散列 均匀# mysql安装  自己安装即- 注：安装不能存在中文目录# 连接可视化软件  基础语">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql">
<meta property="og:url" content="https://chabai000.github.io/posts/13153/index.html">
<meta property="og:site_name" content="茶白的博客">
<meta property="og:description" content="引言123456789# mysql过程1.单机---&gt;单点压力、单点故障 ----&gt;加节点2.数据集群部署    无限节点----&gt;成本问题----&gt;集群优化3.集群下优化    主从复制---&gt;读写分离架构----&gt;-----&gt;水平拆分----&gt;库表散列 均匀# mysql安装  自己安装即- 注：安装不能存在中文目录# 连接可视化软件  基础语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://api.aqcoder.cn/random">
<meta property="article:published_time" content="2024-04-26T07:49:33.000Z">
<meta property="article:modified_time" content="2024-05-04T09:00:58.571Z">
<meta property="article:author" content="茶白">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://api.aqcoder.cn/random"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://chabai000.github.io/posts/13153/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 茶白","link":"链接: ","source":"来源: 茶白的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mysql',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-04 17:00:58'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://api.aqcoder.cn/random')"><nav id="nav"><span id="blog-info"><a href="/" title="茶白的博客"><span class="site-name">茶白的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">mysql</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-26T07:49:33.000Z" title="发表于 2024-04-26 15:49:33">2024-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-04T09:00:58.571Z" title="更新于 2024-05-04 17:00:58">2024-05-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>37分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="mysql"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># mysql过程</span></span><br><span class="line">1.单机---&gt;单点压力、单点故障 ----&gt;加节点</span><br><span class="line">2.数据集群部署</span><br><span class="line"><span class="code">    无限节点----&gt;成本问题----&gt;集群优化</span></span><br><span class="line"><span class="code">3.集群下优化</span></span><br><span class="line"><span class="code">    主从复制---&gt;读写分离架构----&gt;-----&gt;水平拆分----&gt;库表散列 均匀</span></span><br><span class="line"><span class="code"># mysql安装  自己安装即</span></span><br><span class="line"><span class="code">- 注：安装不能存在中文目录</span></span><br><span class="line"><span class="code"># 连接可视化软件</span></span><br></pre></td></tr></table></figure>

<h2 id="基础语法纯手敲"><a href="#基础语法纯手敲" class="headerlink" title="基础语法纯手敲"></a>基础语法纯手敲</h2><h3 id="数据库的基本操作"><a href="#数据库的基本操作" class="headerlink" title="数据库的基本操作"></a>数据库的基本操作</h3><blockquote>
<p>1.数据库的基本操作</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看该机器上的所有数据库</span></span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 新建数据库名为sql 注:引用到与mysql关键字重名的字段时，加上``</span></span><br><span class="line"><span class="keyword">create</span> database `<span class="keyword">sql</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看该数据库创建语句 </span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> database `<span class="keyword">sql</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 切换数据库命令</span></span><br><span class="line">use `<span class="keyword">sql</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看当前使用的数据库</span></span><br><span class="line"><span class="keyword">select</span> database();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改数据库的字符集为gbk </span></span><br><span class="line"><span class="keyword">alter</span> database `<span class="keyword">sql</span>` <span class="type">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据库 </span></span><br><span class="line"><span class="keyword">drop</span> database <span class="keyword">sql</span>;</span><br></pre></td></tr></table></figure>

<h3 id="数据库表的基本操作"><a href="#数据库表的基本操作" class="headerlink" title="数据库表的基本操作"></a>数据库表的基本操作</h3><blockquote>
<p>2.数据库表的基本操作</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 注：在创建表之前一定要指明使用哪个数据库</span></span><br><span class="line">use `<span class="keyword">sql</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看当前数据库所有表</span></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据表 </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">birthday <span class="type">date</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看该表创建语句</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表的字段信息</span></span><br><span class="line"><span class="keyword">desc</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student rename <span class="keyword">to</span> stu;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改类型长度(不改变类型)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu change name name <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改字段名和类型长度(不改变类型)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu change name sname <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改类型长度(不改变类型)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu modify <span class="keyword">column</span> name <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line"><span class="comment">-- 修改字段数据类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu modify sname <span class="type">int</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">add</span> address <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu <span class="keyword">drop</span> address;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据表 </span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> stu;</span><br></pre></td></tr></table></figure>

<h3 id="数据表的约束"><a href="#数据表的约束" class="headerlink" title="数据表的约束"></a>数据表的约束</h3><blockquote>
<p>3.数据表的约束 为了防止错误数据插入到数据表</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 主键约束1 用于唯一标识主键的每一行</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 主键约束2</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student01(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">primary</span> key(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 非空约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student02(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 默认值约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student03(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 唯一性约束 同一表中字段不能重复出现</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student04(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表的约束信息 外键约束看不到</span></span><br><span class="line"><span class="keyword">desc</span> student04;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 外键约束 外键用来让两张表的数据之间 建立连接 ，从而保证数据的 一致性和完整性</span></span><br><span class="line"><span class="comment">-- 外键约束两种方法 即建表时设置外键 建表后设置外键 我们演示一个</span></span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (studentid) <span class="keyword">REFERENCES</span> student05(id)</span><br><span class="line"><span class="comment">-- 某些数据库管理系统允许使用约束定义语法（如 CONSTRAINT 关键字）来添加外键约束。</span></span><br><span class="line"><span class="keyword">constraint</span> 外键名 <span class="keyword">foreign</span> key (从表外键字段) <span class="keyword">references</span> 主表 (主键字段)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> <span class="keyword">FOREIGN</span> KEY (studentid) <span class="keyword">REFERENCES</span> student05(id);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 从表名 <span class="keyword">add</span> <span class="keyword">constraint</span> 外键名 <span class="keyword">foreign</span> key (从表外键字段) <span class="keyword">references</span> 主表(主键字段)</span><br><span class="line"><span class="comment">-- 先建两个表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student05(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class(</span><br><span class="line">classid <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">studentid <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> <span class="keyword">constraint</span> fk_class_studentid <span class="keyword">foreign</span> key(studentid) <span class="keyword">references</span> student05(id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看建表时语句查看外键是否存在</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> class;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">drop</span> <span class="keyword">foreign</span> key fk_class_studentid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查约束 mysql8.x.x后有的</span></span><br><span class="line">xxxx</span><br></pre></td></tr></table></figure>

<h3 id="数据表插入数据"><a href="#数据表插入数据" class="headerlink" title="数据表插入数据"></a>数据表插入数据</h3><blockquote>
<p>4.数据表插入数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 新建学生表用于演示</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student06(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为表中所用字段擦插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student06(id,name,age,gender) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;bbb&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为表中指定字段插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student06(id,name) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 同时插入多条记录</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student06(id,name,age,gender) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;chabai&#x27;</span>,<span class="number">22</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student06;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><blockquote>
<p>5.更新数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 更新部分数据</span></span><br><span class="line"><span class="keyword">update</span> student06 <span class="keyword">set</span> age<span class="operator">=</span><span class="number">20</span>,gender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新全部数据</span></span><br><span class="line"><span class="keyword">update</span> student06 <span class="keyword">set</span> age<span class="operator">=</span><span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student06;</span><br></pre></td></tr></table></figure>

<h3 id="更新数据-1"><a href="#更新数据-1" class="headerlink" title="更新数据"></a>更新数据</h3><blockquote>
<p>6.更新数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除数据演示</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student07(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> student07;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student07(id,name,age,gender) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;chabai&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除部分数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student07 <span class="keyword">where</span> age<span class="operator">=</span><span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除全部数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student07;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TRUNCATE是一种SQL命令，用于删除表中的所有行，但保留表的结构（列定义等）。TRUNCATE比DELETE语句更快，因为它不会逐行删除数据，而是直接删除整个表中的数据。执行此命令后，表中的所有行都将被删除，但表的结构将保持不变。请注意，TRUNCATE命令是不可逆的，一旦执行，表中的数据就无法恢复。因此，请谨慎使用TRUNCATE命令，并确保在执行之前已经做好了备份或确认数据可以被删除。</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> student07;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student07;</span><br></pre></td></tr></table></figure>

<h3 id="数据表简单查询"><a href="#数据表简单查询" class="headerlink" title="数据表简单查询"></a>数据表简单查询</h3><blockquote>
<p> 7.数据表简单查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 简单数据查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student08(</span><br><span class="line">id <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_2&#x27;</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_3&#x27;</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_4&#x27;</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">4</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_5&#x27;</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_6&#x27;</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">6</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_7&#x27;</span>,<span class="string">&#x27;chabai07&#x27;</span>,<span class="number">7</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student08(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_8&#x27;</span>,<span class="string">&#x27;chabai08&#x27;</span>,<span class="number">8</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有字段的所有数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询指定字段的所有数据</span></span><br><span class="line"><span class="keyword">select</span> id,name <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 常用查询举例 </span></span><br><span class="line"><span class="comment">-- 这个 SQL 查询语句会从名为 &quot;student08&quot; 的表中选择 &quot;id&quot; 和 &quot;name&quot; 列，并添加一个固定值为 &#x27;3&#x27; 的列。这个固定值 &#x27;3&#x27; 不是从表中获取的，而是直接写在查询语句中的。这就意味着查询结果中的每一行都会有相同的值 &#x27;3&#x27;。</span></span><br><span class="line"><span class="keyword">select</span> id,name,<span class="string">&#x27;3&#x27;</span> <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询结果中过滤重复数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> gender <span class="keyword">from</span> student08;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 算数运算符</span></span><br><span class="line"><span class="keyword">select</span> name,age<span class="operator">+</span><span class="number">10</span> <span class="keyword">from</span> student08;</span><br></pre></td></tr></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><blockquote>
<p>函数</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 函数</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student09(</span><br><span class="line">id <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">14</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_2&#x27;</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">15</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_3&#x27;</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_4&#x27;</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_5&#x27;</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student09(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_6&#x27;</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student09;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.聚合函数</span></span><br><span class="line"><span class="comment">-- count()</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- max</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- min</span></span><br><span class="line"><span class="keyword">select</span> name,<span class="built_in">min</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- sum</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-- avg</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(age) <span class="keyword">from</span> student09;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 2.时间函数</span></span><br><span class="line"><span class="comment">-- 查询当前日期=年月日+时分秒</span></span><br><span class="line"><span class="keyword">select</span> now();</span><br><span class="line"><span class="comment">-- 查询当前日期并提取年月日</span></span><br><span class="line"><span class="keyword">select</span> <span class="type">date</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="type">time</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取年</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取月</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前日期并提取日数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(now());</span><br><span class="line"><span class="comment">-- 查询当前年月日</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_date</span>();</span><br><span class="line"><span class="comment">-- 查询当前时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_time</span>(); </span><br><span class="line"><span class="comment">-- 查询当前年月日+时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_timestamp</span>(); </span><br><span class="line"><span class="comment">-- 两个时间相加得到的结果</span></span><br><span class="line"><span class="keyword">select</span> addtime(<span class="string">&#x27;14:23:12&#x27;</span>,<span class="string">&#x27;01:02:03&#x27;</span>);</span><br><span class="line"><span class="comment">-- 计算两个日期之间的天数差</span></span><br><span class="line"><span class="keyword">select</span> datediff(<span class="string">&#x27;2024-05-01&#x27;</span>,<span class="string">&#x27;2024-04-30&#x27;</span>);</span><br><span class="line"><span class="comment">-- 将日期加上指定的时间间隔日</span></span><br><span class="line"><span class="keyword">select</span> date_add(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">day</span>);</span><br><span class="line"><span class="comment">-- 将日期加上指定的时间间隔月</span></span><br><span class="line"><span class="keyword">select</span> date_add(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">month</span>);</span><br><span class="line"><span class="comment">-- 将日期减去上指定的时间间隔日</span></span><br><span class="line"><span class="keyword">select</span> date_sub(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">day</span>);</span><br><span class="line"><span class="comment">-- 将日期加减去指定的时间间隔月</span></span><br><span class="line"><span class="keyword">select</span> date_sub(now(),<span class="type">interval</span> <span class="number">1</span> <span class="keyword">month</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.字符串函数</span></span><br><span class="line"><span class="comment">-- 函数用于连接两个或多个字符串</span></span><br><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;chabai&#x27;</span>,<span class="string">&#x27;baicha&#x27;</span>);</span><br><span class="line"><span class="comment">-- 函数用于查找一个字符串在另一个字符串中第一次出现的位置</span></span><br><span class="line"><span class="keyword">select</span> instr(<span class="string">&#x27;chabai&#x27;</span>,<span class="string">&#x27;bai&#x27;</span>);</span><br><span class="line"><span class="comment">-- 函数用于计算字符串的长度，以字符为单位</span></span><br><span class="line"><span class="keyword">select</span> length(<span class="string">&#x27;chabai&#x27;</span>);</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 4.数学函数</span></span><br><span class="line"><span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">abs</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">3.14</span>);</span><br><span class="line"><span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceiling</span>(<span class="number">3.14</span>);</span><br></pre></td></tr></table></figure>

<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><blockquote>
<p>条件查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student10(</span><br><span class="line">id <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line">age <span class="type">int</span>,</span><br><span class="line">gender <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student10 change id id <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student10 change name name <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student10 modify <span class="keyword">column</span> name <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> student10;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">14</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_2&#x27;</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">15</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_3&#x27;</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_4&#x27;</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_5&#x27;</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student10(id,name,age,gender) <span class="keyword">values</span>(<span class="string">&#x27;s_6&#x27;</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.关系运算符</span></span><br><span class="line"><span class="comment">-- 查询年龄大于等于17的所有记录信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age<span class="operator">&gt;=</span><span class="number">16</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 2.关键字in</span></span><br><span class="line"><span class="comment">-- 查询和集合里的值相同的所有记录信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;s_3&#x27;</span>);</span><br><span class="line"><span class="comment">-- 查询和集合里的值不相同的所有记录信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> <span class="keyword">not</span> id <span class="keyword">in</span>(<span class="string">&#x27;s_1&#x27;</span>,<span class="string">&#x27;s_3&#x27;</span>);</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 3.关键字between AND</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">15</span> <span class="keyword">and</span> <span class="number">18</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age  <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">15</span> <span class="keyword">and</span> <span class="number">18</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 4.空值查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 5.关键字and</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">and</span> gender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 6.关键字or</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> age<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">or</span> gender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 7.关键字like 模糊查询</span></span><br><span class="line"><span class="comment">-- 普通字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;chabai02&#x27;</span>;</span><br><span class="line"><span class="comment">-- 含有%通配的字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;cha%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%cha%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%2&#x27;</span>;</span><br><span class="line"><span class="comment">-- 含有_通配的字符串 一个_匹配一个字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;chabai__&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;______06&#x27;</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 8.关键字limit</span></span><br><span class="line"><span class="comment">-- 按照年龄字段升序排序 即 1 2 3 用 LIMIT 关键字限制只返回前3行数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student10 <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span> limit <span class="number">15</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 9.关键字group by 分组查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student11(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">salary <span class="type">int</span>,</span><br><span class="line">departmentnumber <span class="type">int</span></span><br><span class="line">); </span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> student11;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;chabai01&#x27;</span>,<span class="number">14</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;chabai02&#x27;</span>,<span class="number">15</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;chabai03&#x27;</span>,<span class="number">16</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;chabai04&#x27;</span>,<span class="number">17</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;chabai05&#x27;</span>,<span class="number">18</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student11(id,name,salary,departmentnumber) <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;chabai06&#x27;</span>,<span class="number">19</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">-- group by + 聚合函数</span></span><br><span class="line"><span class="comment">-- GROUP BY子句会先按指定的列进行分组，然后对每个分组进行聚合操作。在你的查询中，COUNT(*)函数是一个聚合函数，它会对每个分组中的行数进行计数。</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),departmentnumber <span class="keyword">from</span> student11 <span class="keyword">group</span> <span class="keyword">by</span> departmentnumber;</span><br><span class="line"><span class="comment">-- group by + 聚合函数 + 关系运算符</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),departmentnumber <span class="keyword">from</span> student11 <span class="keyword">where</span> departmentnumber<span class="operator">&gt;</span><span class="number">2</span> <span class="keyword">group</span> <span class="keyword">by</span> departmentnumber;</span><br><span class="line"><span class="comment">-- group by + 聚合函数 + having</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary),departmentnumber <span class="keyword">from</span> student11 <span class="keyword">group</span> <span class="keyword">by</span> departmentnumber <span class="keyword">having</span> <span class="built_in">sum</span>(salary)<span class="operator">&gt;</span><span class="number">20</span>;</span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- 10.关键字order by 排序 asc 升序 123 desc 降序321</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h3 id="别名设置"><a href="#别名设置" class="headerlink" title="别名设置"></a>别名设置</h3><blockquote>
<p>别名设置</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用别名 &quot;stud&quot; 来代替原始的表名</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 <span class="keyword">as</span> stud</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student11 stud</span><br><span class="line"><span class="comment">-- 字段取别名</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">&#x27;姓名&#x27;</span>,id <span class="keyword">from</span> student11;</span><br></pre></td></tr></table></figure>

<h3 id="关联关系"><a href="#关联关系" class="headerlink" title="关联关系"></a>关联关系</h3><blockquote>
<p>表的关联关系 外键表示关联关系</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表的关联关系演示 一对一 一对多 多对多</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class01(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student12(</span><br><span class="line">id <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">classid <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student12 <span class="keyword">add</span> <span class="keyword">constraint</span> fk_student_classid <span class="keyword">foreign</span> key(classid) <span class="keyword">references</span> class01(id);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class01(id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;chabai01&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class01(id,name) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;chabai02&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;baicha01&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;baicha02&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;baicha03&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student12(id,name,classid) <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;baicha04&#x27;</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关联查询 子查询|连接查询完成</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student12 <span class="keyword">where</span> classid<span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> class01 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai01&#x27;</span>);</span><br><span class="line"><span class="comment">-- 关于关联关系的删除数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student12 <span class="keyword">where</span> classid<span class="operator">=</span>(<span class="keyword">select</span> id <span class="keyword">from</span> class01 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai01&#x27;</span>);</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> class01 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;chabai01&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h3><blockquote>
<p>多表连接查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.交叉连接查询 不实用</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">cross</span> <span class="keyword">join</span> 表<span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 2.内连接查询</span></span><br><span class="line"><span class="comment">-- 内连接查询会返回两个表中符合连接条件的交集，即只返回两个表中共同满足连接条件的行</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dep(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">2</span>),</span><br><span class="line">dep_id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;行政部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;生活部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">19</span>,<span class="number">1003</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">18</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">20</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="number">16</span>,<span class="number">1004</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> emp.name ename,dep.name dname <span class="keyword">from</span> dep <span class="keyword">inner</span> <span class="keyword">join</span> emp <span class="keyword">on</span> dep.id<span class="operator">=</span>emp.dep_id;</span><br><span class="line"><span class="comment">-- 3.外连接查询</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> cla(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stud(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">2</span>),</span><br><span class="line">cla_id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;python&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> cla <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;php&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">19</span>,<span class="number">1003</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">18</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">20</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stud <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="number">16</span>,<span class="number">1004</span>);</span><br><span class="line"><span class="comment">-- 左(外)连接查询</span></span><br><span class="line"><span class="comment">-- 包括左表所有记录，以及满足连接条件右表记录，如果左表的记录在右表不存在，则会在右表用null填充</span></span><br><span class="line"><span class="keyword">select</span> cla.id,cla.name,stud.name <span class="keyword">from</span> cla <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> stud <span class="keyword">on</span> cla.id<span class="operator">=</span>stud.cla_id;</span><br><span class="line"><span class="comment">-- 右(外)连接查询</span></span><br><span class="line"><span class="comment">-- 包括右表所有记录，以及满足连接条件左表记录</span></span><br><span class="line"><span class="keyword">select</span> cla.id,cla.name,stud.name <span class="keyword">from</span> cla <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> stud <span class="keyword">on</span> cla.id<span class="operator">=</span>stud.cla_id;</span><br></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><blockquote>
<p>子查询</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> class02(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student13(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="type">int</span>(<span class="number">2</span>),</span><br><span class="line">class_id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;python&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">13</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="number">15</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="number">16</span>,<span class="number">1003</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student13 <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;zhaosi&#x27;</span>,<span class="number">22</span>,<span class="number">1004</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带比较的子查询 满足任意所需子查询条件的结果才会进行外层查询</span></span><br><span class="line"><span class="comment">-- 这个只是我看看能查到什么select class_id from student13 where name=&#x27;zhangsan&#x27;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">=</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">&gt;</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带exists关键字的子查询 子查询不返回任何数据当为true才会执行外层查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13 <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带any关键字的子查询 满足任意一个子查询条件的结果都进行外层查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">&gt;</span><span class="keyword">any</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带all关键字的子查询 满足所有子查询条件的结果才会进行外层查询</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class02 <span class="keyword">values</span>(<span class="number">1005</span>,<span class="string">&#x27;helloworld&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class02 <span class="keyword">where</span> id<span class="operator">&gt;</span><span class="keyword">all</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> student13);</span><br></pre></td></tr></table></figure>

<h3 id="子查询和连接查询区别"><a href="#子查询和连接查询区别" class="headerlink" title="子查询和连接查询区别"></a>子查询和连接查询区别</h3><blockquote>
<p>子查询和连接查询区别</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 子查询是在主查询内部执行的查询，它返回的结果会作为主查询的条件之一</span></span><br><span class="line"><span class="section"># 连接查询是通过连接多个表来检索相关联数据的查询方式。</span></span><br></pre></td></tr></table></figure>

<h2 id="基础语法-参考"><a href="#基础语法-参考" class="headerlink" title="基础语法(参考)"></a>基础语法(参考)</h2><p><strong>一、SQL概述</strong></p>
<p><strong>1、什么是SQL</strong></p>
<p>&#x3D;&#x3D;SQL（Structured Query Language）&#x3D;&#x3D;是“结构化查询语言”，它是对关系型数据库的操作语言。它可以应用到所有关系型数据库中，例如：MySQL、Oracle、SQL Server 等。</p>
<p>虽然 SQL 可以用在所有关系型数据库中，但很多数据库还都有标准之后的一些语法，我们可以称之为“方言”。例如 MySQL 中的 LIMIT 语句就是 MySQL 独有的方言，其它数据库都不支持！当然，Oracle 或 SQL Server 都有自己的方言。</p>
<p><strong>2、语法要求</strong></p>
<ul>
<li>SQL 语句可以单行或多行书写，以分号结尾；</li>
<li>可以用空格和缩进来来增强语句的可读性；</li>
<li>关键字不区别大小写，建议使用大写；</li>
</ul>
<p><strong>二、SQL分类</strong></p>
<p>&#x3D;&#x3D;DDL（Data Definition Language）&#x3D;&#x3D;：数据定义语言，用来定义数据库对象：库、表、列等；<br>&#x3D;&#x3D;DML（Data Manipulation Language）&#x3D;&#x3D;：数据操作语言，用来定义数据库记录（数据）；<br>&#x3D;&#x3D;DCL（Data Control Language）&#x3D;&#x3D;：数据控制语言，用来定义访问权限和安全级别；<br>&#x3D;&#x3D;DQL（Data Query Language）&#x3D;&#x3D;：数据查询语言，用来查询记录（数据）</p>
<p><strong>三、DDl:数据定义语言</strong></p>
<p><strong>0、基本操作</strong></p>
<p>查看所有数据库：show databases；</p>
<p>切换数据库：use mydb1，切换到 mydb1 数据库；</p>
<p><strong>1、操作数据库</strong></p>
<ol>
<li><p>创建数据库：CREATE DATABASE [IF NOT EXISTS] mydb1；</p>
<p>例如：<code>CREATE DATABASE mydb1</code>，创建一个名为 mydb1 的数据库。如果这个数据已经存在，那么会报错。<br>例如 <code>CREATE DATABASE IF NOT EXISTSmydb1</code>，在名为 mydb1 的数据库不存在时创建该库，这样可以避免报错。</p>
</li>
<li><p>删除数据库：DROP DATABASE [IF EXISTS] mydb1；</p>
<p>例如：<code>DROP DATABASE mydb1</code>，删除名为 mydb1 的数据库。如果这个数据库不存在，那么会报错。DROP DATABASE IF EXISTS mydb1，就算 mydb1不存在，也不会的报错。</p>
</li>
<li><p>修改数据库编码：ALTER DATABASE mydb1 CHARACTER SET utf8</p>
<p>修改数据库 mydb1 的编码为 utf8。注意，在 MySQL 中所有的 UTF-8 编码都<br>不能使用中间的<code>“-”</code>，即 UTF-8 要书写为 UTF8。</p>
</li>
</ol>
<p><strong>2.数据类型</strong></p>
<p>MySQL 与 Java、C 一样，也有数据类型MySQL 中数据类型主要应用在列上。<br>常用类型：</p>
<p>int：整型<br>double：浮点型，例如 double(5,2)表示最多 5 位，其中必须有 2 位小数，即最大值为 999.99；<br>decimal：泛型型，在表单线方面使用该类型，因为不会出现精度缺失问题；<br>char：固定长度字符串类型；(当输入的字符不够长度时会补空格)<br>varchar：固定长度字符串类型；<br>text：字符串类型；<br>blob：字节类型；<br>date：日期类型，格式为：yyyy-MM-dd；<br>time：时间类型，格式为：hh:mm:ss<br>timestamp：时间戳类型<br><strong>3、操作表</strong></p>
<ol>
<li><p><strong>创建表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">	列名 列类型, </span><br><span class="line">	列名 列类型,</span><br><span class="line">	...... </span><br><span class="line">);</span><br><span class="line">例如，创建stu表</span><br><span class="line">CREATE TABLE stu(</span><br><span class="line">	sid CHAR(6), </span><br><span class="line">	sname VARCHAR(20), </span><br><span class="line">	age INT, </span><br><span class="line">	gender VARCHAR(10)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>查看表的结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 表名；</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE 表名；</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>修改表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">添加列：给 stu 表添加 classname 列</span><br><span class="line">ALTER TABLE stu ADD (classname varchar(100));</span><br><span class="line"></span><br><span class="line">修改列的数据类型：修改 stu 表的 gender 列类型为 CHAR(2)</span><br><span class="line">ALTER TABLE stu MODIFY gender CHAR(2);</span><br><span class="line"></span><br><span class="line">修改列名：修改 stu 表的 gender 列名为 sex</span><br><span class="line">ALTER TABLE stu change gender sex CHAR(2);</span><br><span class="line"></span><br><span class="line">删除列：删除 stu 表的 classname 列</span><br><span class="line">ALTER TABLE stu DROP classname;</span><br><span class="line"></span><br><span class="line">修改表名称：修改 stu 表名称为 student</span><br><span class="line">ALTER TABLE stu RENAME TO student;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>四、DML：数据操作语言</strong></p>
<p><strong>1.插入语句</strong></p>
<p>语法1: INSERT INTO 表名(列名 1,列名 2, …) ;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO stu(sid, sname,age,gender) VALUES(&#x27;s_1001&#x27;, &#x27;zhangSan&#x27;, 23, &#x27;male&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO stu(sid, sname) VALUES(&#x27;s_1001&#x27;, &#x27;zhangSan&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>语法2：INSERT INTO 表名 VALUES(值 1,值 2,…);</p>
<p>因为没有指定要插入的列，表示按创建表时列的顺序插入所有列的值：</p>
<p><strong>注意：所有字符串数据必须使用单引用！</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO stu VALUES(&#x27;s_1002&#x27;, &#x27;liSi&#x27;, 32, &#x27;female&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>2.修改语句</strong></p>
<p>语法：<br>UPDATE 表名 SET 列名 1&#x3D;值 1, … 列名 n&#x3D;值 n [WHERE 条件];</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UPDATE stu SET sname=’zhangSanSan’, age=’32’, gender=’female’ WHERE sid=’s_1001’;</span><br><span class="line">UPDATE stu SET sname=’liSi’, age=’20’WHERE age&gt;50 AND gender=’male’;</span><br><span class="line">UPDATE stu SET sname=’wangWu’, age=’30’WHERE age&gt;60 OR gender=’female’;</span><br><span class="line">UPDATE stu SET gender=’female’WHERE gender IS NULL</span><br><span class="line">UPDATE stu SET age=age+1 WHERE sname=’zhaoLiu’;</span><br></pre></td></tr></table></figure>

<p><strong>3.删除语句</strong></p>
<p>语法1：</p>
<p>DELETE FROM 表名 [WHERE 条件];</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM stu WHERE sid=’s_1001’003B;</span><br><span class="line">DELETE FROM stu WHERE sname=’chenQi’ OR age &gt; 30;</span><br><span class="line">DELETE FROM stu;</span><br></pre></td></tr></table></figure>

<p>语法2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE TABLE stu;</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;两者之间的区别：&#x3D;&#x3D;<br>虽然 TRUNCATE 和 DELETE 都可以删除表的所有记录，但有原理不同。DELETE的效率没有 TRUNCATE 高！<br>TRUNCATE 其实属性 DDL 语句，因为它是先 DROP TABLE，再 CREATE TABLE。<br>而且TRUNCATE删除的记录是无法回滚的，但DELETE删除的记录是可以回滚的（回滚是事务的知识！）。<br><strong>五、DCL：数据控制语言</strong></p>
<p><strong>1.创建用户</strong></p>
<p>语法:</p>
<p>CREATE USER ‘用户名’@地址 IDENTIFIED BY ‘密码’;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER ‘user1’@localhost IDENTIFIED BY ‘123’;</span><br><span class="line">CREATE USER ‘user2’@’%’ IDENTIFIED BY ‘123’;</span><br></pre></td></tr></table></figure>

<p><strong>2.给用户授权</strong></p>
<p>语法：</p>
<p>GRANT 权限 1, … , 权限 n ON 数据库.* TO ‘用户名’@地址;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT CREATE,ALTER,DROP,INSERT,UPDATE,DELETE,SELECT ON mydb1.* TO &#x27;user1&#x27;@localhost;</span><br><span class="line">GRANT ALL ON mydb1.* TO user2@localhost;</span><br></pre></td></tr></table></figure>

<p><strong>3.撤销授权</strong></p>
<p>语法:</p>
<p>REVOKE 权限 1, … , 权限 n ON 数据库.* FROM ‘用户名’@地址;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REVOKE CREATE,ALTER,DROP ON mydb1.* FROM &#x27;user1&#x27;@localhost;</span><br></pre></td></tr></table></figure>

<p><strong>4..查看用户权限</strong></p>
<p>SHOW GRANTS FOR ‘用户名’@地址;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;user1&#x27;@localhost;</span><br></pre></td></tr></table></figure>

<p><strong>5.删除用户</strong></p>
<p>语法：<br>DROP USER ‘用户名’@地址;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER ‘user1’@localhost;</span><br></pre></td></tr></table></figure>

<p><strong>6.修改用户密码（以root身份）</strong></p>
<p>语法 ：<br>use mysql;<br>alter user ‘用户名‘@localhost identified by ‘新密码’;</p>
<p><strong>六、DQL：数据查询语言</strong></p>
<p>&#x3D;&#x3D;数据库执行 DQL 语句不会对数据进行改变，而是让数据库发送结果集给客户端。&#x3D;&#x3D;</p>
<p>语法：<br>select 列名 —-&gt; 要查询的列名称<br>from 表名 —-&gt; 要查询的表名称<br>where 条件 —-&gt; 行条件<br>group by 分组列 —-&gt; 对结果分组<br>having 分组条件 —-&gt; 分组后的行条件<br>order by 排序列 —-&gt; 对结果分组<br>limit 起始行, 行数 —-&gt; 结果限定</p>
<p><strong>0.配置环境</strong></p>
<p>创建数据库：Info，在 Info 下创建如下表：</p>
<p>学生表：stu：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/2021021301182633.png" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/20210213011835426.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE stu (</span><br><span class="line">	sid CHAR(6), </span><br><span class="line">	sname VARCHAR(50), </span><br><span class="line">	age INT, </span><br><span class="line">	gender VARCHAR(50)</span><br><span class="line">);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1001&#x27;, &#x27;liuYi&#x27;, 35, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1002&#x27;, &#x27;chenEr&#x27;, 15, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1003&#x27;, &#x27;zhangSan&#x27;, 95, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1004&#x27;, &#x27;liSi&#x27;, 65, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1005&#x27;, &#x27;wangWu&#x27;, 55, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1006&#x27;, &#x27;zhaoLiu&#x27;, 75, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1007&#x27;, &#x27;sunQi&#x27;, 25, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1008&#x27;, &#x27;zhouBa&#x27;, 45, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1009&#x27;, &#x27;wuJiu&#x27;, 85, &#x27;male&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1010&#x27;, &#x27;zhengShi&#x27;, 5, &#x27;female&#x27;);</span><br><span class="line">INSERT INTO stu VALUES(&#x27;S_1011&#x27;, &#x27;xxx&#x27;, NULL, NULL);</span><br></pre></td></tr></table></figure>

<p>雇员表：emp</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/20210213011957910.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">	empno INT, </span><br><span class="line">	ename VARCHAR(50), </span><br><span class="line">	job VARCHAR(50), </span><br><span class="line">	mgr INT, </span><br><span class="line">	hiredate DATE,</span><br><span class="line">	sal DECIMAL(7,2), </span><br><span class="line">	comm decimal(7,2), </span><br><span class="line">	deptno INT</span><br><span class="line">) ;</span><br><span class="line">INSERT INTO emp values(7369,&#x27;SMITH&#x27;,&#x27;CLERK&#x27;,7902,&#x27;1980-12-17&#x27;,800,NULL,20);</span><br><span class="line">INSERT INTO emp values(7499,&#x27;ALLEN&#x27;,&#x27;SALESMAN&#x27;,7698,&#x27;1981-02-20&#x27;,1600,300,30);</span><br><span class="line">INSERT INTO emp values(7521,&#x27;WARD&#x27;,&#x27;SALESMAN&#x27;,7698,&#x27;1981-02-22&#x27;,1250,500,30);</span><br><span class="line">INSERT INTO emp values(7566,&#x27;JONES&#x27;,&#x27;MANAGER&#x27;,7839,&#x27;1981-04-02&#x27;,2975,NULL,20);</span><br><span class="line">INSERT INTO emp values(7654,&#x27;MARTIN&#x27;,&#x27;SALESMAN&#x27;,7698,&#x27;1981-09-28&#x27;,1250,1400,30);</span><br><span class="line">INSERT INTO emp values(7698,&#x27;BLAKE&#x27;,&#x27;MANAGER&#x27;,7839,&#x27;1981-05-01&#x27;,2850,NULL,30);</span><br><span class="line">INSERT INTO emp values(7782,&#x27;CLARK&#x27;,&#x27;MANAGER&#x27;,7839,&#x27;1981-06-09&#x27;,2450,NULL,10);</span><br><span class="line">INSERT INTO emp values(7788,&#x27;SCOTT&#x27;,&#x27;ANALYST&#x27;,7566,&#x27;1987-04-19&#x27;,3000,NULL,20);</span><br><span class="line">INSERT INTO emp values(7839,&#x27;KING&#x27;,&#x27;PRESIDENT&#x27;,NULL,&#x27;1981-11-17&#x27;,5000,NULL,10);</span><br><span class="line">INSERT INTO emp values(7844,&#x27;TURNER&#x27;,&#x27;SALESMAN&#x27;,7698,&#x27;1981-09-08&#x27;,1500,0,30);</span><br><span class="line">INSERT INTO emp values(7876,&#x27;ADAMS&#x27;,&#x27;CLERK&#x27;,7788,&#x27;1987-05-23&#x27;,1100,NULL,20);</span><br><span class="line">INSERT INTO emp values(7900,&#x27;JAMES&#x27;,&#x27;CLERK&#x27;,7698,&#x27;1981-12-03&#x27;,950,NULL,30);</span><br><span class="line">INSERT INTO emp values(7902,&#x27;FORD&#x27;,&#x27;ANALYST&#x27;,7566,&#x27;1981-12-03&#x27;,3000,NULL,20);</span><br><span class="line">INSERT INTO emp values(7934,&#x27;MILLER&#x27;,&#x27;CLERK&#x27;,7782,&#x27;1982-01-23&#x27;,1300,NULL,10);</span><br></pre></td></tr></table></figure>

<p>部门表：dept</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/2021021301205120.png" alt="在这里插入图片描述"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE dept(</span><br><span class="line">	deptno INT, </span><br><span class="line">	dname varchar(14),</span><br><span class="line">	loc varchar(13)</span><br><span class="line">);</span><br><span class="line">INSERT INTO dept values(10, &#x27;ACCOUNTING&#x27;, &#x27;NEW YORK&#x27;);</span><br><span class="line">INSERT INTO dept values(20, &#x27;RESEARCH&#x27;, &#x27;DALLAS&#x27;);</span><br><span class="line">INSERT INTO dept values(30, &#x27;SALES&#x27;, &#x27;CHICAGO&#x27;);</span><br><span class="line">INSERT INTO dept values(40, &#x27;OPERATIONS&#x27;, </span><br></pre></td></tr></table></figure>

<p><strong>1.基础查询</strong></p>
<p>查询所有列<br>SELECT * FROM 表名;<br>(* ：通配符，表示所有列)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM stu;</span><br></pre></td></tr></table></figure>

<p>查询指定列<br>SELECT 列名 1, 列名 2, …列名 n FROM 表名;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT sid, sname, age FROM stu;</span><br></pre></td></tr></table></figure>

<p><strong>2.条件查询</strong><br>条件查询介绍<br>条件查询就是在查询时给出 WHERE 子句，在 WHERE 子句中可以使用如下运算符及关键字：</p>
<ul>
<li>&#x3D;、!&#x3D;、&lt;&gt;、&lt;、&lt;&#x3D;、&gt;、&gt;&#x3D;；</li>
<li>BETWEEN…AND；</li>
<li>IN(set)；</li>
<li>IS NULL；</li>
<li>AND；</li>
<li>OR；</li>
<li>NOT；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">举例说明</span><br><span class="line">查询性别为女，并且年龄小于 50 的记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE gender=&#x27;female&#x27; AND age&lt;50;</span><br><span class="line"></span><br><span class="line">查询学号为 S_1001，或者姓名为 liSi 的记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sid =&#x27;S_1001&#x27; OR sname=&#x27;liSi&#x27;;</span><br><span class="line"></span><br><span class="line">查询学号为 S_1001，S_1002，S_1003 的记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sid IN (&#x27;S_1001&#x27;,&#x27;S_1002&#x27;,&#x27;S_1003&#x27;)</span><br><span class="line"></span><br><span class="line">查询学号不是 S_1001，S_1002，S_1003 的记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sid NOT IN (&#x27;S_1001&#x27;,&#x27;S_1002&#x27;,&#x27;S_1003&#x27;);</span><br><span class="line"></span><br><span class="line">查询年龄为 null 的记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE age IS NULL;</span><br><span class="line"></span><br><span class="line">查询年龄在 20 到 40 之间的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE age&gt;=20 AND age&lt;=40;</span><br><span class="line">或者</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE age BETWEEN 20 AND 40;</span><br><span class="line"></span><br><span class="line">查询性别非男的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE gender!=&#x27;male&#x27;;</span><br><span class="line">或者</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE gender&lt;&gt;&#x27;male&#x27;;</span><br><span class="line">或者</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE NOT gender=&#x27;male&#x27;;</span><br><span class="line"></span><br><span class="line">查询姓名不为 null 的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE NOT sname IS NULL;</span><br><span class="line">或者</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sname IS NOT NULL;</span><br></pre></td></tr></table></figure>

<p><strong>3.模糊查询</strong><br>SELECT 字段 FROM 表 WHERE 某字段 Like 条件<br>其中关于条件，SQL 提供了两种匹配模式：</p>
<ol>
<li><code>%</code> ：表示任意 0 个或多个字符。可匹配任意类型和长度的字符，有些情<br>况下若是中文，请使用两个百分号（%%）表示。</li>
<li><code>_ </code>： 表示任意单个字符。匹配单个任意字符，它常用来限制表达式的字 符长度语句。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">举例说明</span><br><span class="line">查询姓名由 5 个字母构成的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sname LIKE &#x27;_ _ _ _ _&#x27;;</span><br><span class="line"></span><br><span class="line">查询姓名由 5 个字母构成，并且第 5 个字母为“i”的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sname LIKE &#x27;_ _ _ _i&#x27;;</span><br><span class="line"></span><br><span class="line">查询姓名以“z”开头的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sname LIKE &#x27;z%&#x27;;</span><br><span class="line">其中“%”匹配 0~n 个任何字母。</span><br><span class="line"></span><br><span class="line">查询姓名中第 2 个字母为“i”的学生记录</span><br><span class="line">SELECT * FROM stu</span><br><span class="line">WHERE sname LIKE &#x27;_i%&#x27;;</span><br><span class="line"></span><br><span class="line">\查询姓名中包含“a”字母的学生记录</span><br><span class="line">SELECT * FROM stu WHERE sname LIKE &#x27;%a%&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>4.字段控制查询</strong><br>&#x3D;&#x3D;去掉重复记录&#x3D;&#x3D;<br>去除重复记录（两行或两行以上记录中系列的上的数据都相同），例如 emp 表中 sal 字段就存在相同的记录。当只查询 emp 表的 sal 字段时，那么会出现重复记录，那么想去除重复记录，需要使用 DISTINCT：<br>SELECT DISTINCT sal FROM emp;</p>
<p>&#x3D;&#x3D;查看雇员的月薪与佣金之和&#x3D;&#x3D;<br>因为 sal 和 comm 两列的类型都是数值类型，所以可以做加运算。如果 sal 或 comm 中有一个字段不是数值类型，那么会出错。<br>SELECT *,<br>sal+comm FROM emp;<br>comm 列有很多记录的值为 NULL，因为任何东西与 NULL 相加结果还是 NULL，所以结算结果可能会出现 NULL。下面使用了把 NULL 转换成数值 0 的函数 IFNULL：<br>SELECT *, sal+IFNULL(comm,0) FROM emp;</p>
<p>&#x3D;&#x3D;给列名添加别名&#x3D;&#x3D;<br>在上面查询中出现列名为 sal+IFNULL(comm,0)，这很不美观，现在我们给这一列给出一个别名，为 total：<br>SELECT *, sal+IFNULL(comm,0) AS total FROM emp;<br>给列起别名时，是可以省略 AS 关键字的：<br>SELECT *, sal+IFNULL(comm,0) total FROM emp;</p>
<p><strong>5.排序</strong><br>查询所有学生记录，按年龄升序排序<br>SELECT * FROM stu<br>ORDER BY sage ASC;<br>或者<br>SELECT * FROM stu ORDER BY sage;</p>
<p>查询所有学生记录，按年龄降序排序<br>SELECT * FROM stu<br>ORDER BY age DESC;</p>
<p>查询所有雇员，按月薪降序排序，如果月薪相同时，按编号升序排序<br>SELECT * FROM emp<br>ORDER BY sal DESC ,empno ASC;</p>
<p><strong>6.聚合函数</strong><br>聚合函数是用来做纵向运算的函数：</p>
<ul>
<li>COUNT()：统计指定列不为 NULL 的记录行数；</li>
<li>MAX()：计算指定列的最大值，如果指定列是字符串类型，那么使用字符串排序运算；</li>
<li>MIN()：计算指定列的最小值，如果指定列是字符串类型，那么使用字符串排序运算；</li>
<li>SUM()：计算指定列的数值和，如果指定列类型不是数值类型，那么计算结果为 0；</li>
<li>AVG()：计算指定列的平均值，如果指定列类型不是数值类型，那么计算结果为 0；</li>
</ul>
<p>&#x3D;&#x3D;COUNT：当需要纵向统计时可以使用 COUNT()。&#x3D;&#x3D;</p>
<p>查询 emp 表中记录数：<br>SELECT COUNT(*) AS cnt FROM emp;</p>
<p>查询 emp 表中有佣金的人数：<br>SELECT COUNT(comm) cnt FROM emp;<br>注意，因为 count()函数中给出的是 comm 列，那么只统计 comm 列非 NULL 的行数。</p>
<p>查询 emp 表中月薪大于 2500 的人数：<br>SELECT COUNT(*) FROM emp WHERE sal &gt; 2500;</p>
<p>统计月薪与佣金之和大于 2500 元的人数：<br>SELECT COUNT(*) AS cnt FROM emp WHERE sal+IFNULL(comm,0) &gt; 2500;<br>查询有佣金的人数，以及有领导的人数：<br>SELECT COUNT(comm), COUNT(mgr) FROM emp;</p>
<p>&#x3D;&#x3D;SUM 和 AVG：当需要纵向求和时使用 sum()函数。&#x3D;&#x3D;</p>
<p>查询所有雇员月薪和：<br>SELECT SUM(sal) FROM emp;</p>
<p>查询所有雇员月薪和，以及所有雇员佣金和：<br>SELECT SUM(sal), SUM(comm) FROM emp;</p>
<p>查询所有雇员月薪+佣金和：<br>SELECT SUM(sal+IFNULL(comm,0)) FROM emp;</p>
<p>统计所有员工平均工资：<br>SELECT SUM(sal), COUNT(sal) FROM emp;<br>或者<br>SELECT AVG(sal) FROM emp;</p>
<p>&#x3D;&#x3D;MAX 和 MIN&#x3D;&#x3D;<br>查询最高工资和最低工资：<br>SELECT MAX(sal), MIN(sal) FROM emp;</p>
<p><strong>7.分组查询</strong><br>&#x3D;&#x3D;分组查询&#x3D;&#x3D;</p>
<p>当需要分组查询时需要使用 GROUP BY 子句，例如查询每个部门的工资和，这说明要使用部分来分组。</p>
<p>查询每个部门的部门编号和每个部门的工资和：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT deptno, SUM(sal)</span><br><span class="line">FROM emp</span><br><span class="line">GROUP BY deptno;</span><br></pre></td></tr></table></figure>

<p>查询每个部门的部门编号以及每个部门的人数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT deptno,COUNT(*)</span><br><span class="line">FROM emp</span><br><span class="line">GROUP BY deptno;</span><br></pre></td></tr></table></figure>

<p>查询每个部门的部门编号以及每个部门工资大于 1500 的人数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT deptno ,COUNT(*)</span><br><span class="line">FROM emp</span><br><span class="line">WHERE sal&gt;1500`</span><br><span class="line">GROUP BY deptno;</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;HAVING 子句&#x3D;&#x3D;</p>
<p>查询工资总和大于 9000 的部门编号以及工资和：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT deptno, SUM(sal)</span><br><span class="line">FROM emp</span><br><span class="line">GROUP BY deptno</span><br><span class="line">HAVING SUM(sal) &gt; 9000;</span><br></pre></td></tr></table></figure>

<p><strong>注意，WHERE 是对分组前记录的条件，如果某行记录没有满足 WHERE 子句的条件，那<br>么这行记录不会参加分组；而 HAVING 是对分组后数据的约束。</strong></p>
<p><strong>8.LIMIT：用来限定查询结果的起始行，以及总行数。</strong><br>查询 5 行记录，起始行从 0 开始<br>SELECT * FROM emp LIMIT 0, 5;<br>注意，起始行从 0 开始，即第一行开始！</p>
<p>查询 10 行记录，起始行从 3 开始<br>SELECT * FROM emp LIMIT 3, 10;</p>
<p>分页查询<br>如果一页记录为 10 条，希望查看第 3 页记录应该怎么查呢？<br> 第一页记录起始行为 0，一共查询 10 行；<br> 第二页记录起始行为 10，一共查询 10 行；<br> 第三页记录起始行为 20，一共查询 10 行；</p>
<p><strong>9.多表连接查询： 表连接分为内连接和外连接。</strong><br>他们之间最主要的区别：内连接仅选出两张表中互相匹配的记录，外连接会选出其他不匹配的记录。</p>
<p>例如： 以下是员工表 staff 和职位表 deptno:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/20210213011424842.png" alt="在这里插入图片描述"></p>
<p>&#x3D;&#x3D;内连接&#x3D;&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select staff.name,deptname from staff,deptno where</span><br><span class="line">staff.name=deptno.name;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/20210213011456757.png" alt="在这里插入图片描述"></p>
<p>外连接分为左连接和右连接<br>左连接：包含左边表中所有的记录，右边表中没有匹配的记录显示为 NULL。<br>右连接：包含右边表中所有的记录，左边表中没有匹配的记录显示为 NULL。</p>
<p>&#x3D;&#x3D;外连接(左连接)：&#x3D;&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select staff.name,deptname from staff left join deptno onstaff.name=deptno.name;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/2021021301160372.png" alt="在这里插入图片描述"></p>
<p>&#x3D;&#x3D;外连接（右连接）：&#x3D;&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select deptname,deptno.name from staff right join deptno ondeptno.name=staff.name;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/20210213011641460.png" alt="在这里插入图片描述"></p>
<h2 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h2><blockquote>
<p>定义</p>
</blockquote>
<p>外键约束（Foreign Key Constraint）是数据库中一种用于建立表与表之间关联关系的约束，它确保了参考表（父表）和外键表（子表）之间的数据一致性和完整性。</p>
<blockquote>
<p>作用</p>
</blockquote>
<p>外键约束的主要作用是确保数据的完整性和一致性，以及建立表之间的关联关系。虽然连接查询可以实现关联查询，但外键约束在数据库设计中仍然具有重要作用。它们可以确保数据的一致性，避免了无效的关联，同时也使得数据库结构更加清晰，并提供了数据库引擎进行优化的可能性。</p>
<blockquote>
<p>让我用一个更简单的例子来说明为什么要使用外键约束。</p>
</blockquote>
<p>假设我们有两个表：<code>students</code>（学生表）和<code>courses</code>（课程表）。每个学生可以选修多门课程，而每门课程也可以被多个学生选修。我们想要确保每个学生所选的课程在<code>courses</code>表中是存在的，并且在删除课程时不会留下不一致的数据。</p>
<p>如果我们没有外键约束，可能会出现这样的情况：一个学生选修了一个不存在于<code>courses</code>表中的课程，或者一个课程被删除了，但是仍然存在于<code>students</code>表中。这种情况下，数据库中的数据就会变得不一致。</p>
<p>但是，如果我们在<code>students</code>表中的<code>course_id</code>列上添加外键约束，引用了<code>courses</code>表中的<code>course_id</code>列，情况就会不同。当尝试将一个不存在于<code>courses</code>表中的<code>course_id</code>插入到<code>students</code>表中时，数据库会拒绝这个操作，因为外键约束要求<code>students</code>表中的<code>course_id</code>列必须引用<code>courses</code>表中已经存在的<code>course_id</code>。这样，我们就能够确保每个学生所选的课程在<code>courses</code>表中是存在的，并且保持了数据的一致性和完整性。</p>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.什么是索引</span></span><br><span class="line"><span class="bullet">-</span> 官方定义:一种帮助mysql提高查询效率的数据结构</span><br><span class="line"><span class="bullet">-</span> 索引数据结构</span><br><span class="line"><span class="bullet">-</span> 索引的与优点</span><br><span class="line"><span class="code">		大大加快数据查询速度</span></span><br><span class="line"><span class="code">- 索引的缺点</span></span><br><span class="line"><span class="code">		1.维护索引需要耗费数据库资源</span></span><br><span class="line"><span class="code">		2.索引需要占用磁盘空间</span></span><br><span class="line"><span class="code">		3.当对表的数据进行增删改查的时候，因为要维护索引，速度会受到影响</span></span><br><span class="line"><span class="code"># 2.索引分类 InnoDB引擎包含前四种   MyISAM引擎全有</span></span><br><span class="line"><span class="code">- a.主键索引</span></span><br><span class="line"><span class="code">		设定为主键后数据库会自动建立索引,innodb为聚簇索引 主键索引索引列的值不能为空</span></span><br><span class="line"><span class="code">- b.单值索引 | 单列索引 | 普通索引</span></span><br><span class="line"><span class="code">		即一个索引只包含单个列,一个表可以有多个单例索引</span></span><br><span class="line"><span class="code">- c.唯一索引</span></span><br><span class="line"><span class="code">		索引列的值必须唯一，但允许有空值  唯一索引索引列的值可以存在null，但只能存在一个null</span></span><br><span class="line"><span class="code">- d.复合索引</span></span><br><span class="line"><span class="code">		即一个索引包含多个列</span></span><br><span class="line"><span class="code">- e.Full Text全文索引(Mysql5.7 版本之前 只能用于MYISAM引擎) 暂不学</span></span><br><span class="line"><span class="code"># 3.索引的基本操作</span></span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.主键索引 在建表时自动创建</span><br><span class="line">--建表 主键自动创建主键索引</span><br><span class="line">create table t<span class="emphasis">_user(id varchar(20) primary key,name varchar(20));</span></span><br><span class="line"><span class="emphasis">--查看索引</span></span><br><span class="line"><span class="emphasis">show index from t_</span>user;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../UpPictures/mysqlPictures/image-20240426173013732.png" alt="image-20240426173013732"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2.普通索引 两种创建方式</span><br><span class="line">--建表时创建</span><br><span class="line"></span><br><span class="line">--建表之后创建</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><h3 id="主从复制架构"><a href="#主从复制架构" class="headerlink" title="主从复制架构"></a>主从复制架构</h3><h3 id="读写分离架构"><a href="#读写分离架构" class="headerlink" title="读写分离架构"></a>读写分离架构</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://chabai000.github.io">茶白</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://chabai000.github.io/posts/13153/">https://chabai000.github.io/posts/13153/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://chabai000.github.io" target="_blank">茶白的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mysql/">mysql</a></div><div class="post_share"><div class="social-share" data-image="https://api.aqcoder.cn/random" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E8%B5%9E%E8%B5%8F%E7%A0%81.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/48414/" title="javaweb开发"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">javaweb开发</div></div></a></div><div class="next-post pull-right"><a href="/posts/37899/" title="mybatis-plus"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">mybatis-plus</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">茶白</div><div class="author-info__description">不论你在什么时候开始，重要的是开始之后就不要停止；不论你在什么时候结束，重要的是结束之后就不要悔恨</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/chabai000"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/chabai000" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1693522579@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E7%BA%AF%E6%89%8B%E6%95%B2"><span class="toc-number">2.</span> <span class="toc-text">基础语法纯手敲</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">数据库的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">2.2.</span> <span class="toc-text">数据库表的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.3.</span> <span class="toc-text">数据表的约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.</span> <span class="toc-text">数据表插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE-1"><span class="toc-number">2.6.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.7.</span> <span class="toc-text">数据表简单查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">2.8.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.9.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.10.</span> <span class="toc-text">别名设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-number">2.11.</span> <span class="toc-text">关联关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.12.</span> <span class="toc-text">多表连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.13.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E5%8C%BA%E5%88%AB"><span class="toc-number">2.14.</span> <span class="toc-text">子查询和连接查询区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95-%E5%8F%82%E8%80%83"><span class="toc-number">3.</span> <span class="toc-text">基础语法(参考)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.</span> <span class="toc-text">外键约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">5.</span> <span class="toc-text">索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96"><span class="toc-number">6.</span> <span class="toc-text">优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%9E%B6%E6%9E%84"><span class="toc-number">6.1.</span> <span class="toc-text">主从复制架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E6%9E%B6%E6%9E%84"><span class="toc-number">6.2.</span> <span class="toc-text">读写分离架构</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/64202/" title="linux"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux"/></a><div class="content"><a class="title" href="/posts/64202/" title="linux">linux</a><time datetime="2024-05-04T07:25:11.000Z" title="发表于 2024-05-04 15:25:11">2024-05-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/57545/" title="mysql详细版"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mysql详细版"/></a><div class="content"><a class="title" href="/posts/57545/" title="mysql详细版">mysql详细版</a><time datetime="2024-05-04T07:24:58.000Z" title="发表于 2024-05-04 15:24:58">2024-05-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/20250/" title="javase"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="javase"/></a><div class="content"><a class="title" href="/posts/20250/" title="javase">javase</a><time datetime="2024-05-04T06:16:52.000Z" title="发表于 2024-05-04 14:16:52">2024-05-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/52907/" title="javaweb基础"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="javaweb基础"/></a><div class="content"><a class="title" href="/posts/52907/" title="javaweb基础">javaweb基础</a><time datetime="2024-05-04T04:26:30.000Z" title="发表于 2024-05-04 12:26:30">2024-05-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/48414/" title="javaweb开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://api.aqcoder.cn/random" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="javaweb开发"/></a><div class="content"><a class="title" href="/posts/48414/" title="javaweb开发">javaweb开发</a><time datetime="2024-04-27T16:09:48.000Z" title="发表于 2024-04-28 00:09:48">2024-04-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 茶白</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const disqus_config = function () {
    this.page.url = 'https://chabai000.github.io/posts/13153/'
    this.page.identifier = '/posts/13153/'
    this.page.title = 'mysql'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://lchabai.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=lchabai&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Disqus' === 'Disqus' || !true) {
    if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=lchabai&related=thread&limit=6&api_key=')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="9310458102" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-lrcType="0"> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>